function adjustImgPopups(){if($("#show_image_popups").is(":checked")){$(".option_grid").css("display","flex");$(".option_list").hide();$(".custom_dropdown .selected img").show();$(".dropdown_options").css("width","60vw")}else{$(".option_grid").hide();$(".option_list").show();$(".custom_dropdown .selected img").hide();$(".dropdown_options").css("width","")}}function determineOpts(){function a(b){$("[data-for='drawer_boxes']").find(".option_list").find("[data-value='"+b+"']").hide()}$("[data-for='drawer_boxes']").find(".option_list").children(".option").each(function(){$(this).show()});switch($("#construction_method").val()){case"C":a("A4");a("A5");a("A6");a("A7");a("A8");a("A9");break;default:a("A2");a("A3");break}}$("body").on("click",".custom_dropdown",function(f){adjustImgPopups();if(f.target.nodeName!=="INPUT"){$(".custom_dropdown").not(this).children(".dropdown_options").hide();$(this).find(".dropdown_options").toggle();var c=$(this).find(".dropdown_options").attr("data-for");if(c==="days_to_ship"){var a=$("#days_to_ship").val();var b;switch(a){case"G":b="green";break;case"Y":b="yellow";break;case"N":b="orange";break;case"R":b="red";break;default:b="gray";break}$.post("/ondemand/room_actions.php?action=calc_del_date",{days_to_ship:a},function(e){$(".delivery_date").val(e).removeClass("job-color-red job-color-green job-color-yellow job-color-orange").addClass("job-color-"+b).data("datepicker").setDate(e)})}var d=this.getBoundingClientRect();var g=(window.innerHeight-(d.top+$(this).outerHeight(true)))-50;if(g<400){$(this).find(".dropdown_options").css({bottom:"0",top:"inherit"});g=450}else{if(g>650){$(this).find(".dropdown_options").css({bottom:"inherit",top:"20px"});g=650}else{$(this).find(".dropdown_options").css({bottom:"inherit",top:"20px"})}}$(this).find(".dropdown_options").css("max-height",g);$(".dropdown_options").on("DOMMouseScroll mousewheel",function(k){var m=$(this),l=this.scrollTop,j=this.scrollHeight,h=m.height(),n=(k.type==="DOMMouseScroll"?k.originalEvent.detail*-40:k.originalEvent.wheelDelta),e=n>0;var i=function(){k.stopPropagation();k.preventDefault();k.returnValue=false;return false};if(!e&&-n>j-h-l){m.scrollTop(j);return i()}else{if(e&&n>l){m.scrollTop(0);return i()}}})}else{$(".custom_dropdown").find(".dropdown_options").hide()}determineOpts()}).on("click",".option",function(){var d;var c;var a="";var b=$(this).attr("data-value");if($(this).attr("data-addl-info")!==undefined){a=$(this).attr("data-addl-info")+" - "}if($(this).html()===""){c=a+$(this).attr("data-display-text")}else{c=a+$(this).html()}if($(this).hasClass("sub_option")&&$(this).parent().hasClass("grid_element")){d=$(this).parent().parent().parent().attr("data-for");$(this).parent().parent().parent().parent().find(".selected").html(c)}else{d=$(this).parent().parent().attr("data-for");$(this).parent().parent().parent().find(".selected").html(c)}$("#"+d).val(b);if($("[id^='vin_code']").length>0){calcVin(active_room_id)}determineOpts()}).on("change","#show_image_popups",function(){adjustImgPopups()}).on("click","#dropdown_p_type",function(){productTypeSwitch()});