var winMgr={windowContainerSimple:null,windowContainer:null,containerWidth:null,containerHeight:null,window:null,winPos:{},wins:{},winPosOffset:{x:0,y:0},init:function(simpleContainer){winMgr.windowContainerSimple=simpleContainer;winMgr.windowContainer=$("#"+this.windowContainerSimple);winMgr.containerWidth=this.windowContainer.outerWidth()/2;winMgr.containerHeight=this.windowContainer.outerHeight()/2;winMgr.window=new dhtmlXWindows;winMgr.window.attachEvent("onClose",function(win){let eleID=win._idd;$(".widget-item[data-window='"+eleID+"']").removeClass("widget-active");winMgr.winPosOffset.x-=20;winMgr.winPosOffset.y-=20;return winMgr.removeWinVar(eleID)});winMgr.autoTitle()},newWin:function(winVarName,pos,windowTitle,attachObj,ajaxURL,ajaxPass){winMgr.winPos[winVarName]={};switch(pos){case 1:winMgr.winPos[winVarName].x=0;winMgr.winPos[winVarName].y=0;break;case 2:winMgr.winPos[winVarName].x=winMgr.containerWidth;winMgr.winPos[winVarName].y=0;break;case 3:winMgr.winPos[winVarName].x=0;winMgr.winPos[winVarName].y=winMgr.containerHeight;break;case 4:winMgr.winPos[winVarName].x=winMgr.containerWidth;winMgr.winPos[winVarName].y=winMgr.containerHeight;break;default:winMgr.winPos[winVarName].x=winMgr.containerWidth/2+winMgr.winPosOffset.x;winMgr.winPos[winVarName].y=winMgr.containerHeight/2+winMgr.winPosOffset.y;winMgr.winPosOffset.x+=20;winMgr.winPosOffset.y+=20;break}winMgr.wins[winVarName]=winMgr.window.createWindow({id:winVarName,left:winMgr.winPos[winVarName].x,top:winMgr.winPos[winVarName].y,width:winMgr.containerWidth,height:winMgr.containerHeight,caption:windowTitle});if(attachObj!==null){winMgr.wins[winVarName].attachObject(attachObj)}else if(ajaxURL!==null){winMgr.wins[winVarName].attachURL(ajaxURL,true,ajaxPass)}winMgr.window.attachViewportTo(winMgr.windowContainerSimple);winMgr.window.window(winVarName).addUserButton("popout",0,"Pop Out");winMgr.window.window(winVarName).keepInViewport(true);winMgr.window.window(winVarName).button("popout").attachEvent("onClick",function(){window.open("/main.php?page=crm/index&maximized=true&win="+winVarName,"_blank","toolbar=0,location=0,menubar=0,left=0,top=0");winMgr.closeWin(winVarName);return false})},newAutoWin:function(winVarName,maximized){let windowTranslator={crm:{position:1,windowTitle:"CRM",attachObj:null,ajaxURL:"/html/windows/crm.php"},activeOps:{position:2,windowTitle:"Active Operations",attachObj:null,ajaxURL:"/html/windows/active_operations.php"},production:{position:3,windowTitle:"Production",attachObj:null,ajaxURL:"/html/windows/production.php"},pendingOps:{position:4,windowTitle:"Pending Operations",attachObj:null,ajaxURL:"/html/windows/pending_operations.php"},quotes:{windowTitle:"Quotes",attachObj:null,ajaxURL:"/html/windows/quotes.php"},calendar:{windowTitle:"Calendar",attachObj:null,ajaxURL:"/html/calendar/index.php"},email:{windowTitle:"Email",attachObj:null,ajaxURL:"/html/mail/cross_page.php"},opl:{windowTitle:"OPL",attachObj:null,ajaxURL:"/html/opl/index.php"},reports:{windowTitle:"Reports",attachObj:null,ajaxURL:"/html/sales_list.php?win=true"},inventory:{windowTitle:"Inventory",attachObj:null,ajaxURL:"/html/inventory/index.php"},accounting:{windowTitle:"Accounting",attachObj:null,ajaxURL:"/html/accounting/index.php"},feedback:{windowTitle:"Feedback/Tasks",attachObj:null,ajaxURL:"/html/tasks.php"},dealers:{windowTitle:"Dealer Management",attachObj:null,ajaxURL:"/html/windows/dealers.php"},database:{windowTitle:"Database Management",attachObj:null,ajaxURL:"/html/windows/database_mgmt.php"}};if(windowTranslator[winVarName]!==undefined){winMgr.newWin(winVarName,windowTranslator[winVarName].position,windowTranslator[winVarName].windowTitle,windowTranslator[winVarName].attachObj,windowTranslator[winVarName].ajaxURL);if(winMgr.winPosOffset.x>0&&winMgr.winPosOffset.y>0){winMgr.winPosOffset.x+=20;winMgr.winPosOffset.y+=20}if(maximized){winMgr.window.window(winVarName).maximize()}return true}else{console.log("Error: Window Translator was unable to find the information for window "+winVarName);return false}},getWins:function(){return winMgr.window},removeWinVar:function(w){return delete winMgr.wins[w]},setFocus:function(focusContainerName){winMgr.window.window(focusContainerName).bringToTop();$(".request_header").text(winMgr.window.window(focusContainerName).getText())},autoTitle:function(){winMgr.getWins().attachEvent("onFocus",function(win){$(".request_header").text(win.getText())})},closeWin:function(winName){winMgr.window.window(winName).close()}};