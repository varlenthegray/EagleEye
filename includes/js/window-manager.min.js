var winMgr={windowContainerSimple:null,windowContainer:null,containerWidth:null,containerHeight:null,window:null,winPos:{},wins:{},winPosOffset:{x:0,y:0},init:function(a){winMgr.windowContainerSimple=a;winMgr.windowContainer=$("#"+this.windowContainerSimple);winMgr.containerWidth=this.windowContainer.outerWidth()/2;winMgr.containerHeight=this.windowContainer.outerHeight()/2;winMgr.window=new dhtmlXWindows();winMgr.window.attachEvent("onClose",function(b){let eleID=b._idd;$(".widget-item[data-window='"+eleID+"']").removeClass("widget-active");winMgr.winPosOffset.x-=20;winMgr.winPosOffset.y-=20;return winMgr.removeWinVar(eleID)});winMgr.autoTitle()},newWin:function(b,f,d,a,c,e){winMgr.winPos[b]={};switch(f){case 1:winMgr.winPos[b].x=0;winMgr.winPos[b].y=0;break;case 2:winMgr.winPos[b].x=winMgr.containerWidth;winMgr.winPos[b].y=0;break;case 3:winMgr.winPos[b].x=0;winMgr.winPos[b].y=winMgr.containerHeight;break;case 4:winMgr.winPos[b].x=winMgr.containerWidth;winMgr.winPos[b].y=winMgr.containerHeight;break;default:winMgr.winPos[b].x=(winMgr.containerWidth/2)+winMgr.winPosOffset.x;winMgr.winPos[b].y=(winMgr.containerHeight/2)+winMgr.winPosOffset.y;winMgr.winPosOffset.x+=20;winMgr.winPosOffset.y+=20;break}winMgr.wins[b]=winMgr.window.createWindow({id:b,left:winMgr.winPos[b].x,top:winMgr.winPos[b].y,width:winMgr.containerWidth,height:winMgr.containerHeight,caption:d});if(a!==null){winMgr.wins[b].attachObject(a)}else{if(c!==null){winMgr.wins[b].attachURL(c,true,e)}}winMgr.window.attachViewportTo(winMgr.windowContainerSimple);winMgr.window.window(b).addUserButton("popout",0,"Pop Out");winMgr.window.window(b).keepInViewport(true);winMgr.window.window(b).button("popout").attachEvent("onClick",function(){window.open("/main.php?page=crm/index&maximized=true&win="+b,"_blank","toolbar=0,location=0,menubar=0,left=0,top=0");winMgr.closeWin(b);return false})},newAutoWin:function(b,a){let windowTranslator={crm:{position:1,windowTitle:"CRM",attachObj:null,ajaxURL:"/html/windows/crm.php"},quotes:{position:2,windowTitle:"Quotes",attachObj:null,ajaxURL:"/html/windows/quotes.php"},production:{position:3,windowTitle:"Production",attachObj:null,ajaxURL:"/html/windows/production.php"},operations:{position:4,windowTitle:"Active Operations",attachObj:null,ajaxURL:"/html/windows/active_operations.php"},calendar:{windowTitle:"Calendar",attachObj:null,ajaxURL:"/html/calendar/index.php"},email:{windowTitle:"Email",attachObj:null,ajaxURL:"/html/mail/cross_page.php"},opl:{windowTitle:"OPL",attachObj:null,ajaxURL:"/html/opl/index.php"},reports:{windowTitle:"Reports",attachObj:null,ajaxURL:"/html/sales_list.php?win=true"},inventory:{windowTitle:"Inventory",attachObj:null,ajaxURL:"/html/inventory/index.php"},accounting:{windowTitle:"Inventory",attachObj:null,ajaxURL:"/html/accounting/index.php"},feedback:{windowTitle:"Feedback/Tasks",attachObj:null,ajaxURL:"/html/tasks.php"}};if(windowTranslator[b]!==undefined){winMgr.newWin(b,windowTranslator[b].position,windowTranslator[b].windowTitle,windowTranslator[b].attachObj,windowTranslator[b].ajaxURL);if(winMgr.winPosOffset.x>0&&winMgr.winPosOffset.y>0){winMgr.winPosOffset.x+=20;winMgr.winPosOffset.y+=20}if(a){winMgr.window.window(b).maximize()}return true}else{console.log("Error: Window Translator was unable to find the information for window "+b);return false}},getWins:function(){return winMgr.window},removeWinVar:function(a){return delete winMgr.wins[a]},setFocus:function(a){winMgr.window.window(a).bringToTop();$(".request_header").text(winMgr.window.window(a).getText())},autoTitle:function(){winMgr.getWins().attachEvent("onFocus",function(a){$(".request_header").text(a.getText())})},closeWin:function(a){winMgr.window.window(a).close()}};