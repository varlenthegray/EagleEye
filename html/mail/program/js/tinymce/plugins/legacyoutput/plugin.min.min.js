!function(a){a.PluginManager.add("legacyoutput",function(b,d,c){b.settings.inline_styles=!1,b.on("init",function(){var g="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",f=a.explode(b.settings.font_size_style_values),e=b.schema;b.formatter.register({alignleft:{selector:g,attributes:{align:"left"}},aligncenter:{selector:g,attributes:{align:"center"}},alignright:{selector:g,attributes:{align:"right"}},alignjustify:{selector:g,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(h){return a.inArray(f,h.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),a.each("b,i,u,strike".split(","),function(h){e.addValidElements(h+"[*]")}),e.getElementRule("font")||e.addValidElements("font[face|size|color|style]"),a.each(g.split(","),function(i){var h=e.getElementRule(i);h&&(h.attributes.align||(h.attributes.align={},h.attributesOrder.push("align")))})}),b.addButton("fontsizeselect",function(){var g=[],h="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",f=b.settings.fontsize_formats||h;return b.$.each(f.split(" "),function(j,m){var k=m,e=m,l=m.split("=");l.length>1&&(k=l[0],e=l[1]),g.push({text:k,value:e})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:g,fixedWidth:!0,onPostRender:function(){var i=this;b.on("NodeChange",function(){var e;e=b.dom.getParent(b.selection.getNode(),"font"),e?i.value(e.size):i.value("")})},onclick:function(i){i.control.settings.value&&b.execCommand("FontSize",!1,i.control.settings.value)}}}),b.addButton("fontselect",function(){function g(k){k=k.replace(/;$/,"").split(";");for(var i=k.length;i--;){k[i]=k[i].split("=")}return k}var j="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",f=[],h=g(b.settings.font_formats||j);return c.each(h,function(k,i){f.push({text:{raw:i[0]},value:i[1],textStyle:i[1].indexOf("dings")==-1?"font-family:"+i[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:f,fixedWidth:!0,onPostRender:function(){var i=this;b.on("NodeChange",function(){var e;e=b.dom.getParent(b.selection.getNode(),"font"),e?i.value(e.face):i.value("")})},onselect:function(i){i.control.settings.value&&b.execCommand("FontName",!1,i.control.settings.value)}}})})}(tinymce);