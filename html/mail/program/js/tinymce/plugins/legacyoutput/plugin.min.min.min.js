!function(b){b.PluginManager.add("legacyoutput",function(a,e,f){a.settings.inline_styles=!1,a.on("init",function(){var c="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",d=b.explode(a.settings.font_size_style_values),h=a.schema;a.formatter.register({alignleft:{selector:c,attributes:{align:"left"}},aligncenter:{selector:c,attributes:{align:"center"}},alignright:{selector:c,attributes:{align:"right"}},alignjustify:{selector:c,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(g){return b.inArray(d,g.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),b.each("b,i,u,strike".split(","),function(g){h.addValidElements(g+"[*]")}),h.getElementRule("font")||h.addValidElements("font[face|size|color|style]"),b.each(c.split(","),function(g){var j=h.getElementRule(g);j&&(j.attributes.align||(j.attributes.align={},j.attributesOrder.push("align")))})}),a.addButton("fontsizeselect",function(){var d=[],c="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",i=a.settings.fontsize_formats||c;return a.$.each(i.split(" "),function(o,g){var n=g,p=g,h=g.split("=");h.length>1&&(n=h[0],p=h[1]),d.push({text:n,value:p})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:d,fixedWidth:!0,onPostRender:function(){var g=this;a.on("NodeChange",function(){var h;h=a.dom.getParent(a.selection.getNode(),"font"),h?g.value(h.size):g.value("")})},onclick:function(g){g.control.settings.value&&a.execCommand("FontSize",!1,g.control.settings.value)}}}),a.addButton("fontselect",function(){function i(g){g=g.replace(/;$/,"").split(";");for(var h=g.length;h--;){g[h]=g[h].split("=")}return g}var c="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",k=[],d=i(a.settings.font_formats||c);return f.each(d,function(g,h){k.push({text:{raw:h[0]},value:h[1],textStyle:h[1].indexOf("dings")==-1?"font-family:"+h[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:k,fixedWidth:!0,onPostRender:function(){var g=this;a.on("NodeChange",function(){var h;h=a.dom.getParent(a.selection.getNode(),"font"),h?g.value(h.face):g.value("")})},onselect:function(g){g.control.settings.value&&a.execCommand("FontName",!1,g.control.settings.value)}}})})}(tinymce);