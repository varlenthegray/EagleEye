tinymce.PluginManager.add("directionality",function(b){function a(e){var g,f=b.dom,d=b.selection.getSelectedBlocks();d.length&&(g=f.getAttrib(d[0],"dir"),tinymce.each(d,function(h){f.getParent(h.parentNode,"*[dir='"+e+"']",f.getRoot())||(g!=e?f.setAttrib(h,"dir",e):f.setAttrib(h,"dir",null))}),b.nodeChanged())}function c(f){var d=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(e){d.push(e+"[dir="+f+"]")}),d.join(",")}b.addCommand("mceDirectionLTR",function(){a("ltr")}),b.addCommand("mceDirectionRTL",function(){a("rtl")}),b.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:c("ltr")}),b.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:c("rtl")})});