!function(){var h={},d=function(q){for(var w=h[q],p=w.deps,u=w.defn,m=p.length,r=new Array(m),e=0;e<m;++e){r[e]=g(p[e])}var v=u.apply(null,r);if(void 0===v){throw"module ["+q+"] returned undefined"}w.instance=v},k=function(a,i,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===i){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}h[a]={deps:i,defn:e,instance:void 0}},g=function(e){var a=h[e];if(void 0===a){throw"module ["+e+"] was undefined"}return void 0===a.instance&&d(e),a.instance},c=function(m,l){for(var q=m.length,a=new Array(q),p=0;p<q;++p){a[p]=g(m[p])}l.apply(null,a)},j={};j.bolt={module:{api:{define:k,require:c,demand:g}}};var b=k,f=function(i,a){b(i,[],function(){return a})};f("1",tinymce.PluginManager),f("2",tinymce.util.Tools),f("3",tinymce.util.VK),b("4",[],function(){var w=function(a){return a&&3===a.nodeType},z=function(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)},q=function(a){return a&&/^(LI|DT|DD)$/.test(a.nodeName)},m=function(a){return a&&"BR"===a.nodeName},v=function(a){return a.parentNode.firstChild===a},p=function(a){return a.parentNode.lastChild===a},y=function(i,a){return a&&!!i.schema.getTextBlockElements()[a.nodeName]},A=function(i,a){return !!m(a)&&!(!i.isBlock(a.nextSibling)||m(a.previousSibling))},u=function(l,a,o){var i=l.isEmpty(a);return !(o&&l.select("span[data-mce-type=bookmark]",a).length>0)&&i},x=function(i,a){return i.isChildOf(a,i.getRoot())};return{isTextNode:w,isListNode:z,isListItemNode:q,isBr:m,isFirstChild:v,isLastChild:p,isTextBlock:y,isBogusBr:A,isEmpty:u,isChildOfBody:x}}),f("9",tinymce.dom.TreeWalker),f("a",tinymce.dom.RangeUtils),b("b",["2","4"],function(i,a){var l=function(e){return i.grep(e.selection.getSelectedBlocks(),function(m){return a.isListItemNode(m)})};return{getSelectedListItems:l}}),f("h",tinymce.dom.DOMUtils.DOM),b("d",["a","4"],function(l,a){var m=function(s,p){var e=l.getNode(s,p);if(a.isListItemNode(s)&&a.isTextNode(e)){var q=p>=s.childNodes.length?e.data.length:0;return{container:e,offset:q}}return{container:s,offset:p}},i=function(q){var o=q.cloneRange(),p=m(q.startContainer,q.startOffset);o.setStart(p.container,p.offset);var n=m(q.endContainer,q.endOffset);return o.setEnd(n.container,n.offset),o};return{getNormalizedEndPoint:m,normalizeRange:i}}),b("c",["h","4","d"],function(o,l,p){var m=function(e){var q={},i=function(t){var s,u,n;u=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"],1===u.nodeType&&(s=o.create("span",{"data-mce-type":"bookmark"}),u.hasChildNodes()?(n=Math.min(n,u.childNodes.length-1),t?u.insertBefore(s,u.childNodes[n]):o.insertAfter(s,u.childNodes[n])):u.appendChild(s),u=s,n=0),q[t?"startContainer":"endContainer"]=u,q[t?"startOffset":"endOffset"]=n};return i(!0),e.collapsed||i(),q},a=function(n){function q(w){var u,t,v,s=function(r){for(var i=r.parentNode.firstChild,x=0;i;){if(i===r){return x}1===i.nodeType&&"bookmark"===i.getAttribute("data-mce-type")||x++,i=i.nextSibling}return -1};u=v=n[w?"startContainer":"endContainer"],t=n[w?"startOffset":"endOffset"],u&&(1===u.nodeType&&(t=s(u),u=u.parentNode,o.remove(v)),n[w?"startContainer":"endContainer"]=u,n[w?"startOffset":"endOffset"]=t)}q(!0),q();var e=o.createRng();return e.setStart(n.startContainer,n.startOffset),n.endContainer&&e.setEnd(n.endContainer,n.endOffset),p.normalizeRange(e)};return{createBookmark:m,resolveBookmark:a}}),b("e",["h","2","4"],function(o,l,p){var m=function(n,q){var e,s=q.parentNode;"LI"===s.nodeName&&s.firstChild===q&&(e=s.previousSibling,e&&"LI"===e.nodeName?(e.appendChild(q),p.isEmpty(n,s)&&o.remove(s)):o.setStyle(s,"listStyleType","none")),p.isListNode(s)&&(e=s.previousSibling,e&&"LI"===e.nodeName&&e.appendChild(q))},a=function(i,q){l.each(l.grep(i.select("ol,ul",q)),function(e){m(i,e)})};return{normalizeList:m,normalizeLists:a}}),f("f",tinymce.dom.BookmarkManager),f("j",tinymce.Env),b("i",["h","j"],function(i,a){var l=function(p,e,t){var m,w,y,q=i.createFragment(),v=p.schema.getBlockElements();if(p.settings.forced_root_block&&(t=t||p.settings.forced_root_block),t&&(w=i.create(t),w.tagName===p.settings.forced_root_block&&i.setAttribs(w,p.settings.forced_root_block_attrs),q.appendChild(w)),e){for(;m=e.firstChild;){var x=m.nodeName;y||"SPAN"===x&&"bookmark"===m.getAttribute("data-mce-type")||(y=!0),v[x]?(q.appendChild(m),w=null):t?(w||(w=i.create(t),q.appendChild(w)),w.appendChild(m)):q.appendChild(m)}}return p.settings.forced_root_block?y||a.ie&&!(a.ie>10)||w.appendChild(i.create("br",{"data-mce-bogus":"1"})):q.appendChild(i.create("br")),q};return{createNewTextBlock:l}}),b("g",["h","2","i","4"],function(o,l,p,m){var a=function(q,e,w,y){var n,v,x,t,r=function(i){l.each(x,function(s){i.parentNode.insertBefore(s,w.parentNode)}),o.remove(i)};for(x=o.select('span[data-mce-type="bookmark"]',e),y=y||p.createNewTextBlock(q,w),n=o.createRng(),n.setStartAfter(w),n.setEndAfter(e),v=n.extractContents(),t=v.firstChild;t;t=t.firstChild){if("LI"===t.nodeName&&q.dom.isEmpty(t)){o.remove(t);break}}q.dom.isEmpty(v)||o.insertAfter(v,e),o.insertAfter(y,e),m.isEmpty(q.dom,w.parentNode)&&r(w.parentNode),o.remove(w),m.isEmpty(q.dom,e)&&o.remove(e)};return{splitList:a}}),b("7",["h","4","c","b","g","e","i"],function(w,z,q,m,v,p,y){var A=function(e,a){z.isEmpty(e,a)&&w.remove(a)},u=function(s,i){var a,o=i.parentNode,e=o.parentNode;return o===s.getBody()||("DD"===i.nodeName?(w.rename(i,"DT"),!0):z.isFirstChild(i)&&z.isLastChild(i)?("LI"===e.nodeName?(w.insertAfter(i,e),A(s.dom,e),w.remove(o)):z.isListNode(e)?w.remove(o,!0):(e.insertBefore(y.createNewTextBlock(s,i),o),w.remove(o)),!0):z.isFirstChild(i)?("LI"===e.nodeName?(w.insertAfter(i,e),i.appendChild(o),A(s.dom,e)):z.isListNode(e)?e.insertBefore(i,o):(e.insertBefore(y.createNewTextBlock(s,i),o),w.remove(i)),!0):z.isLastChild(i)?("LI"===e.nodeName?w.insertAfter(i,e):z.isListNode(e)?w.insertAfter(i,o):(w.insertAfter(y.createNewTextBlock(s,i),o),w.remove(i)),!0):("LI"===e.nodeName?(o=e,a=y.createNewTextBlock(s,i,"LI")):a=z.isListNode(e)?y.createNewTextBlock(s,i,"LI"):y.createNewTextBlock(s,i),v.splitList(s,o,i,a),p.normalizeLists(s.dom,o.parentNode),!0))},x=function(C){var r=m.getSelectedListItems(C);if(r.length){var n,D,l=q.createBookmark(C.selection.getRng(!0)),B=C.getBody();for(n=r.length;n--;){for(var E=r[n].parentNode;E&&E!==B;){for(D=r.length;D--;){if(r[D]===E){r.splice(n,1);break}}E=E.parentNode}}for(n=0;n<r.length&&(u(C,r[n])||0!==n);n++){}return C.selection.setRng(q.resolveBookmark(l)),C.nodeChanged(),!0}};return{outdent:u,outdentSelection:x}}),b("8",["2","f","b","4","c","g","e","7"],function(P,B,I,F,L,H,T,D){var K=function(l,a,m){var i=m["list-style-type"]?m["list-style-type"]:null;l.setStyle(a,"list-style-type",i)},R=function(a,e){P.each(e,function(i,l){a.setAttribute(l,i)})},A=function(a,i,e){R(i,e["list-attributes"]),P.each(a.select("li",i),function(l){R(l,e["list-item-attributes"])})},Q=function(i,a,l){K(i,a,l),A(i,a,l)},O=function(r,p,u){var m,s,l=r.getBody();for(m=p[u?"startContainer":"endContainer"],s=p[u?"startOffset":"endOffset"],1===m.nodeType&&(m=m.childNodes[Math.min(s,m.childNodes.length-1)]||m);m.parentNode!==l;){if(F.isTextBlock(r,m)){return m}if(/^(TD|TH)$/.test(m.parentNode.nodeName)){return m}m=m.parentNode}return m},G=function(r,v){for(var m,C=[],V=r.getBody(),t=r.dom,y=O(r,v,!0),U=O(r,v,!1),x=[],e=y;e&&(x.push(e),e!==U);e=e.nextSibling){}return P.each(x,function(l){if(F.isTextBlock(r,l)){return C.push(l),void (m=null)}if(t.isBlock(l)||F.isBr(l)){return F.isBr(l)&&t.remove(l),void (m=null)}var a=l.nextSibling;return B.isBookmarkNode(l)&&(F.isTextBlock(r,a)||!a&&l.parentNode===V)?void (m=null):(m||(m=t.create("p"),l.parentNode.insertBefore(m,l),C.push(m)),void m.appendChild(l))}),C},J=function(m,v,r){var i,p=m.selection.getRng(!0),e="LI",u=m.dom;r=r?r:{},"false"!==u.getContentEditable(m.selection.getNode())&&(v=v.toUpperCase(),"DL"===v&&(e="DT"),i=L.createBookmark(p),P.each(G(m,p),function(t){var n,l,o=function(s){var a=u.getStyle(s,"list-style-type"),x=r?r["list-style-type"]:"";return x=null===x?"":x,a===x};l=t.previousSibling,l&&F.isListNode(l)&&l.nodeName===v&&o(l)?(n=l,t=u.rename(t,e),l.appendChild(t)):(n=u.create(v),t.parentNode.insertBefore(n,t),n.appendChild(t),t=u.rename(t,e)),Q(u,n,r),w(m.dom,n)}),m.selection.setRng(L.resolveBookmark(i)))},N=function(i){var a=L.createBookmark(i.selection.getRng(!0)),n=i.getBody(),e=I.getSelectedListItems(i),m=P.grep(e,function(l){return i.dom.isEmpty(l)});e=P.grep(e,function(l){return !i.dom.isEmpty(l)}),P.each(m,function(l){if(F.isEmpty(i.dom,l)){return void D.outdent(i,l)}}),P.each(e,function(o){var p,l;if(o.parentNode!==i.getBody()){for(p=o;p&&p!==n;p=p.parentNode){F.isListNode(p)&&(l=p)}H.splitList(i,l,o),T.normalizeLists(i.dom,l.parentNode)}}),i.selection.setRng(L.resolveBookmark(a))},M=function(i,a){return i&&a&&F.isListNode(i)&&i.nodeName===a.nodeName},z=function(o,l,p){var m=o.getStyle(l,"list-style-type",!0),a=o.getStyle(p,"list-style-type",!0);return m===a},S=function(i,a){return i.className===a.className},q=function(i,a,l){return M(a,l)&&z(i,a,l)&&S(a,l)},w=function(l,a){var m,i;if(m=a.nextSibling,q(l,a,m)){for(;i=m.firstChild;){a.appendChild(i)}l.remove(m)}if(m=a.previousSibling,q(l,a,m)){for(;i=m.lastChild;){a.insertBefore(i,a.firstChild)}l.remove(m)}},E=function(l,a,p){var i=l.dom.getParent(l.selection.getStart(),"OL,UL,DL");if(p=p?p:{},i!==l.getBody()){if(i){if(i.nodeName===a){N(l,a)}else{var m=L.createBookmark(l.selection.getRng(!0));Q(l.dom,i,p),w(l.dom,l.dom.rename(i,a)),l.selection.setRng(L.resolveBookmark(m))}}else{J(l,a,p)}}};return{toggleList:E,removeList:N,mergeWithAdjacentLists:w}}),b("5",["9","a","3","b","4","c","d","e","8"],function(E,J,x,q,A,w,H,K,z){var G=function(L,p,t){var i,m,e=p.startContainer,u=p.startOffset;if(3===e.nodeType&&(t?u<e.data.length:u>0)){return e}for(i=L.schema.getNonEmptyElements(),1===e.nodeType&&(e=J.getNode(e,u)),m=new E(e,L.getBody()),t&&A.isBogusBr(L.dom,e)&&m.next();e=m[t?"next":"prev2"]();){if("LI"===e.nodeName&&!e.hasChildNodes()){return e}if(i[e.nodeName]){return e}if(3===e.nodeType&&e.data.length>0){return e}}},I=function(p,l,u){var m,s,i=l.parentNode;if(A.isChildOfBody(p,l)&&A.isChildOfBody(p,u)){if(A.isListNode(u.lastChild)&&(s=u.lastChild),i===u.lastChild&&A.isBr(i.previousSibling)&&p.remove(i.previousSibling),m=u.lastChild,m&&A.isBr(m)&&l.hasChildNodes()&&p.remove(m),A.isEmpty(p,u,!0)&&p.$(u).empty(),!A.isEmpty(p,l,!0)){for(;m=l.firstChild;){u.appendChild(m)}}s&&u.appendChild(s),p.remove(l),A.isEmpty(p,i)&&i!==p.getRoot()&&p.remove(i)}},F=function(L,N){var l,a,O,M=L.dom,u=L.selection,i=M.getParent(u.getStart(),"LI");if(i){if(l=i.parentNode,l===L.getBody()&&A.isEmpty(M,l)){return !0}if(a=H.normalizeRange(u.getRng(!0)),O=M.getParent(G(L,a,N),"LI"),O&&O!==i){var o=w.createBookmark(a);return N?I(M,O,i):I(M,i,O),L.selection.setRng(w.resolveBookmark(o)),!0}if(!O&&!N&&z.removeList(L,l.nodeName)){return !0}}return !1},D=function(p,l){var u=p.dom,m=u.getParent(p.selection.getStart(),u.isBlock);if(m&&u.isEmpty(m)){var a=H.normalizeRange(p.selection.getRng(!0)),s=u.getParent(G(p,a,l),"LI");if(s){return p.undoManager.transact(function(){u.remove(m),z.mergeWithAdjacentLists(u,s.parentNode),p.selection.select(s,!0),p.selection.collapse(l)}),!0}}return !1},v=function(i,a){return F(i,a)||D(i,a)},y=function(i){var a=i.dom.getParent(i.selection.getStart(),"LI,DT,DD");return !!(a||q.getSelectedListItems(i).length>0)&&(i.undoManager.transact(function(){i.execCommand("Delete"),K.normalizeLists(i.dom,i.getBody())}),!0)},C=function(i,a){return i.selection.isCollapsed()?v(i,a):y(i)},B=function(a){a.on("keydown",function(e){e.keyCode===x.BACKSPACE?C(a,!1)&&e.preventDefault():e.keyCode===x.DELETE&&C(a,!0)&&e.preventDefault()})};return{setup:B,backspaceDelete:C}}),b("6",["h","4","c","b"],function(s,p,v,q){var m=function(o,e){var a;if(p.isListNode(o)){for(;a=o.firstChild;){e.appendChild(a)}s.remove(o)}},u=function(w){var i,t,e;return"DT"===w.nodeName?(s.rename(w,"DD"),!0):(i=w.previousSibling,i&&p.isListNode(i)?(i.appendChild(w),!0):i&&"LI"===i.nodeName&&p.isListNode(i.lastChild)?(i.lastChild.appendChild(w),m(w.lastChild,i.lastChild),!0):(i=w.nextSibling,i&&p.isListNode(i)?(i.insertBefore(w,i.firstChild),!0):(i=w.previousSibling,!(!i||"LI"!==i.nodeName)&&(t=s.create(w.parentNode.nodeName),e=s.getStyle(w.parentNode,"listStyleType"),e&&s.setStyle(t,"listStyleType",e),i.appendChild(t),t.appendChild(w),m(w.lastChild,t),!0))))},l=function(w){var r=q.getSelectedListItems(w);if(r.length){for(var o=v.createBookmark(w.selection.getRng(!0)),n=0;n<r.length&&(u(r[n])||0!==n);n++){}return w.selection.setRng(v.resolveBookmark(o)),w.nodeChanged(),!0}};return{indentSelection:l}}),b("0",["1","2","3","4","5","6","7","8"],function(y,D,q,m,w,p,B,E){var v=function(i,a){return function(){var e=i.dom.getParent(i.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===a}},A=function(a){a.on("BeforeExecCommand",function(e){var l,i=e.command.toLowerCase();if("indent"===i?p.indentSelection(a)&&(l=!0):"outdent"===i&&B.outdentSelection(a)&&(l=!0),l){return a.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}}),a.addCommand("InsertUnorderedList",function(e,i){E.toggleList(a,"UL",i)}),a.addCommand("InsertOrderedList",function(e,i){E.toggleList(a,"OL",i)}),a.addCommand("InsertDefinitionList",function(e,i){E.toggleList(a,"DL",i)})},C=function(a){a.addQueryStateHandler("InsertUnorderedList",v(a,"UL")),a.addQueryStateHandler("InsertOrderedList",v(a,"OL")),a.addQueryStateHandler("InsertDefinitionList",v(a,"DL"))},z=function(a){a.on("keydown",function(e){9!==e.keyCode||q.metaKeyPressed(e)||a.dom.getParent(a.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?B.outdentSelection(a):p.indentSelection(a))})},x=function(l){var o=function(e){return function(){var n=this;l.on("NodeChange",function(i){var r=D.grep(i.parents,m.isListNode);n.active(r.length>0&&r[0].nodeName===e)})}},a=function(s,t){var i=s.settings.plugins?s.settings.plugins:"";return D.inArray(i.split(/[ ,]/),t)!==-1};a(l,"advlist")||(l.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:o("OL")}),l.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:o("UL")})),l.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(e){var i=e.control;l.on("nodechange",function(){for(var u=l.selection.getSelectedBlocks(),r=!1,G=0,n=u.length;!r&&G<n;G++){var F=u[G].nodeName;r="LI"===F&&m.isFirstChild(u[G])||"UL"===F||"OL"===F||"DD"===F}i.disabled(r)})}})};return y.add("lists",function(a){return x(a),w.setup(a),a.on("init",function(){A(a),C(a),z(a)}),{backspaceDelete:function(e){w.backspaceDelete(a,e)}}}),function(){}}),g("0")()}();