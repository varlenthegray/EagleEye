!function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(d){var e=this,f=d.getParam("bbcode_dialect","punbb").toLowerCase();d.on("beforeSetContent",function(a){a.content=e["_"+f+"_bbcode2html"](a.content)}),d.on("postProcess",function(a){a.set&&(a.content=e["_"+f+"_bbcode2html"](a.content)),a.get&&(a.content=e["_"+f+"_html2bbcode"](a.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Ephox Corp",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(c){function d(b,a){c=c.replace(b,a)}return c=tinymce.trim(c),d(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),d(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),d(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),d(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),d(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),d(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),d(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),d(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),d(/<font>(.*?)<\/font>/gi,"$1"),d(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),d(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),d(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),d(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),d(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),d(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),d(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),d(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),d(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),d(/<\/(strong|b)>/gi,"[/b]"),d(/<(strong|b)>/gi,"[b]"),d(/<\/(em|i)>/gi,"[/i]"),d(/<(em|i)>/gi,"[i]"),d(/<\/u>/gi,"[/u]"),d(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),d(/<u>/gi,"[u]"),d(/<blockquote[^>]*>/gi,"[quote]"),d(/<\/blockquote>/gi,"[/quote]"),d(/<br \/>/gi,"\n"),d(/<br\/>/gi,"\n"),d(/<br>/gi,"\n"),d(/<p>/gi,""),d(/<\/p>/gi,"\n"),d(/&nbsp;|\u00a0/gi," "),d(/&quot;/gi,'"'),d(/&lt;/gi,"<"),d(/&gt;/gi,">"),d(/&amp;/gi,"&"),c},_punbb_bbcode2html:function(c){function d(b,a){c=c.replace(b,a)}return c=tinymce.trim(c),d(/\n/gi,"<br />"),d(/\[b\]/gi,"<strong>"),d(/\[\/b\]/gi,"</strong>"),d(/\[i\]/gi,"<em>"),d(/\[\/i\]/gi,"</em>"),d(/\[u\]/gi,"<u>"),d(/\[\/u\]/gi,"</u>"),d(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),d(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),d(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),d(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),d(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),d(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),c}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}();