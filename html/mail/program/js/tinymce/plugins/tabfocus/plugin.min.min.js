tinymce.PluginManager.add("tabfocus",function(d){function b(h){9!==h.keyCode||h.ctrlKey||h.altKey||h.metaKey||h.preventDefault()}function g(j){function o(r){function q(l){return"BODY"===l.nodeName||"hidden"!=l.type&&"none"!=l.style.display&&"hidden"!=l.style.visibility&&q(l.parentNode)}function p(l){return/INPUT|TEXTAREA|BUTTON/.test(l.tagName)&&tinymce.get(j.id)&&l.tabIndex!=-1&&q(l)}if(k=c.select(":input:enabled,*[tabindex]:not(iframe)"),a(k,function(l,s){if(l.id==d.id){return h=s,!1}}),r>0){for(m=h+1;m<k.length;m++){if(p(k[m])){return k[m]}}}else{for(m=h-1;m>=0;m--){if(p(k[m])){return k[m]}}}return null}var h,k,e,m;if(!(9!==j.keyCode||j.ctrlKey||j.altKey||j.metaKey||j.isDefaultPrevented())&&(e=f(d.getParam("tab_focus",d.getParam("tabfocus_elements",":prev,:next"))),1==e.length&&(e[1]=e[0],e[0]=":prev"),k=j.shiftKey?":prev"==e[0]?o(-1):c.get(e[0]):":next"==e[1]?o(1):c.get(e[1]))){var i=tinymce.get(k.id||k.name);k.id&&i?i.focus():tinymce.util.Delay.setTimeout(function(){tinymce.Env.webkit||window.focus(),k.focus()},10),j.preventDefault()}}var c=tinymce.DOM,a=tinymce.each,f=tinymce.explode;d.on("init",function(){d.inline&&tinymce.DOM.setAttrib(d.getBody(),"tabIndex",null),d.on("keyup",b),tinymce.Env.gecko?d.on("keypress keydown",g):d.on("keydown",g)})});