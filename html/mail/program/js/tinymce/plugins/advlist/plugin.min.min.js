tinymce.PluginManager.add("advlist",function(j){function p(a){return j.$.contains(j.getBody(),a)}function f(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)&&p(a)}function b(c,a){var i=[];return a&&tinymce.each(a.split(/[ ,]/),function(l){i.push({text:l.replace(/\-/g," ").replace(/\b\w/g,function(n){return n.toUpperCase()}),data:"default"==l?"":l})}),i}function h(a,c){j.undoManager.transact(function(){var n,l=j.dom,s=j.selection;if(n=l.getParent(s.getNode(),"ol,ul"),!n||n.nodeName!=a||c===!1){var e={"list-style-type":c?c:""};j.execCommand("UL"==a?"InsertUnorderedList":"InsertOrderedList",!1,e)}n=l.getParent(s.getNode(),"ol,ul"),n&&tinymce.util.Tools.each(l.select("ol,ul",n).concat([n]),function(i){i.nodeName!==a&&c!==!1&&(i=l.rename(i,a)),l.setStyle(i,"listStyleType",c?c:null),i.removeAttribute("data-mce-style")}),j.focus()})}function d(a){var c=j.dom.getStyle(j.dom.getParent(j.selection.getNode(),"ol,ul"),"listStyleType")||"";a.control.items().each(function(i){i.active(i.settings.data===c)})}var m,q,g=function(c,a){var i=c.settings.plugins?c.settings.plugins:"";return tinymce.util.Tools.inArray(i.split(/[ ,]/),a)!==-1};m=b("OL",j.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),q=b("UL",j.getParam("advlist_bullet_styles","default,circle,disc,square"));var k=function(a){return function(){var c=this;j.on("NodeChange",function(n){var l=tinymce.util.Tools.grep(n.parents,f);c.active(l.length>0&&l[0].nodeName===a)})}};g(j,"lists")&&(j.addCommand("ApplyUnorderedListStyle",function(c,a){h("UL",a["list-style-type"])}),j.addCommand("ApplyOrderedListStyle",function(c,a){h("OL",a["list-style-type"])}),j.addButton("numlist",{type:m.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:m,onPostRender:k("OL"),onshow:d,onselect:function(a){h("OL",a.control.settings.data)},onclick:function(){h("OL",!1)}}),j.addButton("bullist",{type:q.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:k("UL"),menu:q,onshow:d,onselect:function(a){h("UL",a.control.settings.data)},onclick:function(){h("UL",!1)}}))});