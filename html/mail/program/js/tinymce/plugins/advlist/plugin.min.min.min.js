tinymce.PluginManager.add("advlist",function(l){function c(b){return l.$.contains(l.getBody(),b)}function r(b){return b&&/^(OL|UL|DL)$/.test(b.nodeName)&&c(b)}function t(f,b){var d=[];return b&&tinymce.each(b.split(/[ ,]/),function(g){d.push({text:g.replace(/\-/g," ").replace(/\b\w/g,function(h){return h.toUpperCase()}),data:"default"==g?"":g})}),d}function n(b,d){l.undoManager.transact(function(){var j,f=l.dom,g=l.selection;if(j=f.getParent(g.getNode(),"ol,ul"),!j||j.nodeName!=b||d===!1){var h={"list-style-type":d?d:""};l.execCommand("UL"==b?"InsertUnorderedList":"InsertOrderedList",!1,h)}j=f.getParent(g.getNode(),"ol,ul"),j&&tinymce.util.Tools.each(f.select("ol,ul",j).concat([j]),function(k){k.nodeName!==b&&d!==!1&&(k=f.rename(k,b)),f.setStyle(k,"listStyleType",d?d:null),k.removeAttribute("data-mce-style")}),l.focus()})}function s(b){var d=l.dom.getStyle(l.dom.getParent(l.selection.getNode(),"ol,ul"),"listStyleType")||"";b.control.items().each(function(f){f.active(f.settings.data===d)})}var e,a,o=function(f,b){var d=f.settings.plugins?f.settings.plugins:"";return tinymce.util.Tools.inArray(d.split(/[ ,]/),b)!==-1};e=t("OL",l.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),a=t("UL",l.getParam("advlist_bullet_styles","default,circle,disc,square"));var i=function(b){return function(){var d=this;l.on("NodeChange",function(g){var f=tinymce.util.Tools.grep(g.parents,r);d.active(f.length>0&&f[0].nodeName===b)})}};o(l,"lists")&&(l.addCommand("ApplyUnorderedListStyle",function(d,b){n("UL",b["list-style-type"])}),l.addCommand("ApplyOrderedListStyle",function(d,b){n("OL",b["list-style-type"])}),l.addButton("numlist",{type:e.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:e,onPostRender:i("OL"),onshow:s,onselect:function(b){n("OL",b.control.settings.data)},onclick:function(){n("OL",!1)}}),l.addButton("bullist",{type:a.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:i("UL"),menu:a,onshow:s,onselect:function(b){n("UL",b.control.settings.data)},onclick:function(){n("UL",!1)}}))});