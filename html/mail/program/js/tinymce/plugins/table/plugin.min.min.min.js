!function(k,e){function i(b,d){for(var a,c=[],f=0;f<b.length;++f){if(a=j[b[f]]||h(b[f]),!a){throw"module definition dependecy not found: "+b[f]}c.push(a)}d.apply(null,c)}function l(a,b,c){if("string"!=typeof a){throw"invalid module definition, module id must be defined and be a string"}if(b===e){throw"invalid module definition, dependencies must be specified"}if(c===e){throw"invalid module definition, definition function must be specified"}i(b,function(){j[a]=c.apply(null,arguments)})}function h(c){for(var a=k,b=c.split(/[.\/]/),d=0;d<b.length;++d){if(!a[b[d]]){return}a=a[b[d]]}return a}var j={};l("tinymce/tableplugin/Utils",["tinymce/Env"],function(b){function d(f){(!b.ie||b.ie>9)&&(f.hasChildNodes()||(f.innerHTML='<br data-mce-bogus="1" />'))}var a=function(f){return function(n,g){n&&(g=parseInt(g,10),1===g||0===g?n.removeAttribute(f,1):n.setAttribute(f,g,1))}},c=function(f){return function(g){return parseInt(g.getAttribute(f)||1,10)}};return{setColSpan:a("colSpan"),setRowSpan:a("rowspan"),getColSpan:c("colSpan"),getRowSpan:c("rowSpan"),setSpanVal:function(o,g,f){a(g)(o,f)},getSpanVal:function(f,g){return c(g)(f)},paddCell:d}}),l("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(a,o){var f=function(m,p,q){return m[q]?m[q][p]:null},n=function(p,v,q){var m=f(p,v,q);return m?m.elm:null},b=function(w,z,m,v){var q,x,y=0,p=n(w,z,m);for(q=m;(v>0?q<w.length:q>=0)&&(x=f(w,z,q),p===x.elm);q+=v){y++}return y},g=function(x,q,v){for(var p,m=x[v],w=q;w<m.length;w++){if(p=m[w],p.real){return p.elm}}return null},s=function(p,w){for(var v,x=[],q=p[w],m=0;m<q.length;m++){v=q[m],x.push({elm:v.elm,above:b(p,m,w,-1)-1,below:b(p,m,w,1)-1}),m+=o.getColSpan(v.elm)-1}return x},c=function(q,p){var v=q.elm.ownerDocument,m=v.createElement("td");return o.setColSpan(m,o.getColSpan(q.elm)),o.setRowSpan(m,p),o.paddCell(m),m},d=function(p,v,w,q){var m=g(p,w+1,q);m?m.parentNode.insertBefore(v,m):(m=g(p,0,q),m.parentNode.appendChild(v))},t=function(q,w,v,m){if(0!==w.above){o.setRowSpan(w.elm,w.above);var p=c(w,w.below+1);return d(q,p,v,m),p}return null},r=function(q,w,v,m){if(0!==w.below){o.setRowSpan(w.elm,w.above+1);var p=c(w,w.below);return d(q,p,v,m+1),p}return null},u=function(m,q,p,w){var y=s(m,p),v=n(m,q,p).parentNode,x=[];return a.each(y,function(z,B){var A=w?t(m,z,B,p):r(m,z,B,p);null!==A&&x.push(x)}),{cells:x,row:v}};return{splitAt:u}}),l("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(a,g,b,d){var n=a.each,f=b.getSpanVal,c=b.setSpanVal;return function(aa,T,ae){function U(){aa.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function V(o){return o===aa.getBody()}function ac(r,o){return r?(o=a.map(o.split(","),function(s){return s.toLowerCase()}),a.grep(r.childNodes,function(s){return a.inArray(o,s.nodeName.toLowerCase())!==-1})):[]}function ab(){var o=0;an=[],L=0,n(["thead","tbody","tfoot"],function(t){var r=ac(T,t)[0],s=ac(r,"tr");n(s,function(ap,aq){aq+=o,n(ac(ap,"td,th"),function(av,at){var ax,au,aw,ar;if(an[aq]){for(;an[aq][at];){at++}}for(aw=f(av,"rowspan"),ar=f(av,"colspan"),au=aq;au<aq+aw;au++){for(an[au]||(an[au]=[]),ax=at;ax<at+ar;ax++){an[au][ax]={part:t,real:au==aq&&ax==at,elm:av,rowspan:aw,colspan:ar}}}L=Math.max(L,at+1)})}),o+=s.length})}function W(o){return aa.fire("newrow",{node:o}),o}function X(o){return aa.fire("newcell",{node:o}),o}function af(o,r){return o=o.cloneNode(r),o.removeAttribute("id"),o}function S(r,s){var o;if(o=an[s]){return o[r]}}function p(o,r){return o[r]?o[r]:null}function ah(r,t){for(var o=[],s=0;s<r.length;s++){o.push(S(t,s))}return o}function x(o){return o&&(!!m.getAttrib(o.elm,"data-mce-selected")||o==ae)}function ag(){var o=[];return n(T.rows,function(r){n(r.cells,function(s){if(m.getAttrib(s,"data-mce-selected")||ae&&s==ae.elm){return o.push(r),!1}})}),o}function I(){var o=0;return n(an,function(r){if(n(r,function(s){x(s)&&o++}),o){return !1}}),o}function Z(){var o=m.createRng();V(T)||(o.setStartAfter(T),o.setEndAfter(T),ao.setRng(o),m.remove(T))}function N(o){var r,s={};return aa.settings.table_clone_elements!==!1&&(s=a.makeMap((aa.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),a.walk(o,function(ap){var t;if(3==ap.nodeType){return n(m.getParents(ap.parentNode,null,o).reverse(),function(aq){s[aq.nodeName]&&(aq=af(aq,!1),r?t&&t.appendChild(aq):r=t=aq,t=aq)}),t&&(t.innerHTML=g.ie&&g.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1}},"childNodes"),o=af(o,!1),X(o),c(o,"rowSpan",1),c(o,"colSpan",1),r?o.appendChild(r):b.paddCell(o),o}function Q(){var o,r=m.createRng();return n(m.select("tr",T),function(s){0===s.cells.length&&m.remove(s)}),0===m.select("tr",T).length?(r.setStartBefore(T),r.setEndBefore(T),ao.setRng(r),void m.remove(T)):(n(m.select("thead,tbody,tfoot",T),function(s){0===s.rows.length&&m.remove(s)}),ab(),void (R&&(o=an[Math.min(an.length-1,R.y)],o&&(ao.select(o[Math.min(o.length-1,R.x)].elm,!0),ao.collapse(!0)))))}function z(t,r,ar,au){var ap,at,s,o,aq;for(ap=an[r][t].elm.parentNode,s=1;s<=ar;s++){if(ap=m.getNext(ap,"tr")){for(at=t;at>=0;at--){if(aq=an[r+s][at].elm,aq.parentNode==ap){for(o=1;o<=au;o++){m.insertAfter(N(aq),aq)}break}}if(at==-1){for(o=1;o<=au;o++){ap.insertBefore(N(ap.cells[0]),ap.cells[0])}}}}}function O(){n(an,function(o,r){n(o,function(ar,t){var s,ap,aq;if(x(ar)&&(ar=ar.elm,s=f(ar,"colspan"),ap=f(ar,"rowspan"),s>1||ap>1)){for(c(ar,"rowSpan",1),c(ar,"colSpan",1),aq=0;aq<s-1;aq++){m.insertAfter(N(ar),ar)}z(t,r,ap-1,s)}})})}function M(o,s,ap){for(var r=[],t=0;t<o.length;t++){(t<s||t>ap)&&r.push(o[t])}return r}function v(o){return a.grep(o,function(r){return r.real===!1})}function w(r){for(var t=[],o=0;o<r.length;o++){var s=r[o].elm;t[t.length-1]!==s&&t.push(s)}return t}function K(r,at,aq,au,t){var o=0;if(t-aq<1){return 0}for(var ar=aq+1;ar<=t;ar++){var ap=M(p(r,ar),at,au),s=v(ap);ap.length===s.length&&(a.each(w(s),function(av){b.setRowSpan(av,b.getRowSpan(av)-1)}),o++)}return o}function y(r,at,aq,au,t){var o=0;if(au-at<1){return 0}for(var ar=at+1;ar<=au;ar++){var ap=M(ah(r,ar),aq,t),s=v(ap);ap.length===s.length&&(a.each(w(s),function(av){b.setColSpan(av,b.getColSpan(av)-1)}),o++)}return o}function H(ay,av,ax){var at,o,au,r,az,s,t,aw,ap,aq,aA,aD,aC;if(ay?(at=ad(ay),o=at.x,au=at.y,r=o+(av-1),az=au+(ax-1)):(R=ak=null,n(an,function(aE,aF){n(aE,function(aH,aG){x(aH)&&(R||(R={x:aG,y:aF}),ak={x:aG,y:aF})})}),R&&(o=R.x,au=R.y,r=ak.x,az=ak.y)),aw=S(o,au),ap=S(r,az),aw&&ap&&aw.part==ap.part){O(),ab(),aD=K(an,o,au,r,az),aC=y(an,o,au,r,az),aw=S(o,au).elm;var aB=r-o-aC+1,ar=az-au-aD+1;for(aB===L&&ar===an.length&&(aB=1,ar=1),aB===L&&ar>1&&(ar=1),c(aw,"colSpan",aB),c(aw,"rowSpan",ar),t=au;t<=az;t++){for(s=o;s<=r;s++){an[t]&&an[t][s]&&(ay=an[t][s].elm,ay!=aw&&(aq=a.grep(ay.childNodes),n(aq,function(aE){aw.appendChild(aE)}),aq.length&&(aq=a.grep(aw.childNodes),aA=0,n(aq,function(aE){"BR"==aE.nodeName&&aA++<aq.length-1&&aw.removeChild(aE)})),m.remove(ay)))}}Q()}}function G(r){var ar,au,t,ap,aw,av,o,s,at,aq;if(n(an,function(ay,ax){if(n(ay,function(az){if(x(az)&&(az=az.elm,aw=az.parentNode,av=W(af(aw,!1)),ar=ax,r)){return !1}}),r){return ar===e}}),ar!==e){for(ap=0,aq=0;ap<an[0].length;ap+=aq){if(an[ar][ap]&&(au=an[ar][ap].elm,aq=f(au,"colspan"),au!=t)){if(r){if(ar>0&&an[ar-1][ap]&&(s=an[ar-1][ap].elm,at=f(s,"rowSpan"),at>1)){c(s,"rowSpan",at+1);continue}}else{if(at=f(au,"rowspan"),at>1){c(au,"rowSpan",at+1);continue}}o=N(au),c(o,"colSpan",au.colSpan),av.appendChild(o),t=au}}av.hasChildNodes()&&(r?aw.parentNode.insertBefore(av,aw):m.insertAfter(av,aw))}}function D(r,s){s=s||ag().length||1;for(var o=0;o<s;o++){G(r)}}function J(r){var o,s;n(an,function(t){if(n(t,function(aq,ap){if(x(aq)&&(o=ap,r)){return !1}}),r){return o===e}}),n(an,function(aq,at){var ap,t,ar;aq[o]&&(ap=aq[o].elm,ap!=s&&(ar=f(ap,"colspan"),t=f(ap,"rowspan"),1==ar?r?(ap.parentNode.insertBefore(N(ap),ap),z(o,at,t-1,ar)):(m.insertAfter(N(ap),ap),z(o,at,t-1,ar)):c(ap,"colSpan",ap.colSpan+1),s=ap))})}function C(r,s){s=s||I()||1;for(var o=0;o<s;o++){J(r)}}function A(o){return a.grep(q(o),x)}function q(o){var r=[];return n(o,function(s){n(s,function(t){r.push(t)})}),r}function aj(){var o=[];if(V(T)){if(1==an[0].length){return}if(A(an).length==q(an).length){return}}n(an,function(r){n(r,function(s,t){x(s)&&a.inArray(o,t)===-1&&(n(an,function(aq){var ar,ap=aq[t].elm;ar=f(ap,"colSpan"),ar>1?c(ap,"colSpan",ar-1):m.remove(ap)}),o.push(t))})}),Q()}function P(){function o(s){var t,ap;n(s.cells,function(ar){var aq=f(ar,"rowSpan");aq>1&&(c(ar,"rowSpan",aq-1),t=ad(ar),z(t.x,t.y,1,1))}),t=ad(s.cells[0]),n(an[t.y],function(aq){var ar;aq=aq.elm,aq!=ap&&(ar=f(aq,"rowSpan"),ar<=1?m.remove(aq):c(aq,"rowSpan",ar-1),ap=aq)})}var r;r=ag(),V(T)&&r.length==T.rows.length||(n(r.reverse(),function(s){o(s)}),Q())}function ai(){var o=ag();if(!V(T)||o.length!=T.rows.length){return m.remove(o),Q(),o}}function u(){var o=ag();return n(o,function(s,r){o[r]=af(s,!0)}),o}function Y(r,ap){var o,s,t;r&&(o=d.splitAt(an,R.x,R.y,ap),s=o.row,a.each(o.cells,X),t=a.map(r,function(aq){return aq.cloneNode(!0)}),ap||t.reverse(),n(t,function(at){var aq,au,ar=at.cells.length;for(W(at),aq=0;aq<ar;aq++){au=at.cells[aq],X(au),c(au,"colSpan",1),c(au,"rowSpan",1)}for(aq=ar;aq<L;aq++){at.appendChild(X(N(at.cells[ar-1])))}for(aq=L;aq<ar;aq++){m.remove(at.cells[aq])}ap?s.parentNode.insertBefore(at,s):m.insertAfter(at,s)}),U())}function ad(o){var r;return n(an,function(s,t){return n(s,function(ap,aq){if(ap.elm==o){return r={x:aq,y:t},!1}}),!r}),r}function am(o){R=ad(o)}function al(){var o,r;return o=r=0,n(an,function(s,t){n(s,function(at,aq){var ap,ar;x(at)&&(at=an[t][aq],aq>o&&(o=aq),t>r&&(r=t),at.real&&(ap=at.colspan-1,ar=at.rowspan-1,ap&&aq+ap>o&&(o=aq+ap),ar&&t+ar>r&&(r=t+ar)))})}),{x:o,y:r}}function F(t){var aw,ar,au,ap,at,r,av,aq,s,o;if(ak=ad(t),R&&ak){for(aw=Math.min(R.x,ak.x),ar=Math.min(R.y,ak.y),au=Math.max(R.x,ak.x),ap=Math.max(R.y,ak.y),at=au,r=ap,o=ar;o<=ap;o++){for(s=aw;s<=au;s++){t=an[o][s],t.real&&(av=t.colspan-1,aq=t.rowspan-1,av&&s+av>at&&(at=s+av),aq&&o+aq>r&&(r=o+aq))}}for(U(),o=ar;o<=r;o++){for(s=aw;s<=at;s++){an[o][s]&&m.setAttrib(an[o][s].elm,"data-mce-selected","1")}}}}function B(o,s){var ap,r,t;ap=ad(o),r=ap.y*L+ap.x;do{if(r+=s,t=S(r%L,Math.floor(r/L)),!t){break}if(t.elm!=o){return ao.select(t.elm,!0),m.isEmpty(t.elm)&&ao.collapse(!0),!0}}while(t.elm==o);return !1}function E(r){if(R){var o=d.splitAt(an,R.x,R.y,r);a.each(o.cells,X)}}var an,L,R,ak,ao=aa.selection,m=ao.dom;T=T||m.getParent(ao.getStart(!0),"table"),ab(),ae=ae||m.getParent(ao.getStart(!0),"th,td"),ae&&(R=ad(ae),ak=al(),ae=S(R.x,R.y)),a.extend(this,{deleteTable:Z,split:O,merge:H,insertRow:G,insertRows:D,insertCol:J,insertCols:C,splitCols:E,deleteCols:aj,deleteRows:P,cutRows:ai,copyRows:u,pasteRows:Y,getPos:ad,setStartCell:am,setEndCell:F,moveRelIdx:B,refresh:ab})}}),l("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(a,c,g,b,d){var n=b.each,f=d.getSpanVal;return function(x){function u(){function o(t){function X(E,A){var I=E?"previousSibling":"nextSibling",G=x.dom.getParent(A,"tr"),B=G[I];if(B){return C(x,A,B,E),t.preventDefault(),!0}var z=x.dom.getParent(G,"table"),D=G.parentNode,F=D.nodeName.toLowerCase();if("tbody"===F||F===(E?"tfoot":"thead")){var H=aa(E,z,D,"tbody");if(null!==H){return U(E,H,A)}}return y(E,G,I,z)}function aa(E,G,B,F){var z=x.dom.select(">"+F,G),D=z.indexOf(B);if(E&&0===D||!E&&D===z.length-1){return ab(E,G)}if(D===-1){var A="thead"===B.tagName.toLowerCase()?0:z.length-1;return z[A]}return z[D+(E?-1:1)]}function ab(D,A){var B=D?"thead":"tfoot",z=x.dom.select(">"+B,A);return 0!==z.length?z[0]:null}function U(B,z,D){var A=V(z,B);return A&&C(x,D,A,B),t.preventDefault(),!0}function y(E,F,G,D){var z=D[G];if(z){return W(z),!0}var A=x.dom.getParent(D,"td,th");if(A){return X(E,A,t)}var B=V(F,!E);return W(B),t.preventDefault(),!1}function V(z,A){var B=z&&z[A?"lastChild":"firstChild"];return B&&"BR"===B.nodeName?x.dom.getParent(B,"td,th"):B}function W(z){x.selection.setCursorLocation(z,0)}function v(){return Q==a.UP||Q==a.DOWN}function r(z){var A=z.selection.getNode(),B=z.dom.getParent(A,"tr");return null!==B}function Y(z){for(var A=0,B=z;B.previousSibling;){B=B.previousSibling,A+=f(B,"colspan")}return A}function Z(D,A){var B=0,z=0;return n(D.children,function(E,F){if(B+=f(E,"colspan"),z=F,B>A){return !1}}),z}function C(E,G,B,F){var H=Y(x.dom.getParent(G,"td,th")),D=Z(B,H),z=B.childNodes[D],A=V(z,F);W(A||z)}function R(D){var A=x.selection.getNode(),B=x.dom.getParent(A,"td,th"),z=x.dom.getParent(D,"td,th");return B&&B!==z&&T(B,z)}function T(z,A){return x.dom.getParent(z,"TABLE")===x.dom.getParent(A,"TABLE")}var Q=t.keyCode;if(v()&&r(x)){var S=x.selection.getNode();c.setEditorTimeout(x,function(){R(S)&&X(!t.shiftKey&&Q===a.UP,S,t)},0)}}x.on("KeyDown",function(r){o(r)})}function m(){function o(B,t){var A,r=t.ownerDocument,v=r.createRange();return v.setStartBefore(t),v.setEnd(B.endContainer,B.endOffset),A=r.createElement("body"),A.appendChild(v.cloneContents()),0===A.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}x.on("KeyDown",function(t){var z,r,v=x.dom;37!=t.keyCode&&38!=t.keyCode||(z=x.selection.getRng(),r=v.getParent(z.startContainer,"table"),r&&x.getBody().firstChild==r&&o(z,r)&&(z=v.createRng(),z.setStartBefore(r),z.setEndBefore(r),x.selection.setRng(z),t.preventDefault()))})}function q(){x.on("KeyDown SetContent VisualAid",function(){var o;for(o=x.getBody().lastChild;o;o=o.previousSibling){if(3==o.nodeType){if(o.nodeValue.length>0){break}}else{if(1==o.nodeType&&("BR"==o.tagName||!o.getAttribute("data-mce-bogus"))){break}}}o&&"TABLE"==o.nodeName&&(x.settings.forced_root_block?x.dom.add(x.getBody(),x.settings.forced_root_block,x.settings.forced_root_block_attrs,g.ie&&g.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):x.dom.add(x.getBody(),"br",{"data-mce-bogus":"1"}))}),x.on("PreProcess",function(o){var r=o.node.lastChild;r&&("BR"==r.nodeName||1==r.childNodes.length&&("BR"==r.firstChild.nodeName||"\xa0"==r.firstChild.nodeValue))&&r.previousSibling&&"TABLE"==r.previousSibling.nodeName&&x.dom.remove(r)})}function p(){function o(F,t,I,K){var G,J,v,L=3,H=F.dom.getParent(t.startContainer,"TABLE");return H&&(G=H.parentNode),J=t.startContainer.nodeType==L&&0===t.startOffset&&0===t.endOffset&&K&&("TR"==I.nodeName||I==G),v=("TD"==I.nodeName||"TH"==I.nodeName)&&!K,J||v}function r(){var t=x.selection.getRng(),A=x.selection.getNode(),B=x.dom.getParent(t.startContainer,"TD,TH");if(o(x,t,A,B)){B||(B=A);for(var v=B.lastChild;v.lastChild;){v=v.lastChild}3==v.nodeType&&(t.setEnd(v,v.data.length),x.selection.setRng(t))}}x.on("KeyDown",function(){r()}),x.on("MouseDown",function(t){2!=t.button&&r()})}function w(){function r(t){x.selection.select(t,!0),x.selection.collapse(!0)}function o(t){x.$(t).empty(),d.paddCell(t)}x.on("keydown",function(D){if((D.keyCode==a.DELETE||D.keyCode==a.BACKSPACE)&&!D.isDefaultPrevented()){var C,v,B,t;if(C=x.dom.getParent(x.selection.getStart(),"table")){if(v=x.dom.select("td,th",C),B=b.grep(v,function(y){return !!x.dom.getAttrib(y,"data-mce-selected")}),0===B.length){return t=x.dom.getParent(x.selection.getStart(),"td,th"),void (x.selection.isCollapsed()&&t&&x.dom.isEmpty(t)&&(D.preventDefault(),o(t),r(t)))}D.preventDefault(),x.undoManager.transact(function(){v.length==B.length?x.execCommand("mceTableDelete"):(b.each(B,o),r(B[0]))})}}})}function s(){var o=function(y){return y&&"CAPTION"==y.nodeName&&"TABLE"==y.parentNode.nodeName},I=function(A,y){var z=x.selection.getRng(),B=A.ownerDocument.createTextNode("\xa0");z.startOffset?A.insertBefore(B,A.firstChild):A.appendChild(B),y&&(x.selection.select(B,!0),x.selection.collapse(!0))},F=function(y){return(y.keyCode==a.DELETE||y.keyCode==a.BACKSPACE)&&!y.isDefaultPrevented()},H=function(y){return y.firstChild===y.lastChild&&y.firstChild},t=function(y){return y&&3===y.nodeType},G=function(z){var y=H(z);return t(y)&&1===y.data.length?y.data:null},v=function(A){var y=H(A),z=G(A);return y&&!t(y)||z&&!E(z)},r=function(y){return x.dom.isEmpty(y)||E(G(y))},E=function(y){return"\xa0"===y};x.on("keydown",function(y){if(F(y)){var z=x.dom.getParent(x.selection.getStart(),"caption");o(z)&&(g.ie&&(x.selection.isCollapsed()?v(z)&&I(z):(x.undoManager.transact(function(){x.execCommand("Delete"),r(z)&&I(z,!0)}),y.preventDefault())),r(z)&&y.preventDefault())}})}w(),s(),g.webkit&&(u(),p()),g.gecko&&(m(),q()),g.ie>9&&(m(),q())}}),l("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(b,c,a){return function(s,H){function p(n){s.getBody().style.webkitUserSelect="",(n||F)&&(s.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),F=!1)}function m(n,q){return !(!n||!q)&&n===f.getParent(q,"table")}function d(q){var t,v,n=q.target;if(!E&&!r&&n!==u&&(u=n,g&&o)){if(v=f.getParent(n,"td,th"),m(g,v)||(v=f.getParent(g,"td,th")),o===v&&!F){return}if(H(!0),m(g,v)){q.preventDefault(),I||(I=new w(s,g,o),s.getBody().style.webkitUserSelect="none"),I.setEndCell(v),F=!0,t=s.selection.getSel();try{t.removeAllRanges?t.removeAllRanges():t.empty()}catch(w){}}}}var I,o,g,u,E,r,f=s.dom,F=!0,G=function(){o=I=g=u=null,H(!1)};return s.on("SelectionChange",function(n){F&&n.stopImmediatePropagation()},!0),s.on("MouseDown",function(n){2==n.button||E||r||(p(),o=f.getParent(n.target,"td,th"),g=f.getParent(o,"table"))}),s.on("mouseover",d),s.on("remove",function(){f.unbind(s.getDoc(),"mouseover",d),p()}),s.on("MouseUp",function(){function x(z,B){var A=new c(z,z);do{if(3==z.nodeType&&0!==a.trim(z.nodeValue).length){return void (B?y.setStart(z,0):y.setEnd(z,z.nodeValue.length))}if("BR"==z.nodeName){return void (B?y.setStartBefore(z):y.setEndBefore(z))}}while(z=B?A.next():A.prev())}var y,t,q,w,n,v=s.selection;if(o){if(I&&(s.getBody().style.webkitUserSelect=""),t=f.select("td[data-mce-selected],th[data-mce-selected]"),t.length>0){y=f.createRng(),w=t[0],y.setStartBefore(w),y.setEndAfter(w),x(w,1),q=new c(w,f.getParent(t[0],"table"));do{if("TD"==w.nodeName||"TH"==w.nodeName){if(!f.getAttrib(w,"data-mce-selected")){break}n=w}}while(w=q.next());x(n),v.setRng(y)}s.nodeChanged(),G()}}),s.on("KeyUp Drop SetContent",function(n){p("setcontent"==n.type),G(),E=!1}),s.on("ObjectResizeStart ObjectResized",function(n){E="objectresized"!=n.type}),s.on("dragstart",function(){r=!0}),s.on("drop dragend",function(){r=!1}),{clear:p}}}),l("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(b,c){var a=b.each;return function(p){function D(){var n=p.settings.color_picker_callback;if(n){return function(){var q=this;n.call(p,function(t){q.value(t).fire("change")},q.value())}}}function m(n){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(n,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:D()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:D()}]}]}}function r(n){return n?n.replace(/px$/,""):""}function f(n){return/^[0-9]+$/.test(n)&&(n+="px"),n}function E(n){a("left center right".split(" "),function(q){p.formatter.remove("align"+q,{},n)})}function s(n){a("top middle bottom".split(" "),function(q){p.formatter.remove("valign"+q,{},n)})}function g(n,t,v){function q(x,w){return w=w||[],b.each(x,function(z){var y={text:z.text||z.title};z.menu?y.menu=q(z.menu):(y.value=z.value,t&&t(y)),w.push(y)}),w}return q(n,v||[])}function u(v,n,t){var w=n.toJSON(),q=v.parseStyle(w.style);t?(n.find("#borderColor").value(q["border-color"]||"")[0].fire("change"),n.find("#backgroundColor").value(q["background-color"]||"")[0].fire("change")):(q["border-color"]=w.borderColor,q["background-color"]=w.backgroundColor),n.find("#style").value(v.serializeStyle(v.parseStyle(v.serializeStyle(q))))}function C(v,q,t){var n=v.parseStyle(v.getAttrib(t,"style"));n["border-color"]&&(q.borderColor=n["border-color"]),n["background-color"]&&(q.backgroundColor=n["background-color"]),q.style=v.serializeStyle(n)}function o(t,n,v){var q=t.parseStyle(t.getAttrib(n,"style"));a(v,function(w){q[w.name]=w.value}),t.setAttrib(n,"style",t.serializeStyle(t.parseStyle(t.serializeStyle(q))))}var d=this;d.tableProps=function(){d.table(!0)},d.table=function(t){function z(){function G(H,N,M){if("TD"===H.tagName||"TH"===H.tagName){w.setStyle(H,N,M)}else{if(H.children){for(var O=0;O<H.children.length;O++){G(H.children[O],N,M)}}}}var F;u(w,this),y=b.extend(y,this.toJSON()),y["class"]===!1&&delete y["class"],p.undoManager.transact(function(){if(I||(I=p.plugins.table.insertTable(y.cols||1,y.rows||1)),p.dom.setAttribs(I,{style:y.style,"class":y["class"]}),p.settings.table_style_by_css){if(A=[],A.push({name:"border",value:y.border}),A.push({name:"border-spacing",value:f(y.cellspacing)}),o(w,I,A),w.setAttribs(I,{"data-mce-border-color":y.borderColor,"data-mce-cell-padding":y.cellpadding,"data-mce-border":y.border}),I.children){for(var H=0;H<I.children.length;H++){G(I.children[H],"border",y.border),G(I.children[H],"padding",f(y.cellpadding))}}}else{p.dom.setAttribs(I,{border:y.border,cellpadding:y.cellpadding,cellspacing:y.cellspacing})}w.getAttrib(I,"width")&&!p.settings.table_style_by_css?w.setAttrib(I,"width",r(y.width)):w.setStyle(I,"width",f(y.width)),w.setStyle(I,"height",f(y.height)),F=w.select("caption",I)[0],F&&!y.caption&&w.remove(F),!F&&y.caption&&(F=w.create("caption"),F.innerHTML=c.ie?"\xa0":'<br data-mce-bogus="1"/>',I.insertBefore(F,I.firstChild)),E(I),y.align&&p.formatter.apply("align"+y.align,{},I),p.focus(),p.addVisual()})}function v(L,M){function G(P,K){for(var Q=0;Q<K.length;Q++){var J=w.getStyle(K[Q],M);if("undefined"==typeof P&&(P=J),P!=J){return""}}return P}var F,H=p.dom.select("td,th",L);return F=G(F,H)}var I,q,x,B,n,A,w=p.dom,y={};t===!0?(I=w.getParent(p.selection.getStart(),"table"),I&&(y={width:r(w.getStyle(I,"width")||w.getAttrib(I,"width")),height:r(w.getStyle(I,"height")||w.getAttrib(I,"height")),cellspacing:r(w.getStyle(I,"border-spacing")||w.getAttrib(I,"cellspacing")),cellpadding:w.getAttrib(I,"data-mce-cell-padding")||w.getAttrib(I,"cellpadding")||v(I,"padding"),border:w.getAttrib(I,"data-mce-border")||w.getAttrib(I,"border")||v(I,"border"),borderColor:w.getAttrib(I,"data-mce-border-color"),caption:!!w.select("caption",I)[0],"class":w.getAttrib(I,"class")},a("left center right".split(" "),function(F){p.formatter.matchNode(I,"align"+F)&&(y.align=F)}))):(q={label:"Cols",name:"cols"},x={label:"Rows",name:"rows"}),p.settings.table_class_list&&(y["class"]&&(y["class"]=y["class"].replace(/\s*mce\-item\-table\s*/g,"")),B={name:"class",type:"listbox",label:"Class",values:g(p.settings.table_class_list,function(F){F.value&&(F.textStyle=function(){return p.formatter.getCssText({block:"table",classes:[F.value]})})})}),n={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:p.settings.table_appearance_options!==!1?[q,x,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[q,x,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},B]},p.settings.table_advtab!==!1?(C(w,y,I),p.windowManager.open({title:"Table properties",data:y,bodyType:"tabpanel",body:[{title:"General",type:"form",items:n},m(w)],onsubmit:z})):p.windowManager.open({title:"Table properties",data:y,body:n,onsubmit:z})},d.merge=function(n,q){p.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var t=this.toJSON();p.undoManager.transact(function(){n.merge(q,t.cols,t.rows)})}})},d.cell=function(){function y(H,B,F){(1===n.length||F)&&z.setAttrib(H,B,F)}function q(H,B,F){(1===n.length||F)&&z.setStyle(H,B,F)}function w(){u(z,this),x=b.extend(x,this.toJSON()),p.undoManager.transact(function(){a(n,function(B){y(B,"scope",x.scope),y(B,"style",x.style),y(B,"class",x["class"]),q(B,"width",f(x.width)),q(B,"height",f(x.height)),x.type&&B.nodeName.toLowerCase()!==x.type&&(B=z.rename(B,x.type)),1===n.length&&(E(B),s(B)),x.align&&p.formatter.apply("align"+x.align,{},B),x.valign&&p.formatter.apply("valign"+x.valign,{},B)}),p.focus()})}var v,x,A,z=p.dom,n=[];if(n=p.dom.select("td[data-mce-selected],th[data-mce-selected]"),v=p.dom.getParent(p.selection.getStart(),"td,th"),!n.length&&v&&n.push(v),v=v||n[0]){n.length>1?x={width:"",height:"",scope:"","class":"",align:"",style:"",type:v.nodeName.toLowerCase()}:(x={width:r(z.getStyle(v,"width")||z.getAttrib(v,"width")),height:r(z.getStyle(v,"height")||z.getAttrib(v,"height")),scope:z.getAttrib(v,"scope"),"class":z.getAttrib(v,"class")},x.type=v.nodeName.toLowerCase(),a("left center right".split(" "),function(B){p.formatter.matchNode(v,"align"+B)&&(x.align=B)}),a("top middle bottom".split(" "),function(B){p.formatter.matchNode(v,"valign"+B)&&(x.valign=B)}),C(z,x,v)),p.settings.table_cell_class_list&&(A={name:"class",type:"listbox",label:"Class",values:g(p.settings.table_cell_class_list,function(B){B.value&&(B.textStyle=function(){return p.formatter.getCssText({block:"td",classes:[B.value]})})})});var t={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},A]};p.settings.table_cell_advtab!==!1?p.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:x,body:[{title:"General",type:"form",items:t},m(z)],onsubmit:w}):p.windowManager.open({title:"Cell properties",data:x,body:t,onsubmit:w})}},d.row=function(){function x(H,F,G){(1===A.length||G)&&n.setAttrib(H,F,G)}function q(H,F,G){(1===A.length||G)&&n.setStyle(H,F,G)}function t(){var H,F,G;u(n,this),y=b.extend(y,this.toJSON()),p.undoManager.transact(function(){var K=y.type;a(A,function(J){x(J,"scope",y.scope),x(J,"style",y.style),x(J,"class",y["class"]),q(J,"height",f(y.height)),K!==J.parentNode.nodeName.toLowerCase()&&(H=n.getParent(J,"table"),F=J.parentNode,G=n.select(K,H)[0],G||(G=n.create(K),H.firstChild?H.insertBefore(G,H.firstChild):H.appendChild(G)),G.appendChild(J),F.hasChildNodes()||n.remove(F)),1===A.length&&E(J),y.align&&p.formatter.apply("align"+y.align,{},J)}),p.focus()})}var w,v,z,I,y,B,n=p.dom,A=[];w=p.dom.getParent(p.selection.getStart(),"table"),v=p.dom.getParent(p.selection.getStart(),"td,th"),a(w.rows,function(F){a(F.cells,function(G){if(n.getAttrib(G,"data-mce-selected")||G==v){return A.push(F),!1}})}),z=A[0],z&&(A.length>1?y={height:"",scope:"","class":"",align:"",type:z.parentNode.nodeName.toLowerCase()}:(y={height:r(n.getStyle(z,"height")||n.getAttrib(z,"height")),scope:n.getAttrib(z,"scope"),"class":n.getAttrib(z,"class")},y.type=z.parentNode.nodeName.toLowerCase(),a("left center right".split(" "),function(F){p.formatter.matchNode(z,"align"+F)&&(y.align=F)}),C(n,y,z)),p.settings.table_row_class_list&&(I={name:"class",type:"listbox",label:"Class",values:g(p.settings.table_row_class_list,function(F){F.value&&(F.textStyle=function(){return p.formatter.getCssText({block:"tr",classes:[F.value]})})})}),B={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},I]},p.settings.table_row_advtab!==!1?p.windowManager.open({title:"Row properties",data:y,bodyType:"tabpanel",body:[{title:"General",type:"form",items:B},m(n)],onsubmit:t}):p.windowManager.open({title:"Row properties",data:y,body:B,onsubmit:t}))}}}),l("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(b,a){var c;return function(I){function O(n,r){return{index:n,y:I.dom.getPos(r).y}}function a0(n,r){return{index:n,y:I.dom.getPos(r).y+r.offsetHeight}}function S(n,r){return{index:n,x:I.dom.getPos(r).x}}function L(n,r){return{index:n,x:I.dom.getPos(r).x+r.offsetWidth}}function bc(){var n=I.getBody().dir;return"rtl"===n}function T(){return I.inline}function bd(){return T?I.getBody().ownerDocument.body:I.getBody()}function E(n,r){return bc()?L(n,r):S(n,r)}function P(n,r){return bc()?S(n,r):L(n,r)}function N(n,r){return F(n,"width")/F(r,"width")*100}function F(n,t){var aa=I.dom.getStyle(n,t,!0),r=parseInt(aa,10);return r}function H(r){var t=F(r,"width"),n=F(r.parentElement,"width");return t/n*100}function U(r,t){var n=F(r,"width");return t/n*100}function ba(r,t){var n=F(r.parentElement,"width");return t/n*100}function X(aA,n,aa){for(var aB=[],r=1;r<aa.length;r++){var ab=aa[r].element;aB.push(aA(r-1,ab))}var t=aa[aa.length-1];return aB.push(n(aa.length-1,t.element)),aB}function W(){var n=I.dom.select("."+v,bd());b.each(n,function(r){I.dom.remove(r)})}function bf(n){W(),be(n)}function V(aC,aA,r,aa,aD,t,aB,ab){var n={"data-mce-bogus":"all","class":v+" "+aC,unselectable:"on","data-mce-resize":!1,style:"cursor: "+aA+"; margin: 0; padding: 0; position: absolute; left: "+r+"px; top: "+aa+"px; height: "+aD+"px; width: "+t+"px; "};return n[aB]=ab,n}function aj(t,n,r){b.each(t,function(ab){var aB=r.x,aa=ab.y-ai/2,aC=ai,aA=n;I.dom.add(bd(),"div",V(ac,A,aB,aa,aC,aA,B,ab.index))})}function K(t,n,r){b.each(t,function(ab){var aB=ab.x-ai/2,aa=r.y,aC=n,aA=ai;I.dom.add(bd(),"div",V(Z,aq,aB,aa,aC,aA,w,ab.index))})}function ap(n){return b.map(n.rows,function(t){var r=b.map(t.cells,function(ab){var aA=ab.hasAttribute("rowspan")?parseInt(ab.getAttribute("rowspan"),10):1,aa=ab.hasAttribute("colspan")?parseInt(ab.getAttribute("colspan"),10):1;return{element:ab,rowspan:aA,colspan:aa}});return{element:t,cells:r}})}function az(r){function aa(aF,aE){return aF+","+aE}function aD(aF,aE){return ab[aa(aF,aE)]}function t(){var aE=[];return b.each(n,function(aF){aE=aE.concat(aF.cells)}),aE}function aB(){return n}var ab={},n=[],aC=0,aA=0;return b.each(r,function(aF,aE){var aG=[];b.each(aF.cells,function(aK){for(var aI=0;ab[aa(aE,aI)]!==e;){aI++}for(var aH={element:aK.element,colspan:aK.colspan,rowspan:aK.rowspan,rowIndex:aE,colIndex:aI},aM=0;aM<aK.colspan;aM++){for(var aJ=0;aJ<aK.rowspan;aJ++){var aN=aE+aJ,aL=aI+aM;ab[aa(aN,aL)]=aH,aC=Math.max(aC,aN+1),aA=Math.max(aA,aL+1)}}aG.push(aH)}),n.push({element:aF.element,cells:aG})}),{grid:{maxRows:aC,maxCols:aA},getAt:aD,getAllCells:t,getAllRows:aB}}function bi(n,t){for(var aa=[],r=n;r<t;r++){aa.push(r)}return aa}function ar(aA,r,aa){for(var n,t=aA(),ab=0;ab<t.length;ab++){r(t[ab])&&(n=t[ab])}return n?n:aa()}function ao(t){var n=bi(0,t.grid.maxCols),r=bi(0,t.grid.maxRows);return b.map(n,function(aA){function aa(){for(var aC=[],aE=0;aE<r.length;aE++){var aD=t.getAt(aE,aA);aD&&aD.colIndex===aA&&aC.push(aD)}return aC}function aB(aC){return 1===aC.colspan}function ab(){for(var aC,aD=0;aD<r.length;aD++){if(aC=t.getAt(aD,aA)){return aC}}return null}return ar(aa,aB,ab)})}function D(t){var n=bi(0,t.grid.maxCols),r=bi(0,t.grid.maxRows);return b.map(r,function(ab){function aA(){for(var aD=[],aE=0;aE<n.length;aE++){var aC=t.getAt(ab,aE);aC&&aC.rowIndex===ab&&aD.push(aC)}return aD}function aB(aC){return 1===aC.rowspan}function aa(){return t.getAt(ab,0)}return ar(aA,aB,aa)})}function be(ab){var aC=ap(ab),r=az(aC),aA=D(r),aB=ao(r),aa=I.dom.getPos(ab),t=aA.length>0?X(O,a0,aA):[],n=aB.length>0?X(E,P,aB):[];aj(t,ab.offsetWidth,aa),K(n,ab.offsetHeight,aa)}function am(aF,t,aa,aB){if(t<0||t>=aF.length-1){return""}var aG=aF[t];if(aG){aG={value:aG,delta:0}}else{for(var aA=aF.slice(0,t).reverse(),aC=0;aC<aA.length;aC++){aA[aC]&&(aG={value:aA[aC],delta:aC+1})}}var r=aF[t+1];if(r){r={value:r,delta:1}}else{for(var n=aF.slice(t+1),aD=0;aD<n.length;aD++){n[aD]&&(r={value:n[aD],delta:aD+1})}}var ab=r.delta-aG.delta,aE=Math.abs(r.value-aG.value)/ab;return aa?aE/F(aB,"width")*100:aE}function bh(r,t){var n=I.dom.getStyle(r,t);return n||(n=I.dom.getAttrib(r,t)),n||(n=I.dom.getStyle(r,t,!0)),n}function ah(aA,r,aa){var n=bh(aA,"width"),t=parseInt(n,10),ab=r?N(aA,aa):F(aA,"width");return(r&&!au(n)||!r&&!x(n))&&(t=0),!isNaN(t)&&t>0?t:ab}function ag(aA,r,aa){for(var aD=ao(aA),t=b.map(aD,function(aE){return E(aE.colIndex,aE.element).x}),aB=[],ab=0;ab<aD.length;ab++){var n=aD[ab].element.hasAttribute("colspan")?parseInt(aD[ab].element.getAttribute("colspan"),10):1,aC=n>1?am(t,ab):ah(aD[ab].element,r,aa);aC=aC?aC:f,aB.push(aC)}return aB}function d(r){var t=bh(r,"height"),n=parseInt(t,10);return au(t)&&(n=0),!isNaN(n)&&n>0?n:F(r,"height")}function al(aA){for(var t=D(aA),aa=b.map(t,function(aC){return O(aC.rowIndex,aC.element).y}),aB=[],n=0;n<t.length;n++){var ab=t[n].element.hasAttribute("rowspan")?parseInt(t[n].element.getAttribute("rowspan"),10):1,r=ab>1?am(aa,n):d(t[n].element);r=r?r:y,aB.push(r)}return aB}function bl(aa,t,aA,aF,ab){function aC(aG){return b.map(aG,function(){return 0})}function r(){var aH;if(ab){aH=[100-aE[0]]}else{var aG=Math.max(aF,aE[0]+aA);aH=[aG-aE[0]]}return aH}function n(aJ,aL){var aG,aI=aC(aE.slice(0,aJ)),aK=aC(aE.slice(aL+1));if(aA>=0){var aN=Math.max(aF,aE[aL]-aA);aG=aI.concat([aA,aN-aE[aL]]).concat(aK)}else{var aH=Math.max(aF,aE[aJ]+aA),aM=aE[aJ]-aH;aG=aI.concat([aH-aE[aJ],aM]).concat(aK)}return aG}function aD(aK,aG){var aI,aJ=aC(aE.slice(0,aG));if(aA>=0){aI=aJ.concat([aA])}else{var aH=Math.max(aF,aE[aG]+aA);aI=aJ.concat([aH-aE[aG]])}return aI}var aB,aE=aa.slice(0);return aB=0===aa.length?[]:1===aa.length?r():0===t?n(0,1):t>0&&t<aa.length-1?n(t,t+1):t===aa.length-1?aD(t-1,t):[]}function bj(ab,r,aa){for(var n=0,t=ab;t<r;t++){n+=aa[t]}return n}function Y(t,n){var r=t.getAllCells();return b.map(r,function(aa){var ab=bj(aa.colIndex,aa.colIndex+aa.colspan,n);return{element:aa.element,width:ab,colspan:aa.colspan}})}function av(t,n){var r=t.getAllCells();return b.map(r,function(aa){var ab=bj(aa.rowIndex,aa.rowIndex+aa.rowspan,n);return{element:aa.element,height:ab,rowspan:aa.rowspan}})}function at(t,n){var r=t.getAllRows();return b.map(r,function(aa,ab){return{element:aa.element,height:n[ab]}})}function au(n){return p.test(n)}function x(n){return o.test(n)}function J(aJ,aC,aG){function aD(aO,aN){b.each(aO,function(aP){I.dom.setStyle(aP.element,"width",aP.width+aN),I.dom.setAttrib(aP.element,"width",null)})}function n(){return aG<aL.grid.maxCols-1?H(aJ):H(aJ)+ba(aJ,aC)}function aI(){return aG<aL.grid.maxCols-1?F(aJ,"width"):F(aJ,"width")+aC}function ab(aO,aP,aN){aG!=aL.grid.maxCols-1&&aN||(I.dom.setStyle(aJ,"width",aO+aP),I.dom.setAttrib(aJ,"width",null))}for(var r=ap(aJ),aL=az(r),t=au(aJ.width)||au(aJ.style.width),aa=ag(aL,t,aJ),aE=t?U(aJ,aC):aC,aB=bl(aa,aG,aE,f,t,aJ),aK=[],aF=0;aF<aB.length;aF++){aK.push(aB[aF]+aa[aF])}var aH=Y(aL,aK),aA=t?"%":"px",aM=t?n():aI();I.undoManager.transact(function(){aD(aH,aA),ab(aM,aA,t)})}function Q(aa,t,aA){for(var ab=ap(aa),aC=az(ab),r=al(aC),n=[],aD=0,aB=0;aB<r.length;aB++){n.push(aB===aA?t+r[aB]:r[aB]),aD+=aD[aB]}var aE=av(aC,n),aF=at(aC,n);I.undoManager.transact(function(){b.each(aF,function(aG){I.dom.setStyle(aG.element,"height",aG.height+"px"),I.dom.setAttrib(aG.element,"height",null)}),b.each(aE,function(aG){I.dom.setStyle(aG.element,"height",aG.height+"px"),I.dom.setAttrib(aG.element,"height",null)}),I.dom.setStyle(aa,"height",aD+"px"),I.dom.setAttrib(aa,"height",null)})}function ax(){C=setTimeout(function(){ae()},200)}function aw(){clearTimeout(C)}function af(){var n=document.createElement("div");return n.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),n.setAttribute("data-mce-bogus","all"),n}function bk(n,r){I.dom.bind(n,"mouseup",function(){ae()}),I.dom.bind(n,"mousemove",function(t){aw(),z&&r(t)}),I.dom.bind(n,"mouseout",function(){ax()})}function ae(){if(I.dom.remove(u),z){I.dom.removeClass(R,g),z=!1;var aA,r;if(an(R)){var aa=parseInt(I.dom.getAttrib(R,q),10),ab=I.dom.getPos(R).x;aA=parseInt(I.dom.getAttrib(R,w),10),r=bc()?aa-ab:ab-aa,Math.abs(r)>=1&&J(c,r,aA)}else{if(m(R)){var t=parseInt(I.dom.getAttrib(R,ak),10),n=I.dom.getPos(R).y;aA=parseInt(I.dom.getAttrib(R,B),10),r=n-t,Math.abs(r)>=1&&Q(c,r,aA)}}bf(c),I.nodeChanged()}}function ay(n,r){u=u?u:af(),z=!0,I.dom.addClass(n,g),R=n,bk(u,r),I.dom.add(bd(),u)}function an(n){return I.dom.hasClass(n,Z)}function m(n){return I.dom.hasClass(n,ac)}function bg(r){bb=bb!==e?bb:r.clientX;var n=r.clientX-bb;bb=r.clientX;var t=I.dom.getPos(R).x;I.dom.setStyle(R,"left",t+n+"px")}function bm(r){ad=ad!==e?ad:r.clientY;var n=r.clientY-ad;ad=r.clientY;var t=I.dom.getPos(R).y;I.dom.setStyle(R,"top",t+n+"px")}function s(n){bb=e,ay(n,bg)}function M(n){ad=e,ay(n,bm)}function G(n){var r=n.target,aa=I.getBody();if(I.$.contains(aa,c)||c===aa){if(an(r)){n.preventDefault();var ab=I.dom.getPos(r).x;I.dom.setAttrib(r,q,ab),s(r)}else{if(m(r)){n.preventDefault();var t=I.dom.getPos(r).y;I.dom.setAttrib(r,ak,t),M(r)}else{W()}}}}var C,z,u,R,bb,ad,v="mce-resize-bar",ac="mce-resize-bar-row",A="row-resize",B="data-row",ak="data-initial-top",Z="mce-resize-bar-col",aq="col-resize",w="data-col",q="data-initial-left",ai=4,f=10,y=10,g="mce-resize-bar-dragging",p=new RegExp(/(\d+(\.\d+)?%)/),o=new RegExp(/px|em/);return I.on("init",function(){I.dom.bind(bd(),"mousedown",G)}),I.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var r=[];b.each(n.rows,function(aa){b.each(aa.cells,function(ab){var aA=I.dom.getStyle(ab,"width",!0);r.push({cell:ab,width:aA})})}),b.each(r,function(aa){I.dom.setStyle(aa.cell,"width",aa.width),I.dom.setAttrib(aa.cell,"width",null)})}}),I.on("mouseover",function(n){if(!z){var r=I.dom.getParent(n.target,"table");("TABLE"===n.target.nodeName||r)&&(c=r,bf(r))}}),I.on("keydown",function(n){switch(n.keyCode){case a.LEFT:case a.RIGHT:case a.UP:case a.DOWN:W()}}),I.on("remove",function(){W(),I.dom.unbind(bd(),"mousedown",G)}),{adjustWidth:J,adjustHeight:Q,clearBars:W,drawBars:be,determineDeltas:bl,getTableGrid:az,getTableDetails:ap,getWidths:ag,getPixelHeights:al,isPercentageBasedSize:au,isPixelBasedSize:x,recalculateWidths:Y,recalculateCellHeights:av,recalculateRowHeights:at}}}),l("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(a,o,d,g,b,f,s,n,c){function t(S){function m(u){return function(){S.execCommand(u)}}function N(B,F){var A,E,D,u;for(D='<table id="__mce"><tbody>',A=0;A<F;A++){for(D+="<tr>",E=0;E<B;E++){D+="<td>"+(n.ie&&n.ie<10?"&nbsp;":"<br>")+"</td>"}D+="</tr>"}return D+="</tbody></table>",S.undoManager.transact(function(){S.insertContent(D),u=S.dom.get("__mce"),S.dom.setAttrib(u,"id",null),S.$("tr",u).each(function(G,H){S.fire("newrow",{node:H}),S.$("th,td",H).each(function(I,J){S.fire("newcell",{node:J})})}),S.dom.setAttribs(u,S.settings.table_default_attributes||{}),S.dom.setStyles(u,S.settings.table_default_styles||{})}),u}function q(D,u,B){function A(){var E,G,H,F={},I=0;G=S.dom.select("td[data-mce-selected],th[data-mce-selected]"),E=G[0],E||(E=S.selection.getStart()),B&&G.length>0?(r(G,function(J){return F[J.parentNode.parentNode.nodeName]=1}),r(F,function(J){I+=J}),H=1!==I):H=!S.dom.getParent(E,u),D.disabled(H),S.selection.selectorChanged(u,function(J){D.disabled(!J)})}S.initialized?A():S.on("init",A)}function v(){q(this,"table")}function w(){q(this,"td,th")}function T(){q(this,"td,th",!0)}function Q(){var B="";B='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var u=0;u<10;u++){B+="<tr>";for(var A=0;A<10;A++){B+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*u+A)+'" href="#" data-mce-x="'+A+'" data-mce-y="'+u+'"></a></td>'}B+="</tr>"}return B+="</table>",B+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function x(H,D,u){var A,I,F,B,J,G=u.getEl().getElementsByTagName("table")[0],E=u.isRtl()||"tl-tr"==u.parent().rel;for(G.nextSibling.innerHTML=H+1+" x "+(D+1),E&&(H=9-H),I=0;I<10;I++){for(A=0;A<10;A++){B=G.rows[I].childNodes[A].firstChild,J=(E?A>=H:A<=H)&&I<=D,S.dom.toggleClass(B,"mce-active",J),J&&(F=B)}}return F.parentNode}function y(){S.addButton("tableprops",{title:"Table properties",onclick:z.tableProps,icon:"table"}),S.addButton("tabledelete",{title:"Delete table",onclick:m("mceTableDelete")}),S.addButton("tablecellprops",{title:"Cell properties",onclick:m("mceTableCellProps")}),S.addButton("tablemergecells",{title:"Merge cells",onclick:m("mceTableMergeCells")}),S.addButton("tablesplitcells",{title:"Split cell",onclick:m("mceTableSplitCells")}),S.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:m("mceTableInsertRowBefore")}),S.addButton("tableinsertrowafter",{title:"Insert row after",onclick:m("mceTableInsertRowAfter")}),S.addButton("tabledeleterow",{title:"Delete row",onclick:m("mceTableDeleteRow")}),S.addButton("tablerowprops",{title:"Row properties",onclick:m("mceTableRowProps")}),S.addButton("tablecutrow",{title:"Cut row",onclick:m("mceTableCutRow")}),S.addButton("tablecopyrow",{title:"Copy row",onclick:m("mceTableCopyRow")}),S.addButton("tablepasterowbefore",{title:"Paste row before",onclick:m("mceTablePasteRowBefore")}),S.addButton("tablepasterowafter",{title:"Paste row after",onclick:m("mceTablePasteRowAfter")}),S.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:m("mceTableInsertColBefore")}),S.addButton("tableinsertcolafter",{title:"Insert column after",onclick:m("mceTableInsertColAfter")}),S.addButton("tabledeletecol",{title:"Delete column",onclick:m("mceTableDeleteCol")})}function O(A){var u=S.dom.is(A,"table")&&S.getBody().contains(A);return u}function p(){var u=S.settings.table_toolbar;""!==u&&u!==!1&&(u||(u="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),S.addContextToolbar(O,u))}function U(){return C}function R(u){C=u}var C,P,V=this,z=new g(S);!S.settings.object_resizing||S.settings.table_resize_bars===!1||S.settings.object_resizing!==!0&&"table"!==S.settings.object_resizing||(P=b(S)),S.settings.table_grid===!1?S.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:z.table}):S.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(u){u.aria&&(this.parent().hideAll(),u.stopImmediatePropagation(),z.table())},onshow:function(){x(0,0,this.menu.items()[0])},onhide:function(){var u=this.menu.items()[0].getEl().getElementsByTagName("a");S.dom.removeClass(u,"mce-active"),S.dom.addClass(u[0],"mce-active")},menu:[{type:"container",html:Q(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(D){var u,B,A=D.target;"A"==A.tagName.toUpperCase()&&(u=parseInt(A.getAttribute("data-mce-x"),10),B=parseInt(A.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(u=9-u),u===this.lastX&&B===this.lastY||(x(u,B,D.control),this.lastX=u,this.lastY=B))},onclick:function(A){var u=this;"A"==A.target.tagName.toUpperCase()&&(A.preventDefault(),A.stopPropagation(),u.parent().cancel(),S.undoManager.transact(function(){N(u.lastX+1,u.lastY+1)}),S.addVisual())}}]}),S.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:v,onclick:z.tableProps}),S.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"}),S.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:w},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:T},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:w}]}),S.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:w},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:w},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:w},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:w},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:w},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:w},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:w},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:w}]}),S.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:w},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:w},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:w}]});var W=[];r("inserttable tableprops deletetable | cell row column".split(" "),function(u){"|"==u?W.push({text:"-"}):W.push(S.menuItems[u])}),S.addButton("table",{type:"menubutton",title:"Table",menu:W}),n.isIE||S.on("click",function(u){u=u.target,"TABLE"===u.nodeName&&(S.selection.select(u),S.nodeChanged())}),V.quirks=new o(S),S.on("Init",function(){V.cellSelection=new d(S,function(u){u&&P&&P.clearBars()}),V.resizeBars=P}),S.on("PreInit",function(){S.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(B,u){for(var A=B.length;A--;){B[A].attr(u,null)}})}),r({mceTableSplitCells:function(u){u.split()},mceTableMergeCells:function(A){var u;u=S.dom.getParent(S.selection.getStart(),"th,td"),S.dom.select("td[data-mce-selected],th[data-mce-selected]").length?A.merge():z.merge(A,u)},mceTableInsertRowBefore:function(u){u.insertRows(!0)},mceTableInsertRowAfter:function(u){u.insertRows()},mceTableInsertColBefore:function(u){u.insertCols(!0)},mceTableInsertColAfter:function(u){u.insertCols()},mceTableDeleteCol:function(u){u.deleteCols()},mceTableDeleteRow:function(u){u.deleteRows()},mceTableCutRow:function(u){C=u.cutRows()},mceTableCopyRow:function(u){C=u.copyRows()},mceTablePasteRowBefore:function(u){u.pasteRows(C,!0)},mceTablePasteRowAfter:function(u){u.pasteRows(C)},mceSplitColsBefore:function(u){u.splitCols(!0)},mceSplitColsAfter:function(u){u.splitCols(!1)},mceTableDelete:function(u){P&&P.clearBars(),u.deleteTable()}},function(u,A){S.addCommand(A,function(){var B=new a(S);B&&(u(B),S.execCommand("mceRepaint"),V.cellSelection.clear())})}),r({mceInsertTable:z.table,mceTableProps:function(){z.table(!0)},mceTableRowProps:z.row,mceTableCellProps:z.cell},function(A,u){S.addCommand(u,function(D,B){A(B)})}),y(),p(),S.settings.table_tab_navigation!==!1&&S.on("keydown",function(D){var B,A,u;9==D.keyCode&&(B=S.dom.getParent(S.selection.getStart(),"th,td"),B&&(D.preventDefault(),A=new a(S),u=D.shiftKey?-1:1,S.undoManager.transact(function(){!A.moveRelIdx(B,u)&&u>0&&(A.insertRow(),A.refresh(),A.moveRelIdx(B,u))})))}),V.insertTable=N,V.setClipboardRows=R,V.getClipboardRows=U}var r=f.each;c.add("table",t)})}(window);