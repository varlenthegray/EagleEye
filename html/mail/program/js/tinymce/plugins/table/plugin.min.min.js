!function(d,b){function g(k,i){for(var l,j=[],h=0;h<k.length;++h){if(l=f[k[h]]||a(k[h]),!l){throw"module definition dependecy not found: "+k[h]}j.push(l)}i.apply(null,j)}function c(k,j,h){if("string"!=typeof k){throw"invalid module definition, module id must be defined and be a string"}if(j===b){throw"invalid module definition, dependencies must be specified"}if(h===b){throw"invalid module definition, definition function must be specified"}g(j,function(){f[k]=h.apply(null,arguments)})}function a(h){for(var k=d,j=h.split(/[.\/]/),e=0;e<j.length;++e){if(!k[j[e]]){return}k=k[j[e]]}return k}var f={};c("tinymce/tableplugin/Utils",["tinymce/Env"],function(j){function h(e){(!j.ie||j.ie>9)&&(e.hasChildNodes()||(e.innerHTML='<br data-mce-bogus="1" />'))}var k=function(l){return function(e,m){e&&(m=parseInt(m,10),1===m||0===m?e.removeAttribute(l,1):e.setAttribute(l,m,1))}},i=function(l){return function(e){return parseInt(e.getAttribute(l)||1,10)}};return{setColSpan:k("colSpan"),setRowSpan:k("rowspan"),getColSpan:i("colSpan"),getRowSpan:i("rowSpan"),setSpanVal:function(n,l,m){k(l)(n,m)},getSpanVal:function(m,l){return i(l)(m)},paddCell:h}}),c("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(q,z){var k=function(l,i,o){return l[o]?l[o][i]:null},h=function(s,n,o){var l=k(s,n,o);return l?l.elm:null},p=function(D,B,u,E){var r,C,n=0,F=h(D,B,u);for(r=u;(E>0?r<D.length:r>=0)&&(C=k(D,B,r),F===C.elm);r+=E){n++}return n},j=function(B,s,D){for(var u,l=B[D],C=s;C<l.length;C++){if(u=l[C],u.real){return u.elm}}return null},x=function(u,C){for(var t,B=[],i=u[C],l=0;l<i.length;l++){t=i[l],B.push({elm:t.elm,above:p(u,l,C,-1)-1,below:p(u,l,C,1)-1}),l+=z.getColSpan(t.elm)-1}return B},A=function(s,t){var o=s.elm.ownerDocument,l=o.createElement("td");return z.setColSpan(l,z.getColSpan(s.elm)),z.setRowSpan(l,t),z.paddCell(l),l},m=function(u,o,B,s){var l=j(u,B+1,s);l?l.parentNode.insertBefore(o,l):(l=j(u,0,s),l.parentNode.appendChild(o))},w=function(t,B,s,l){if(0!==B.above){z.setRowSpan(B.elm,B.above);var u=A(B,B.below+1);return m(t,u,s,l),u}return null},y=function(t,B,s,l){if(0!==B.below){z.setRowSpan(B.elm,B.above+1);var u=A(B,B.below);return m(t,u,s,l+1),u}return null},v=function(u,E,r,D){var B=x(u,r),e=h(u,E,r).parentNode,C=[];return q.each(B,function(l,o){var i=D?w(u,l,o,r):y(u,l,o,r);null!==i&&C.push(C)}),{cells:C,row:e}};return{splitAt:v}}),c("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(m,q,l,j){var p=m.each,h=l.getSpanVal,k=l.setSpanVal;return function(aH,aO,aD){function aN(){aH.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function aM(u){return u===aH.getBody()}function aF(u,v){return u?(v=m.map(v.split(","),function(w){return w.toLowerCase()}),m.grep(u.childNodes,function(w){return m.inArray(v,w.nodeName.toLowerCase())!==-1})):[]}function aG(){var u=0;i=[],ae=0,p(["thead","tbody","tfoot"],function(v){var x=aF(aO,v)[0],w=aF(x,"tr");p(w,function(z,y){y+=u,p(aF(z,"td,th"),function(D,F){var B,E,C,A;if(i[y]){for(;i[y][F];){F++}}for(C=h(D,"rowspan"),A=h(D,"colspan"),E=y;E<y+C;E++){for(i[E]||(i[E]=[]),B=F;B<F+A;B++){i[E][B]={part:v,real:E==y&&B==F,elm:D,rowspan:C,colspan:A}}}ae=Math.max(ae,F+1)})}),u+=w.length})}function aL(u){return aH.fire("newrow",{node:u}),u}function aK(u){return aH.fire("newcell",{node:u}),u}function aC(v,u){return v=v.cloneNode(u),v.removeAttribute("id"),v}function aP(v,u){var w;if(w=i[u]){return w[v]}}function ay(v,u){return v[u]?v[u]:null}function aA(w,u){for(var x=[],v=0;v<w.length;v++){x.push(aP(u,v))}return x}function at(u){return u&&(!!az.getAttrib(u.elm,"data-mce-selected")||u==aD)}function aB(){var u=[];return p(aO.rows,function(v){p(v.cells,function(w){if(az.getAttrib(w,"data-mce-selected")||aD&&w==aD.elm){return u.push(v),!1}})}),u}function ah(){var u=0;return p(i,function(v){if(p(v,function(w){at(w)&&u++}),u){return !1}}),u}function aI(){var u=az.createRng();aM(aO)||(u.setStartAfter(aO),u.setEndAfter(aO),e.setRng(u),az.remove(aO))}function ac(w){var v,u={};return aH.settings.table_clone_elements!==!1&&(u=m.makeMap((aH.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),m.walk(w,function(y){var x;if(3==y.nodeType){return p(az.getParents(y.parentNode,null,w).reverse(),function(z){u[z.nodeName]&&(z=aC(z,!1),v?x&&x.appendChild(z):v=x=z,x=z)}),x&&(x.innerHTML=q.ie&&q.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1}},"childNodes"),w=aC(w,!1),aK(w),k(w,"rowSpan",1),k(w,"colSpan",1),v?w.appendChild(v):l.paddCell(w),w}function aR(){var v,u=az.createRng();return p(az.select("tr",aO),function(w){0===w.cells.length&&az.remove(w)}),0===az.select("tr",aO).length?(u.setStartBefore(aO),u.setEndBefore(aO),e.setRng(u),void az.remove(aO)):(p(az.select("thead,tbody,tfoot",aO),function(w){0===w.rows.length&&az.remove(w)}),aG(),void (aQ&&(v=i[Math.min(i.length-1,aQ.y)],v&&(e.select(v[Math.min(v.length-1,aQ.x)].elm,!0),e.collapse(!0)))))}function aq(z,B,w,u){var y,v,A,C,x;for(y=i[B][z].elm.parentNode,A=1;A<=w;A++){if(y=az.getNext(y,"tr")){for(v=z;v>=0;v--){if(x=i[B+A][v].elm,x.parentNode==y){for(C=1;C<=u;C++){az.insertAfter(ac(x),x)}break}}if(v==-1){for(C=1;C<=u;C++){y.insertBefore(ac(y.cells[0]),y.cells[0])}}}}}function ab(){p(i,function(v,u){p(v,function(y,A){var x,w,z;if(at(y)&&(y=y.elm,x=h(y,"colspan"),w=h(y,"rowspan"),x>1||w>1)){for(k(y,"rowSpan",1),k(y,"colSpan",1),z=0;z<x-1;z++){az.insertAfter(ac(y),y)}aq(A,u,w-1,x)}})})}function ad(x,v,y){for(var w=[],u=0;u<x.length;u++){(u<v||u>y)&&w.push(x[u])}return w}function av(u){return m.grep(u,function(v){return v.real===!1})}function au(w){for(var u=[],x=0;x<w.length;x++){var v=w[x].elm;u[u.length-1]!==v&&u.push(v)}return u}function af(C,w,y,v,A){var D=0;if(A-y<1){return 0}for(var x=y+1;x<=A;x++){var z=ad(ay(C,x),w,v),B=av(z);z.length===B.length&&(m.each(au(B),function(u){l.setRowSpan(u,l.getRowSpan(u)-1)}),D++)}return D}function ar(C,w,y,v,A){var D=0;if(v-w<1){return 0}for(var x=w+1;x<=v;x++){var z=ad(aA(C,x),y,A),B=av(z);z.length===B.length&&(m.each(au(B),function(u){l.setColSpan(u,l.getColSpan(u)-1)}),D++)}return D}function ai(F,I,G){var K,R,J,Q,E,P,O,H,M,L,D,A,B;if(F?(K=aE(F),R=K.x,J=K.y,Q=R+(I-1),E=J+(G-1)):(aQ=r=null,p(i,function(v,u){p(v,function(w,x){at(w)&&(aQ||(aQ={x:x,y:u}),r={x:x,y:u})})}),aQ&&(R=aQ.x,J=aQ.y,Q=r.x,E=r.y)),H=aP(R,J),M=aP(Q,E),H&&M&&H.part==M.part){ab(),aG(),A=af(i,R,J,Q,E),B=ar(i,R,J,Q,E),H=aP(R,J).elm;var C=Q-R-B+1,z=E-J-A+1;for(C===ae&&z===i.length&&(C=1,z=1),C===ae&&z>1&&(z=1),k(H,"colSpan",C),k(H,"rowSpan",z),O=J;O<=E;O++){for(P=R;P<=Q;P++){i[O]&&i[O][P]&&(F=i[O][P].elm,F!=H&&(L=m.grep(F.childNodes),p(L,function(u){H.appendChild(u)}),L.length&&(L=m.grep(H.childNodes),D=0,p(L,function(u){"BR"==u.nodeName&&D++<L.length-1&&H.removeChild(u)})),az.remove(F)))}}aR()}}function aj(C){var x,v,A,z,E,F,D,B,w,y;if(p(i,function(G,u){if(p(G,function(H){if(at(H)&&(H=H.elm,E=H.parentNode,F=aL(aC(E,!1)),x=u,C)){return !1}}),C){return x===b}}),x!==b){for(z=0,y=0;z<i[0].length;z+=y){if(i[x][z]&&(v=i[x][z].elm,y=h(v,"colspan"),v!=A)){if(C){if(x>0&&i[x-1][z]&&(B=i[x-1][z].elm,w=h(B,"rowSpan"),w>1)){k(B,"rowSpan",w+1);continue}}else{if(w=h(v,"rowspan"),w>1){k(v,"rowSpan",w+1);continue}}D=ac(v),k(D,"colSpan",v.colSpan),F.appendChild(D),A=v}}F.hasChildNodes()&&(C?E.parentNode.insertBefore(F,E):az.insertAfter(F,E))}}function am(v,u){u=u||aB().length||1;for(var w=0;w<u;w++){aj(v)}}function ag(v){var w,u;p(i,function(x){if(p(x,function(y,z){if(at(y)&&(w=z,v)){return !1}}),v){return w===b}}),p(i,function(z,y){var A,x,B;z[w]&&(A=z[w].elm,A!=u&&(B=h(A,"colspan"),x=h(A,"rowspan"),1==B?v?(A.parentNode.insertBefore(ac(A),A),aq(w,y,x-1,B)):(az.insertAfter(ac(A),A),aq(w,y,x-1,B)):k(A,"colSpan",A.colSpan+1),u=A))})}function an(v,u){u=u||ah()||1;for(var w=0;w<u;w++){ag(v)}}function ap(u){return m.grep(ax(u),at)}function ax(v){var u=[];return p(v,function(w){p(w,function(x){u.push(x)})}),u}function s(){var u=[];if(aM(aO)){if(1==i[0].length){return}if(ap(i).length==ax(i).length){return}}p(i,function(v){p(v,function(x,w){at(x)&&m.inArray(u,w)===-1&&(p(i,function(z){var y,A=z[w].elm;y=h(A,"colSpan"),y>1?k(A,"colSpan",y-1):az.remove(A)}),u.push(w))})}),aR()}function aa(){function v(x){var w,y;p(x.cells,function(z){var A=h(z,"rowSpan");A>1&&(k(z,"rowSpan",A-1),w=aE(z),aq(w.x,w.y,1,1))}),w=aE(x.cells[0]),p(i[w.y],function(A){var z;A=A.elm,A!=y&&(z=h(A,"rowSpan"),z<=1?az.remove(A):k(A,"rowSpan",z-1),y=A)})}var u;u=aB(),aM(aO)&&u.length==aO.rows.length||(p(u.reverse(),function(w){v(w)}),aR())}function t(){var u=aB();if(!aM(aO)||u.length!=aO.rows.length){return az.remove(u),aR(),u}}function aw(){var u=aB();return p(u,function(v,w){u[w]=aC(v,!0)}),u}function aJ(w,y){var x,v,u;w&&(x=j.splitAt(i,aQ.x,aQ.y,y),v=x.row,m.each(x.cells,aK),u=m.map(w,function(z){return z.cloneNode(!0)}),y||u.reverse(),p(u,function(C){var A,B,z=C.cells.length;for(aL(C),A=0;A<z;A++){B=C.cells[A],aK(B),k(B,"colSpan",1),k(B,"rowSpan",1)}for(A=z;A<ae;A++){C.appendChild(aK(ac(C.cells[z-1])))}for(A=ae;A<z;A++){az.remove(C.cells[A])}y?v.parentNode.insertBefore(C,v):az.insertAfter(C,v)}),aN())}function aE(v){var u;return p(i,function(x,w){return p(x,function(z,y){if(z.elm==v){return u={x:y,y:w},!1}}),!u}),u}function n(u){aQ=aE(u)}function o(){var v,u;return v=u=0,p(i,function(x,w){p(x,function(B,z){var A,y;at(B)&&(B=i[w][z],z>v&&(v=z),w>u&&(u=w),B.real&&(A=B.colspan-1,y=B.rowspan-1,A&&z+A>v&&(v=z+A),y&&w+y>u&&(u=w+y)))})}),{x:v,y:u}}function ak(A){var E,x,v,z,w,C,F,y,B,D;if(r=aE(A),aQ&&r){for(E=Math.min(aQ.x,r.x),x=Math.min(aQ.y,r.y),v=Math.max(aQ.x,r.x),z=Math.max(aQ.y,r.y),w=v,C=z,D=x;D<=z;D++){for(B=E;B<=v;B++){A=i[D][B],A.real&&(F=A.colspan-1,y=A.rowspan-1,F&&B+F>w&&(w=B+F),y&&D+y>C&&(C=D+y))}}for(aN(),D=x;D<=C;D++){for(B=E;B<=w;B++){i[D][B]&&az.setAttrib(i[D][B].elm,"data-mce-selected","1")}}}}function ao(x,v){var y,w,u;y=aE(x),w=y.y*ae+y.x;do{if(w+=v,u=aP(w%ae,Math.floor(w/ae)),!u){break}if(u.elm!=x){return e.select(u.elm,!0),az.isEmpty(u.elm)&&e.collapse(!0),!0}}while(u.elm==x);return !1}function al(u){if(aQ){var v=j.splitAt(i,aQ.x,aQ.y,u);m.each(v.cells,aK)}}var i,ae,aQ,r,e=aH.selection,az=e.dom;aO=aO||az.getParent(e.getStart(!0),"table"),aG(),aD=aD||az.getParent(e.getStart(!0),"th,td"),aD&&(aQ=aE(aD),r=o(),aD=aP(aQ.x,aQ.y)),m.extend(this,{deleteTable:aI,split:ab,merge:ai,insertRow:aj,insertRows:am,insertCol:ag,insertCols:an,splitCols:al,deleteCols:s,deleteRows:aa,cutRows:t,copyRows:aw,pasteRows:aJ,getPos:aE,setStartCell:n,setEndCell:ak,moveRelIdx:ao,refresh:aG})}}),c("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(m,k,q,l,j){var p=l.each,h=j.getSpanVal;return function(n){function e(){function s(B){function w(R,U){var u=R?"previousSibling":"nextSibling",y=n.dom.getParent(U,"tr"),T=y[u];if(T){return O(n,U,T,R),B.preventDefault(),!0}var C=n.dom.getParent(y,"table"),S=y.parentNode,Q=S.nodeName.toLowerCase();if("tbody"===Q||Q===(R?"tfoot":"thead")){var x=F(R,C,S,"tbody");if(null!==x){return K(R,x,U)}}return P(R,y,u,C)}function F(Q,y,S,C){var x=n.dom.select(">"+C,y),R=x.indexOf(S);if(Q&&0===R||!Q&&R===x.length-1){return E(Q,y)}if(R===-1){var u="thead"===S.tagName.toLowerCase()?0:x.length-1;return x[u]}return x[R+(Q?-1:1)]}function E(y,u){var C=y?"thead":"tfoot",x=n.dom.select(">"+C,u);return 0!==x.length?x[0]:null}function K(C,x,y){var u=J(x,C);return u&&O(n,y,u,C),B.preventDefault(),!0}function P(Q,C,y,R){var x=R[y];if(x){return I(x),!0}var u=n.dom.getParent(R,"td,th");if(u){return w(Q,u,B)}var S=J(C,!Q);return I(S),B.preventDefault(),!1}function J(x,u){var y=x&&x[u?"lastChild":"firstChild"];return y&&"BR"===y.nodeName?n.dom.getParent(y,"td,th"):y}function I(u){n.selection.setCursorLocation(u,0)}function A(){return N==m.UP||N==m.DOWN}function D(x){var u=x.selection.getNode(),y=x.dom.getParent(u,"tr");return null!==y}function H(x){for(var u=0,y=x;y.previousSibling;){y=y.previousSibling,u+=h(y,"colspan")}return u}function G(y,u){var C=0,x=0;return p(y.children,function(R,Q){if(C+=h(R,"colspan"),x=Q,C>u){return !1}}),x}function O(R,C,T,Q){var y=H(n.dom.getParent(C,"td,th")),S=G(T,y),x=T.childNodes[S],u=J(x,Q);I(u||x)}function M(y){var u=n.selection.getNode(),C=n.dom.getParent(u,"td,th"),x=n.dom.getParent(y,"td,th");return C&&C!==x&&L(C,x)}function L(x,u){return n.dom.getParent(x,"TABLE")===n.dom.getParent(u,"TABLE")}var N=B.keyCode;if(A()&&D(n)){var z=n.selection.getNode();k.setEditorTimeout(n,function(){M(z)&&w(!B.shiftKey&&N===m.UP,z,B)},0)}}n.on("KeyDown",function(u){s(u)})}function v(){function s(y,w){var z,x=w.ownerDocument,u=x.createRange();return u.setStartBefore(w),u.setEnd(y.endContainer,y.endOffset),z=x.createElement("body"),z.appendChild(u.cloneContents()),0===z.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}n.on("KeyDown",function(w){var y,x,u=n.dom;37!=w.keyCode&&38!=w.keyCode||(y=n.selection.getRng(),x=u.getParent(y.startContainer,"table"),x&&n.getBody().firstChild==x&&s(y,x)&&(y=u.createRng(),y.setStartBefore(x),y.setEndBefore(x),n.selection.setRng(y),w.preventDefault()))})}function i(){n.on("KeyDown SetContent VisualAid",function(){var s;for(s=n.getBody().lastChild;s;s=s.previousSibling){if(3==s.nodeType){if(s.nodeValue.length>0){break}}else{if(1==s.nodeType&&("BR"==s.tagName||!s.getAttribute("data-mce-bogus"))){break}}}s&&"TABLE"==s.nodeName&&(n.settings.forced_root_block?n.dom.add(n.getBody(),n.settings.forced_root_block,n.settings.forced_root_block_attrs,q.ie&&q.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):n.dom.add(n.getBody(),"br",{"data-mce-bogus":"1"}))}),n.on("PreProcess",function(u){var s=u.node.lastChild;s&&("BR"==s.nodeName||1==s.childNodes.length&&("BR"==s.firstChild.nodeName||"\xa0"==s.firstChild.nodeValue))&&s.previousSibling&&"TABLE"==s.previousSibling.nodeName&&n.dom.remove(s)})}function t(){function u(B,D,y,w){var A,x,C,E=3,z=B.dom.getParent(D.startContainer,"TABLE");return z&&(A=z.parentNode),x=D.startContainer.nodeType==E&&0===D.startOffset&&0===D.endOffset&&w&&("TR"==y.nodeName||y==A),C=("TD"==y.nodeName||"TH"==y.nodeName)&&!w,x||C}function s(){var x=n.selection.getRng(),z=n.selection.getNode(),y=n.dom.getParent(x.startContainer,"TD,TH");if(u(n,x,z,y)){y||(y=z);for(var w=y.lastChild;w.lastChild;){w=w.lastChild}3==w.nodeType&&(x.setEnd(w,w.data.length),n.selection.setRng(x))}}n.on("KeyDown",function(){s()}),n.on("MouseDown",function(w){2!=w.button&&s()})}function o(){function s(w){n.selection.select(w,!0),n.selection.collapse(!0)}function u(w){n.$(w).empty(),j.paddCell(w)}n.on("keydown",function(y){if((y.keyCode==m.DELETE||y.keyCode==m.BACKSPACE)&&!y.isDefaultPrevented()){var z,x,w,A;if(z=n.dom.getParent(n.selection.getStart(),"table")){if(x=n.dom.select("td,th",z),w=l.grep(x,function(B){return !!n.dom.getAttrib(B,"data-mce-selected")}),0===w.length){return A=n.dom.getParent(n.selection.getStart(),"td,th"),void (n.selection.isCollapsed()&&A&&n.dom.isEmpty(A)&&(y.preventDefault(),u(A),s(A)))}y.preventDefault(),n.undoManager.transact(function(){x.length==w.length?n.execCommand("mceTableDelete"):(l.each(w,u),s(w[0]))})}}})}function r(){var D=function(u){return u&&"CAPTION"==u.nodeName&&"TABLE"==u.parentNode.nodeName},s=function(F,u){var G=n.selection.getRng(),E=F.ownerDocument.createTextNode("\xa0");G.startOffset?F.insertBefore(E,F.firstChild):F.appendChild(E),u&&(n.selection.select(E,!0),n.selection.collapse(!0))},y=function(u){return(u.keyCode==m.DELETE||u.keyCode==m.BACKSPACE)&&!u.isDefaultPrevented()},w=function(u){return u.firstChild===u.lastChild&&u.firstChild},B=function(u){return u&&3===u.nodeType},x=function(E){var u=w(E);return B(u)&&1===u.data.length?u.data:null},A=function(E){var u=w(E),F=x(E);return u&&!B(u)||F&&!z(F)},C=function(u){return n.dom.isEmpty(u)||z(x(u))},z=function(u){return"\xa0"===u};n.on("keydown",function(u){if(y(u)){var E=n.dom.getParent(n.selection.getStart(),"caption");D(E)&&(q.ie&&(n.selection.isCollapsed()?A(E)&&s(E):(n.undoManager.transact(function(){n.execCommand("Delete"),C(E)&&s(E,!0)}),u.preventDefault())),C(E)&&u.preventDefault())}})}o(),r(),q.webkit&&(e(),t()),q.gecko&&(v(),i()),q.ie>9&&(v(),i())}}),c("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(i,h,j){return function(e,v){function n(l){e.getBody().style.webkitUserSelect="",(l||x)&&(e.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),x=!1)}function B(m,l){return !(!m||!l)&&m===q.getParent(l,"table")}function D(l){var u,r,m=l.target;if(!y&&!k&&m!==z&&(z=m,C&&A)){if(r=q.getParent(m,"td,th"),B(C,r)||(r=q.getParent(C,"td,th")),A===r&&!x){return}if(v(!0),B(C,r)){l.preventDefault(),t||(t=new p(e,C,A),e.getBody().style.webkitUserSelect="none"),t.setEndCell(r),x=!0,u=e.selection.getSel();try{u.removeAllRanges?u.removeAllRanges():u.empty()}catch(p){}}}}var t,A,C,z,y,k,q=e.dom,x=!0,w=function(){A=t=C=z=null,v(!1)};return e.on("SelectionChange",function(l){x&&l.stopImmediatePropagation()},!0),e.on("MouseDown",function(l){2==l.button||y||k||(n(),A=q.getParent(l.target,"td,th"),C=q.getParent(A,"table"))}),e.on("mouseover",D),e.on("remove",function(){q.unbind(e.getDoc(),"mouseover",D),n()}),e.on("MouseUp",function(){function E(u,s){var H=new h(u,u);do{if(3==u.nodeType&&0!==j.trim(u.nodeValue).length){return void (s?p.setStart(u,0):p.setEnd(u,u.nodeValue.length))}if("BR"==u.nodeName){return void (s?p.setStartBefore(u):p.setEndBefore(u))}}while(u=s?H.next():H.prev())}var p,G,l,r,m,F=e.selection;if(A){if(t&&(e.getBody().style.webkitUserSelect=""),G=q.select("td[data-mce-selected],th[data-mce-selected]"),G.length>0){p=q.createRng(),r=G[0],p.setStartBefore(r),p.setEndAfter(r),E(r,1),l=new h(r,q.getParent(G[0],"table"));do{if("TD"==r.nodeName||"TH"==r.nodeName){if(!q.getAttrib(r,"data-mce-selected")){break}m=r}}while(r=l.next());E(m),F.setRng(p)}e.nodeChanged(),w()}}),e.on("KeyUp Drop SetContent",function(l){n("setcontent"==l.type),w(),y=!1}),e.on("ObjectResizeStart ObjectResized",function(l){y="objectresized"!=l.type}),e.on("dragstart",function(){k=!0}),e.on("drop dragend",function(){k=!1}),{clear:n}}}),c("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(i,h){var j=i.each;return function(e){function v(){var l=e.settings.color_picker_callback;if(l){return function(){var m=this;l.call(e,function(o){m.value(o).fire("change")},m.value())}}}function n(l){return{title:"Advanced",type:"form",defaults:{onchange:function(){x(l,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:v()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:v()}]}]}}function z(l){return l?l.replace(/px$/,""):""}function B(l){return/^[0-9]+$/.test(l)&&(l+="px"),l}function t(l){j("left center right".split(" "),function(m){e.formatter.remove("align"+m,{},l)})}function y(l){j("top middle bottom".split(" "),function(m){e.formatter.remove("valign"+m,{},l)})}function A(m,p,o){function l(s,u){return u=u||[],i.each(s,function(C){var r={text:C.text||C.title};C.menu?r.menu=l(C.menu):(r.value=C.value,p&&p(r)),u.push(r)}),u}return l(m,o||[])}function x(p,m,s){var o=m.toJSON(),l=p.parseStyle(o.style);s?(m.find("#borderColor").value(l["border-color"]||"")[0].fire("change"),m.find("#backgroundColor").value(l["background-color"]||"")[0].fire("change")):(l["border-color"]=o.borderColor,l["background-color"]=o.backgroundColor),m.find("#style").value(p.serializeStyle(p.parseStyle(p.serializeStyle(l))))}function w(o,l,p){var m=o.parseStyle(o.getAttrib(p,"style"));m["border-color"]&&(l.borderColor=m["border-color"]),m["background-color"]&&(l.backgroundColor=m["background-color"]),l.style=o.serializeStyle(m)}function k(p,m,o){var l=p.parseStyle(p.getAttrib(m,"style"));j(o,function(r){l[r.name]=r.value}),p.setAttrib(m,"style",p.serializeStyle(p.parseStyle(p.serializeStyle(l))))}var q=this;q.tableProps=function(){q.table(!0)},q.table=function(p){function u(){function C(L,J,K){if("TD"===L.tagName||"TH"===L.tagName){l.setStyle(L,J,K)}else{if(L.children){for(var I=0;I<L.children.length;I++){C(L.children[I],J,K)}}}}var m;x(l,this),G=i.extend(G,this.toJSON()),G["class"]===!1&&delete G["class"],e.undoManager.transact(function(){if(s||(s=e.plugins.table.insertTable(G.cols||1,G.rows||1)),e.dom.setAttribs(s,{style:G.style,"class":G["class"]}),e.settings.table_style_by_css){if(F=[],F.push({name:"border",value:G.border}),F.push({name:"border-spacing",value:B(G.cellspacing)}),k(l,s,F),l.setAttribs(s,{"data-mce-border-color":G.borderColor,"data-mce-cell-padding":G.cellpadding,"data-mce-border":G.border}),s.children){for(var I=0;I<s.children.length;I++){C(s.children[I],"border",G.border),C(s.children[I],"padding",B(G.cellpadding))}}}else{e.dom.setAttribs(s,{border:G.border,cellpadding:G.cellpadding,cellspacing:G.cellspacing})}l.getAttrib(s,"width")&&!e.settings.table_style_by_css?l.setAttrib(s,"width",z(G.width)):l.setStyle(s,"width",B(G.width)),l.setStyle(s,"height",B(G.height)),m=l.select("caption",s)[0],m&&!G.caption&&l.remove(m),!m&&G.caption&&(m=l.create("caption"),m.innerHTML=h.ie?"\xa0":'<br data-mce-bogus="1"/>',s.insertBefore(m,s.firstChild)),t(s),G.align&&e.formatter.apply("align"+G.align,{},s),e.focus(),e.addVisual()})}function o(I,C){function K(N,O){for(var M=0;M<O.length;M++){var L=l.getStyle(O[M],C);if("undefined"==typeof N&&(N=L),N!=L){return""}}return N}var m,J=e.dom.select("td,th",I);return m=K(m,J)}var s,r,H,E,D,F,l=e.dom,G={};p===!0?(s=l.getParent(e.selection.getStart(),"table"),s&&(G={width:z(l.getStyle(s,"width")||l.getAttrib(s,"width")),height:z(l.getStyle(s,"height")||l.getAttrib(s,"height")),cellspacing:z(l.getStyle(s,"border-spacing")||l.getAttrib(s,"cellspacing")),cellpadding:l.getAttrib(s,"data-mce-cell-padding")||l.getAttrib(s,"cellpadding")||o(s,"padding"),border:l.getAttrib(s,"data-mce-border")||l.getAttrib(s,"border")||o(s,"border"),borderColor:l.getAttrib(s,"data-mce-border-color"),caption:!!l.select("caption",s)[0],"class":l.getAttrib(s,"class")},j("left center right".split(" "),function(m){e.formatter.matchNode(s,"align"+m)&&(G.align=m)}))):(r={label:"Cols",name:"cols"},H={label:"Rows",name:"rows"}),e.settings.table_class_list&&(G["class"]&&(G["class"]=G["class"].replace(/\s*mce\-item\-table\s*/g,"")),E={name:"class",type:"listbox",label:"Class",values:A(e.settings.table_class_list,function(m){m.value&&(m.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[m.value]})})})}),D={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:e.settings.table_appearance_options!==!1?[r,H,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,H,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},E]},e.settings.table_advtab!==!1?(w(l,G,s),e.windowManager.open({title:"Table properties",data:G,bodyType:"tabpanel",body:[{title:"General",type:"form",items:D},n(l)],onsubmit:u})):e.windowManager.open({title:"Table properties",data:G,body:D,onsubmit:u})},q.merge=function(m,l){e.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var o=this.toJSON();e.undoManager.transact(function(){m.merge(l,o.cols,o.rows)})}})},q.cell=function(){function F(p,m,G){(1===D.length||G)&&E.setAttrib(p,m,G)}function r(p,m,G){(1===D.length||G)&&E.setStyle(p,m,G)}function l(){x(E,this),u=i.extend(u,this.toJSON()),e.undoManager.transact(function(){j(D,function(m){F(m,"scope",u.scope),F(m,"style",u.style),F(m,"class",u["class"]),r(m,"width",B(u.width)),r(m,"height",B(u.height)),u.type&&m.nodeName.toLowerCase()!==u.type&&(m=E.rename(m,u.type)),1===D.length&&(t(m),y(m)),u.align&&e.formatter.apply("align"+u.align,{},m),u.valign&&e.formatter.apply("valign"+u.valign,{},m)}),e.focus()})}var o,u,s,E=e.dom,D=[];if(D=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),o=e.dom.getParent(e.selection.getStart(),"td,th"),!D.length&&o&&D.push(o),o=o||D[0]){D.length>1?u={width:"",height:"",scope:"","class":"",align:"",style:"",type:o.nodeName.toLowerCase()}:(u={width:z(E.getStyle(o,"width")||E.getAttrib(o,"width")),height:z(E.getStyle(o,"height")||E.getAttrib(o,"height")),scope:E.getAttrib(o,"scope"),"class":E.getAttrib(o,"class")},u.type=o.nodeName.toLowerCase(),j("left center right".split(" "),function(m){e.formatter.matchNode(o,"align"+m)&&(u.align=m)}),j("top middle bottom".split(" "),function(m){e.formatter.matchNode(o,"valign"+m)&&(u.valign=m)}),w(E,u,o)),e.settings.table_cell_class_list&&(s={name:"class",type:"listbox",label:"Class",values:A(e.settings.table_cell_class_list,function(m){m.value&&(m.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[m.value]})})})});var C={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},s]};e.settings.table_cell_advtab!==!1?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:u,body:[{title:"General",type:"form",items:C},n(E)],onsubmit:l}):e.windowManager.open({title:"Cell properties",data:u,body:C,onsubmit:l})}},q.row=function(){function H(p,m,I){(1===F.length||I)&&D.setAttrib(p,m,I)}function r(p,m,I){(1===F.length||I)&&D.setStyle(p,m,I)}function C(){var p,m,I;x(D,this),G=i.extend(G,this.toJSON()),e.undoManager.transact(function(){var J=G.type;j(F,function(K){H(K,"scope",G.scope),H(K,"style",G.style),H(K,"class",G["class"]),r(K,"height",B(G.height)),J!==K.parentNode.nodeName.toLowerCase()&&(p=D.getParent(K,"table"),m=K.parentNode,I=D.select(J,p)[0],I||(I=D.create(J),p.firstChild?p.insertBefore(I,p.firstChild):p.appendChild(I)),I.appendChild(K),m.hasChildNodes()||D.remove(m)),1===F.length&&t(K),G.align&&e.formatter.apply("align"+G.align,{},K)}),e.focus()})}var l,o,u,s,G,E,D=e.dom,F=[];l=e.dom.getParent(e.selection.getStart(),"table"),o=e.dom.getParent(e.selection.getStart(),"td,th"),j(l.rows,function(m){j(m.cells,function(p){if(D.getAttrib(p,"data-mce-selected")||p==o){return F.push(m),!1}})}),u=F[0],u&&(F.length>1?G={height:"",scope:"","class":"",align:"",type:u.parentNode.nodeName.toLowerCase()}:(G={height:z(D.getStyle(u,"height")||D.getAttrib(u,"height")),scope:D.getAttrib(u,"scope"),"class":D.getAttrib(u,"class")},G.type=u.parentNode.nodeName.toLowerCase(),j("left center right".split(" "),function(m){e.formatter.matchNode(u,"align"+m)&&(G.align=m)}),w(D,G,u)),e.settings.table_row_class_list&&(s={name:"class",type:"listbox",label:"Class",values:A(e.settings.table_row_class_list,function(m){m.value&&(m.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[m.value]})})})}),E={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},s]},e.settings.table_row_advtab!==!1?e.windowManager.open({title:"Row properties",data:G,bodyType:"tabpanel",body:[{title:"General",type:"form",items:E},n(D)],onsubmit:C}):e.windowManager.open({title:"Row properties",data:G,body:E,onsubmit:C}))}}}),c("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(i,j){var h;return function(av){function ao(l,k){return{index:l,y:av.dom.getPos(k).y}}function aE(l,k){return{index:l,y:av.dom.getPos(k).y+k.offsetHeight}}function ak(l,k){return{index:l,x:av.dom.getPos(k).x}}function ar(l,k){return{index:l,x:av.dom.getPos(k).x+k.offsetWidth}}function aB(){var k=av.getBody().dir;return"rtl"===k}function aj(){return av.inline}function aA(){return aj?av.getBody().ownerDocument.body:av.getBody()}function az(l,k){return aB()?ar(l,k):ak(l,k)}function an(l,k){return aB()?ak(l,k):ar(l,k)}function ap(l,k){return ay(l,"width")/ay(k,"width")*100}function ay(m,k){var o=av.dom.getStyle(m,k,!0),l=parseInt(o,10);return l}function aw(l){var k=ay(l,"width"),m=ay(l.parentElement,"width");return k/m*100}function ai(l,k){var m=ay(l,"width");return k/m*100}function aD(l,k){var m=ay(l.parentElement,"width");return k/m*100}function af(q,m,u){for(var p=[],l=1;l<u.length;l++){var s=u[l].element;p.push(q(l-1,s))}var k=u[u.length-1];return p.push(m(u.length-1,k.element)),p}function ag(){var k=av.dom.select("."+bj,aA());i.each(k,function(l){av.dom.remove(l)})}function a8(k){ag(),a9(k)}function ah(v,x,p,k,u,m,w,y){var q={"data-mce-bogus":"all","class":bj+" "+v,unselectable:"on","data-mce-resize":!1,style:"cursor: "+x+"; margin: 0; padding: 0; position: absolute; left: "+p+"px; top: "+k+"px; height: "+u+"px; width: "+m+"px; "};return q[w]=y,q}function aU(k,m,l){i.each(k,function(v){var q=l.x,w=v.y-aV/2,p=aV,u=m;av.dom.add(aA(),"div",ah(ab,bd,q,w,p,u,bc,v.index))})}function at(k,m,l){i.each(k,function(v){var q=v.x-aV/2,w=l.y,p=m,u=aV;av.dom.add(aA(),"div",ah(ac,aN,q,w,p,u,bi,v.index))})}function aO(k){return i.map(k.rows,function(l){var m=i.map(l.cells,function(p){var o=p.hasAttribute("rowspan")?parseInt(p.getAttribute("rowspan"),10):1,q=p.hasAttribute("colspan")?parseInt(p.getAttribute("colspan"),10):1;return{element:p,rowspan:o,colspan:q}});return{element:l,cells:m}})}function aF(p){function k(o,l){return o+","+l}function v(o,l){return z[k(o,l)]}function m(){var l=[];return i.each(q,function(o){l=l.concat(o.cells)}),l}function x(){return q}var z={},q=[],w=0,y=0;return i.each(p,function(u,l){var s=[];i.each(u.cells,function(D){for(var F=0;z[k(l,F)]!==b;){F++}for(var A={element:D.element,colspan:D.colspan,rowspan:D.rowspan,rowIndex:l,colIndex:F},o=0;o<D.colspan;o++){for(var E=0;E<D.rowspan;E++){var B=l+E,C=F+o;z[k(B,C)]=A,w=Math.max(w,B+1),y=Math.max(y,C+1)}}s.push(A)}),q.push({element:u.element,cells:s})}),{grid:{maxRows:w,maxCols:y},getAt:v,getAllCells:m,getAllRows:x}}function a5(m,k){for(var o=[],l=m;l<k;l++){o.push(l)}return o}function aM(p,l,s){for(var m,k=p(),q=0;q<k.length;q++){l(k[q])&&(m=k[q])}return m?m:s()}function aP(k){var m=a5(0,k.grid.maxCols),l=a5(0,k.grid.maxRows);return i.map(m,function(q){function u(){for(var x=[],v=0;v<l.length;v++){var w=k.getAt(v,q);w&&w.colIndex===q&&x.push(w)}return x}function p(o){return 1===o.colspan}function s(){for(var v,o=0;o<l.length;o++){if(v=k.getAt(o,q)){return v}}return null}return aM(u,p,s)})}function ba(k){var m=a5(0,k.grid.maxCols),l=a5(0,k.grid.maxRows);return i.map(l,function(s){function q(){for(var w=[],v=0;v<m.length;v++){var x=k.getAt(s,v);x&&x.rowIndex===s&&w.push(x)}return w}function p(o){return 1===o.rowspan}function u(){return k.getAt(s,0)}return aM(q,p,u)})}function a9(v){var o=aO(v),x=aF(o),q=ba(x),p=aP(x),k=av.dom.getPos(v),w=q.length>0?af(ao,aE,q):[],m=p.length>0?af(az,an,p):[];aU(w,v.offsetWidth,k),at(m,v.offsetHeight,k)}function aR(w,B,p,k){if(B<0||B>=w.length-1){return""}var v=w[B];if(v){v={value:v,delta:0}}else{for(var m=w.slice(0,B).reverse(),z=0;z<m.length;z++){m[z]&&(v={value:m[z],delta:z+1})}}var C=w[B+1];if(C){C={value:C,delta:1}}else{for(var q=w.slice(B+1),y=0;y<q.length;y++){q[y]&&(C={value:q[y],delta:y+1})}}var A=C.delta-v.delta,x=Math.abs(C.value-v.value)/A;return p?x/ay(k,"width")*100:x}function a6(l,k){var m=av.dom.getStyle(l,k);return m||(m=av.dom.getAttrib(l,k)),m||(m=av.dom.getStyle(l,k,!0)),m}function aW(p,l,s){var m=a6(p,"width"),k=parseInt(m,10),q=l?ap(p,s):ay(p,"width");return(l&&!aK(m)||!l&&!bh(m))&&(k=0),!isNaN(k)&&k>0?k:q}function aX(x,p,k){for(var u=aP(x),m=i.map(u,function(l){return az(l.colIndex,l.element).x}),w=[],y=0;y<u.length;y++){var q=u[y].element.hasAttribute("colspan")?parseInt(u[y].element.getAttribute("colspan"),10):1,v=q>1?aR(m,y):aW(u[y].element,p,k);v=v?v:t,w.push(v)}return w}function a0(l){var k=a6(l,"height"),m=parseInt(k,10);return aK(k)&&(m=0),!isNaN(m)&&m>0?m:ay(l,"height")}function aS(p){for(var v=ba(p),u=i.map(v,function(l){return ao(l.rowIndex,l.element).y}),o=[],m=0;m<v.length;m++){var q=v[m].element.hasAttribute("rowspan")?parseInt(v[m].element.getAttribute("rowspan"),10):1,k=q>1?aR(u,m):a0(v[m].element);k=k?k:bg,o.push(k)}return o}function a2(A,p,k,v,m){function y(l){return i.map(l,function(){return 0})}function B(){var o;if(m){o=[100-w[0]]}else{var l=Math.max(v,w[0]+k);o=[l-w[0]]}return o}function q(G,E){var J,H=y(w.slice(0,G)),F=y(w.slice(E+1));if(k>=0){var C=Math.max(v,w[E]-k);J=H.concat([k,C-w[E]]).concat(F)}else{var I=Math.max(v,w[G]+k),D=w[G]-I;J=H.concat([I-w[G],D]).concat(F)}return J}function x(C,l){var E,D=y(w.slice(0,l));if(k>=0){E=D.concat([k])}else{var u=Math.max(v,w[l]+k);E=D.concat([u-w[l]])}return E}var z,w=A.slice(0);return z=0===A.length?[]:1===A.length?B():0===p?q(0,1):p>0&&p<A.length-1?q(p,p+1):p===A.length-1?x(p-1,p):[]}function a4(o,l,p){for(var m=0,k=o;k<l;k++){m+=p[k]}return m}function ad(k,m){var l=k.getAllCells();return i.map(l,function(p){var o=a4(p.colIndex,p.colIndex+p.colspan,m);return{element:p.element,width:o,colspan:p.colspan}})}function aJ(k,m){var l=k.getAllCells();return i.map(l,function(p){var o=a4(p.rowIndex,p.rowIndex+p.rowspan,m);return{element:p.element,height:o,rowspan:p.rowspan}})}function aL(k,m){var l=k.getAllRows();return i.map(l,function(p,o){return{element:p.element,height:m[o]}})}function aK(k){return bn.test(k)}function bh(k){return e.test(k)}function au(B,I,F){function H(l,m){i.each(l,function(o){av.dom.setStyle(o.element,"width",o.width+m),av.dom.setAttrib(o.element,"width",null)})}function P(){return F<A.grid.maxCols-1?aw(B):aw(B)+aD(B,I)}function D(){return F<A.grid.maxCols-1?ay(B,"width"):ay(B,"width")+I}function K(l,p,m){F!=A.grid.maxCols-1&&m||(av.dom.setStyle(B,"width",l+p),av.dom.setAttrib(B,"width",null))}for(var O=aO(B),A=aF(O),M=aK(B.width)||aK(B.style.width),L=aX(A,M,B),G=M?ai(B,I):I,J=a2(L,F,G,t,M,B),q=[],v=0;v<J.length;v++){q.push(J[v]+L[v])}var E=ad(A,q),z=M?"%":"px",k=M?P():D();av.undoManager.transact(function(){H(E,z),K(k,z,M)})}function am(A,p,k){for(var m=aO(A),y=aF(m),B=aS(y),q=[],x=0,z=0;z<B.length;z++){q.push(z===k?p+B[z]:B[z]),x+=x[z]}var w=aJ(y,q),v=aL(y,q);av.undoManager.transact(function(){i.each(v,function(l){av.dom.setStyle(l.element,"height",l.height+"px"),av.dom.setAttrib(l.element,"height",null)}),i.each(w,function(l){av.dom.setStyle(l.element,"height",l.height+"px"),av.dom.setAttrib(l.element,"height",null)}),av.dom.setStyle(A,"height",x+"px"),av.dom.setAttrib(A,"height",null)})}function aH(){bb=setTimeout(function(){aZ()},200)}function aI(){clearTimeout(bb)}function aY(){var k=document.createElement("div");return k.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),k.setAttribute("data-mce-bogus","all"),k}function a3(l,k){av.dom.bind(l,"mouseup",function(){aZ()}),av.dom.bind(l,"mousemove",function(m){aI(),bf&&k(m)}),av.dom.bind(l,"mouseout",function(){aH()})}function aZ(){if(av.dom.remove(bk),bf){av.dom.removeClass(al,r),bf=!1;var p,l;if(aQ(al)){var u=parseInt(av.dom.getAttrib(al,bm),10),q=av.dom.getPos(al).x;p=parseInt(av.dom.getAttrib(al,bi),10),l=aB()?u-q:q-u,Math.abs(l)>=1&&au(h,l,p)}else{if(n(al)){var k=parseInt(av.dom.getAttrib(al,aT),10),m=av.dom.getPos(al).y;p=parseInt(av.dom.getAttrib(al,bc),10),l=m-k,Math.abs(l)>=1&&am(h,l,p)}}a8(h),av.nodeChanged()}}function aG(l,k){bk=bk?bk:aY(),bf=!0,av.dom.addClass(l,r),al=l,a3(bk,k),av.dom.add(aA(),bk)}function aQ(k){return av.dom.hasClass(k,ac)}function n(k){return av.dom.hasClass(k,ab)}function a7(l){aC=aC!==b?aC:l.clientX;var m=l.clientX-aC;aC=l.clientX;var k=av.dom.getPos(al).x;av.dom.setStyle(al,"left",k+m+"px")}function a1(l){aa=aa!==b?aa:l.clientY;var m=l.clientY-aa;aa=l.clientY;var k=av.dom.getPos(al).y;av.dom.setStyle(al,"top",k+m+"px")}function bl(k){aC=b,aG(k,a7)}function aq(k){aa=b,aG(k,a1)}function ax(m){var l=m.target,q=av.getBody();if(av.$.contains(q,h)||h===q){if(aQ(l)){m.preventDefault();var p=av.dom.getPos(l).x;av.dom.setAttrib(l,bm,p),bl(l)}else{if(n(l)){m.preventDefault();var k=av.dom.getPos(l).y;av.dom.setAttrib(l,aT,k),aq(l)}else{ag()}}}}var bb,bf,bk,al,aC,aa,bj="mce-resize-bar",ab="mce-resize-bar-row",bd="row-resize",bc="data-row",aT="data-initial-top",ac="mce-resize-bar-col",aN="col-resize",bi="data-col",bm="data-initial-left",aV=4,t=10,bg=10,r="mce-resize-bar-dragging",bn=new RegExp(/(\d+(\.\d+)?%)/),e=new RegExp(/px|em/);return av.on("init",function(){av.dom.bind(aA(),"mousedown",ax)}),av.on("ObjectResized",function(k){var m=k.target;if("TABLE"===m.nodeName){var l=[];i.each(m.rows,function(o){i.each(o.cells,function(q){var p=av.dom.getStyle(q,"width",!0);l.push({cell:q,width:p})})}),i.each(l,function(o){av.dom.setStyle(o.cell,"width",o.width),av.dom.setAttrib(o.cell,"width",null)})}}),av.on("mouseover",function(l){if(!bf){var k=av.dom.getParent(l.target,"table");("TABLE"===l.target.nodeName||k)&&(h=k,a8(k))}}),av.on("keydown",function(k){switch(k.keyCode){case j.LEFT:case j.RIGHT:case j.UP:case j.DOWN:ag()}}),av.on("remove",function(){ag(),av.dom.unbind(aA(),"mousedown",ax)}),{adjustWidth:au,adjustHeight:am,clearBars:ag,drawBars:a9,determineDeltas:a2,getTableGrid:aF,getTableDetails:aO,getWidths:aX,getPixelHeights:aS,isPercentageBasedSize:aK,isPixelBasedSize:bh,recalculateWidths:ad,recalculateCellHeights:aJ,recalculateRowHeights:aL}}}),c("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(q,y,k,h,p,j,w,z,m){function v(B){function M(l){return function(){B.execCommand(l)}}function E(O,C){var P,N,o,l;for(o='<table id="__mce"><tbody>',P=0;P<C;P++){for(o+="<tr>",N=0;N<O;N++){o+="<td>"+(z.ie&&z.ie<10?"&nbsp;":"<br>")+"</td>"}o+="</tr>"}return o+="</tbody></table>",B.undoManager.transact(function(){B.insertContent(o),l=B.dom.get("__mce"),B.dom.setAttrib(l,"id",null),B.$("tr",l).each(function(R,Q){B.fire("newrow",{node:Q}),B.$("th,td",Q).each(function(T,S){B.fire("newcell",{node:S})})}),B.dom.setAttribs(l,B.settings.table_default_attributes||{}),B.dom.setStyles(l,B.settings.table_default_styles||{})}),l}function K(C,l,N){function o(){var S,Q,P,R={},O=0;Q=B.dom.select("td[data-mce-selected],th[data-mce-selected]"),S=Q[0],S||(S=B.selection.getStart()),N&&Q.length>0?(x(Q,function(T){return R[T.parentNode.parentNode.nodeName]=1}),x(R,function(T){O+=T}),P=1!==O):P=!B.dom.getParent(S,l),C.disabled(P),B.selection.selectorChanged(l,function(T){C.disabled(!T)})}B.initialized?o():B.on("init",o)}function J(){K(this,"table")}function I(){K(this,"td,th")}function A(){K(this,"td,th",!0)}function D(){var o="";o='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var l=0;l<10;l++){o+="<tr>";for(var C=0;C<10;C++){o+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*l+C)+'" href="#" data-mce-x="'+C+'" data-mce-y="'+l+'"></a></td>'}o+="</tr>"}return o+="</table>",o+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function H(P,T,C){var o,O,R,U,N,Q=C.getEl().getElementsByTagName("table")[0],S=C.isRtl()||"tl-tr"==C.parent().rel;for(Q.nextSibling.innerHTML=P+1+" x "+(T+1),S&&(P=9-P),O=0;O<10;O++){for(o=0;o<10;o++){U=Q.rows[O].childNodes[o].firstChild,N=(S?o>=P:o<=P)&&O<=T,B.dom.toggleClass(U,"mce-active",N),N&&(R=U)}}return R.parentNode}function G(){B.addButton("tableprops",{title:"Table properties",onclick:F.tableProps,icon:"table"}),B.addButton("tabledelete",{title:"Delete table",onclick:M("mceTableDelete")}),B.addButton("tablecellprops",{title:"Cell properties",onclick:M("mceTableCellProps")}),B.addButton("tablemergecells",{title:"Merge cells",onclick:M("mceTableMergeCells")}),B.addButton("tablesplitcells",{title:"Split cell",onclick:M("mceTableSplitCells")}),B.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:M("mceTableInsertRowBefore")}),B.addButton("tableinsertrowafter",{title:"Insert row after",onclick:M("mceTableInsertRowAfter")}),B.addButton("tabledeleterow",{title:"Delete row",onclick:M("mceTableDeleteRow")}),B.addButton("tablerowprops",{title:"Row properties",onclick:M("mceTableRowProps")}),B.addButton("tablecutrow",{title:"Cut row",onclick:M("mceTableCutRow")}),B.addButton("tablecopyrow",{title:"Copy row",onclick:M("mceTableCopyRow")}),B.addButton("tablepasterowbefore",{title:"Paste row before",onclick:M("mceTablePasteRowBefore")}),B.addButton("tablepasterowafter",{title:"Paste row after",onclick:M("mceTablePasteRowAfter")}),B.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:M("mceTableInsertColBefore")}),B.addButton("tableinsertcolafter",{title:"Insert column after",onclick:M("mceTableInsertColAfter")}),B.addButton("tabledeletecol",{title:"Delete column",onclick:M("mceTableDeleteCol")})}function t(o){var l=B.dom.is(o,"table")&&B.getBody().contains(o);return l}function L(){var l=B.settings.table_toolbar;""!==l&&l!==!1&&(l||(l="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),B.addContextToolbar(t,l))}function n(){return u}function r(l){u=l}var u,s,i=this,F=new h(B);!B.settings.object_resizing||B.settings.table_resize_bars===!1||B.settings.object_resizing!==!0&&"table"!==B.settings.object_resizing||(s=p(B)),B.settings.table_grid===!1?B.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:F.table}):B.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(l){l.aria&&(this.parent().hideAll(),l.stopImmediatePropagation(),F.table())},onshow:function(){H(0,0,this.menu.items()[0])},onhide:function(){var l=this.menu.items()[0].getEl().getElementsByTagName("a");B.dom.removeClass(l,"mce-active"),B.dom.addClass(l[0],"mce-active")},menu:[{type:"container",html:D(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(C){var l,N,o=C.target;"A"==o.tagName.toUpperCase()&&(l=parseInt(o.getAttribute("data-mce-x"),10),N=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(l=9-l),l===this.lastX&&N===this.lastY||(H(l,N,C.control),this.lastX=l,this.lastY=N))},onclick:function(o){var l=this;"A"==o.target.tagName.toUpperCase()&&(o.preventDefault(),o.stopPropagation(),l.parent().cancel(),B.undoManager.transact(function(){E(l.lastX+1,l.lastY+1)}),B.addVisual())}}]}),B.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:J,onclick:F.tableProps}),B.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:J,cmd:"mceTableDelete"}),B.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:M("mceTableCellProps"),onPostRender:I},{text:"Merge cells",onclick:M("mceTableMergeCells"),onPostRender:A},{text:"Split cell",onclick:M("mceTableSplitCells"),onPostRender:I}]}),B.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:M("mceTableInsertRowBefore"),onPostRender:I},{text:"Insert row after",onclick:M("mceTableInsertRowAfter"),onPostRender:I},{text:"Delete row",onclick:M("mceTableDeleteRow"),onPostRender:I},{text:"Row properties",onclick:M("mceTableRowProps"),onPostRender:I},{text:"-"},{text:"Cut row",onclick:M("mceTableCutRow"),onPostRender:I},{text:"Copy row",onclick:M("mceTableCopyRow"),onPostRender:I},{text:"Paste row before",onclick:M("mceTablePasteRowBefore"),onPostRender:I},{text:"Paste row after",onclick:M("mceTablePasteRowAfter"),onPostRender:I}]}),B.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:M("mceTableInsertColBefore"),onPostRender:I},{text:"Insert column after",onclick:M("mceTableInsertColAfter"),onPostRender:I},{text:"Delete column",onclick:M("mceTableDeleteCol"),onPostRender:I}]});var e=[];x("inserttable tableprops deletetable | cell row column".split(" "),function(l){"|"==l?e.push({text:"-"}):e.push(B.menuItems[l])}),B.addButton("table",{type:"menubutton",title:"Table",menu:e}),z.isIE||B.on("click",function(l){l=l.target,"TABLE"===l.nodeName&&(B.selection.select(l),B.nodeChanged())}),i.quirks=new y(B),B.on("Init",function(){i.cellSelection=new k(B,function(l){l&&s&&s.clearBars()}),i.resizeBars=s}),B.on("PreInit",function(){B.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(o,l){for(var C=o.length;C--;){o[C].attr(l,null)}})}),x({mceTableSplitCells:function(l){l.split()},mceTableMergeCells:function(o){var l;l=B.dom.getParent(B.selection.getStart(),"th,td"),B.dom.select("td[data-mce-selected],th[data-mce-selected]").length?o.merge():F.merge(o,l)},mceTableInsertRowBefore:function(l){l.insertRows(!0)},mceTableInsertRowAfter:function(l){l.insertRows()},mceTableInsertColBefore:function(l){l.insertCols(!0)},mceTableInsertColAfter:function(l){l.insertCols()},mceTableDeleteCol:function(l){l.deleteCols()},mceTableDeleteRow:function(l){l.deleteRows()},mceTableCutRow:function(l){u=l.cutRows()},mceTableCopyRow:function(l){u=l.copyRows()},mceTablePasteRowBefore:function(l){l.pasteRows(u,!0)},mceTablePasteRowAfter:function(l){l.pasteRows(u)},mceSplitColsBefore:function(l){l.splitCols(!0)},mceSplitColsAfter:function(l){l.splitCols(!1)},mceTableDelete:function(l){s&&s.clearBars(),l.deleteTable()}},function(l,o){B.addCommand(o,function(){var C=new q(B);C&&(l(C),B.execCommand("mceRepaint"),i.cellSelection.clear())})}),x({mceInsertTable:F.table,mceTableProps:function(){F.table(!0)},mceTableRowProps:F.row,mceTableCellProps:F.cell},function(o,l){B.addCommand(l,function(C,N){o(N)})}),G(),L(),B.settings.table_tab_navigation!==!1&&B.on("keydown",function(o){var N,C,l;9==o.keyCode&&(N=B.dom.getParent(B.selection.getStart(),"th,td"),N&&(o.preventDefault(),C=new q(B),l=o.shiftKey?-1:1,B.undoManager.transact(function(){!C.moveRelIdx(N,l)&&l>0&&(C.insertRow(),C.refresh(),C.moveRelIdx(N,l))})))}),i.insertTable=E,i.setClipboardRows=r,i.getClipboardRows=n}var x=j.each;m.add("table",v)})}(window);