tinymce.PluginManager.add("fullscreen",function(p){function y(){var f,c,l=window,d=document,a=d.body;return a.offsetWidth&&(f=a.offsetWidth,c=a.offsetHeight),l.innerWidth&&l.innerHeight&&(f=l.innerWidth,c=l.innerHeight),{w:f,h:c}}function h(){var a=tinymce.DOM.getViewPort();return{x:a.x,y:a.y}}function b(a){scrollTo(a.x,a.y)}function k(){function e(){m.setStyle(l,"height",y().h-(c.clientHeight-l.clientHeight))}var n,c,l,f,d=document.body,a=document.documentElement;q=!q,c=p.getContainer(),n=c.style,l=p.getContentAreaContainer().firstChild,f=l.style,q?(x=h(),g=f.width,w=f.height,f.width=f.height="100%",j=n.width,v=n.height,n.width=n.height="",m.addClass(d,"mce-fullscreen"),m.addClass(a,"mce-fullscreen"),m.addClass(c,"mce-fullscreen"),m.bind(window,"resize",e),e(),z=e):(f.width=g,f.height=w,j&&(n.width=j),v&&(n.height=v),m.removeClass(d,"mce-fullscreen"),m.removeClass(a,"mce-fullscreen"),m.removeClass(c,"mce-fullscreen"),m.unbind(window,"resize",z),b(x)),p.fire("FullscreenStateChanged",{state:q})}var g,w,z,j,v,x,q=!1,m=tinymce.DOM;if(!p.settings.inline){return p.on("init",function(){p.addShortcut("Ctrl+Shift+F","",k)}),p.on("remove",function(){z&&m.unbind(window,"resize",z)}),p.addCommand("mceFullScreen",k),p.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){k(),p.focus()},onPostRender:function(){var a=this;p.on("FullscreenStateChanged",function(c){a.active(c.state)})},context:"view"}),p.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:k,onPostRender:function(){var a=this;p.on("FullscreenStateChanged",function(c){a.active(c.state)})}}),{isFullscreen:function(){return q}}}});