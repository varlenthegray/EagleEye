tinymce.PluginManager.add("fullscreen",function(c){function o(){var h,k,g=window,j=document,b=j.body;return b.offsetWidth&&(h=b.offsetWidth,k=b.offsetHeight),g.innerWidth&&g.innerHeight&&(h=g.innerWidth,k=g.innerHeight),{w:h,h:k}}function i(){var b=tinymce.DOM.getViewPort();return{x:b.x,y:b.y}}function r(b){scrollTo(b.x,b.y)}function e(){function j(){d.setStyle(g,"height",o().h-(m.clientHeight-g.clientHeight))}var p,m,g,h,k=document.body,b=document.documentElement;a=!a,m=c.getContainer(),p=m.style,g=c.getContentAreaContainer().firstChild,h=g.style,a?(s=i(),l=h.width,t=h.height,h.width=h.height="100%",f=p.width,u=p.height,p.width=p.height="",d.addClass(k,"mce-fullscreen"),d.addClass(b,"mce-fullscreen"),d.addClass(m,"mce-fullscreen"),d.bind(window,"resize",j),j(),n=j):(h.width=l,h.height=t,f&&(p.width=f),u&&(p.height=u),d.removeClass(k,"mce-fullscreen"),d.removeClass(b,"mce-fullscreen"),d.removeClass(m,"mce-fullscreen"),d.unbind(window,"resize",n),r(s)),c.fire("FullscreenStateChanged",{state:a})}var l,t,n,f,u,s,a=!1,d=tinymce.DOM;if(!c.settings.inline){return c.on("init",function(){c.addShortcut("Ctrl+Shift+F","",e)}),c.on("remove",function(){n&&d.unbind(window,"resize",n)}),c.addCommand("mceFullScreen",e),c.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){e(),c.focus()},onPostRender:function(){var b=this;c.on("FullscreenStateChanged",function(g){b.active(g.state)})},context:"view"}),c.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:e,onPostRender:function(){var b=this;c.on("FullscreenStateChanged",function(g){b.active(g.state)})}}),{isFullscreen:function(){return a}}}});