!function(){var l={},o=function(h){for(var c=l[h],k=c.deps,f=c.defn,b=k.length,g=new Array(b),j=0;j<b;++j){g[j]=m(k[j])}var d=f.apply(null,g);if(void 0===d){throw"module ["+h+"] returned undefined"}c.instance=d},e=function(b,c,d){if("string"!=typeof b){throw"module id must be a string"}if(void 0===c){throw"no dependencies for "+b}if(void 0===d){throw"no definition function for "+b}l[b]={deps:c,defn:d,instance:void 0}},m=function(c){var b=l[c];if(void 0===b){throw"module ["+c+"] was undefined"}return void 0===b.instance&&o(c),b.instance},p=function(b,d){for(var f=b.length,c=new Array(f),g=0;g<f;++g){c[g]=m(b[g])}d.apply(null,c)},i={};i.bolt={module:{api:{define:e,require:p,demand:m}}};var a=e,n=function(c,b){a(c,[],function(){return b})};n("1",tinymce.PluginManager),n("6",tinymce.util.Delay),n("e",tinymce.util.Tools),n("9",tinymce.html.SaxParser),n("a",tinymce.html.Schema),n("b",tinymce.dom.DOMUtils.DOM),a("h",[],function(){var b=function(d,f){if(d){for(var c=0;c<d.length;c++){if(f.indexOf(d[c].filter)!==-1){return d[c]}}}};return{getVideoScriptMatch:b}}),a("c",[],function(){var d=function(g){return g.replace(/px$/,"")},c=function(g){return/^[0-9.]+$/.test(g)?g+"px":g},b=function(g){return function(h){return h?d(h.style[g]):""}},f=function(g){return function(j,h){j&&(j.style[g]=c(h))}};return{getMaxWidth:b("maxWidth"),getMaxHeight:b("maxHeight"),setMaxWidth:f("maxWidth"),setMaxHeight:f("maxHeight")}}),a("7",["e","9","a","b","h","c"],function(r,d,c,h,s,f){var j=function(q){return h.getAttrib(q,"data-ephox-embed-iri")},b=function(u){var q=h.createFragment(u);return""!==j(q.firstChild)},t=function(u,q){var v={};return new d({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(y,x){if(v.source1||"param"!==y||(v.source1=x.map.movie),"iframe"!==y&&"object"!==y&&"embed"!==y&&"video"!==y&&"audio"!==y||(v.type||(v.type=y),v=r.extend(x.map,v)),"script"===y){var w=s.getVideoScriptMatch(u,x.map.src);if(!w){return}v={type:"script",source1:x.map.src,width:w.width,height:w.height}}"source"===y&&(v.source1?v.source2||(v.source2=x.map.src):v.source1=x.map.src),"img"!==y||v.poster||(v.poster=x.map.src)}}).parse(q),v.source1=v.source1||v.src||v.data,v.source2=v.source2||"",v.poster=v.poster||"",v},k=function(v){var u=h.createFragment(v),q=u.firstChild;return{type:"ephox-embed-iri",source1:j(q),source2:"",poster:"",width:f.getMaxWidth(q),height:f.getMaxHeight(q)}},g=function(u,q){return b(q)?k(q):t(u,q)};return{htmlToData:g}}),n("8",tinymce.html.Writer),a("4",["8","9","a","b","c"],function(r,d,c,h,s){var f=function(w,v){var y,x,q,z;for(y in v){if(q=""+v[y],w.map[y]){for(x=w.length;x--;){z=w[x],z.name===y&&(q?(w.map[y]=q,z.value=q):(delete w.map[y],w.splice(x,1)))}}else{q&&(w.push({name:y,value:q}),w.map[y]=q)}}},j=function(u){var v=new r,q=new d(v);return q.parse(u),v.getContent()},b=function(q,y,z){var v,x=new r,w=0;return new d({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(u){x.comment(u)},cdata:function(u){x.cdata(u)},text:function(A,u){x.text(A,u)},start:function(B,A,u){switch(B){case"video":case"object":case"embed":case"img":case"iframe":f(A,{width:y.width,height:y.height})}if(z){switch(B){case"video":f(A,{poster:y.poster,src:""}),y.source2&&f(A,{src:""});break;case"iframe":f(A,{src:y.source1});break;case"source":if(w++,w<=2&&(f(A,{src:y["source"+w],type:y["source"+w+"mime"]}),!y["source"+w])){return}break;case"img":if(!y.poster){return}v=!0}}x.start(B,A,u)},end:function(A){if("video"===A&&z){for(var u=1;u<=2;u++){if(y["source"+u]){var C=[];C.map={},w<u&&(f(C,{src:y["source"+u],type:y["source"+u+"mime"]}),x.start("source",C,!0))}}}if(y.poster&&"object"===A&&z&&!v){var B=[];B.map={},f(B,{src:y.poster,width:y.width,height:y.height}),x.start("img",B,!0)}x.end(A)}},new c({})).parse(q),x.getContent()},t=function(u){var q=h.createFragment(u);return""!==h.getAttrib(q.firstChild,"data-ephox-embed-iri")},k=function(v,u){var w=h.createFragment(v),q=w.firstChild;return s.setMaxWidth(q,u.width),s.setMaxHeight(q,u.height),j(q.outerHTML)},g=function(v,u,q){return t(v)?k(v,u):b(v,u,q)};return{updateHtml:g}}),a("l",[],function(){var b=function(c){var f={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},g=c.toLowerCase().split(".").pop(),d=f[g];return d?d:""};return{guess:b}}),a("m",[],function(){var b=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}];return{urlPatterns:b}}),a("j",["l","7","m","h","4","e"],function(g,j,d,h,b,f){var c=function(q,v){var u="",k=f.extend({},v);if(!k.source1&&(f.extend(k,j.htmlToData(q.settings.media_scripts,k.embed)),!k.source1)){return""}if(k.source2||(k.source2=""),k.poster||(k.poster=""),k.source1=q.convertURL(k.source1,"source"),k.source2=q.convertURL(k.source2,"source"),k.source1mime=g.guess(k.source1),k.source2mime=g.guess(k.source2),k.poster=q.convertURL(k.poster,"poster"),f.each(d.urlPatterns,function(r){var z,A,t=r.regex.exec(k.source1);if(t){for(A=r.url,z=0;t[z];z++){A=A.replace("$"+z,function(){return t[z]})}k.source1=A,k.type=r.type,k.allowFullscreen=r.allowFullscreen,k.width=k.width||r.w,k.height=k.height||r.h}}),k.embed){u=b.updateHtml(k.embed,k,!0)}else{var w=h.getVideoScriptMatch(q.settings.media_scripts,k.source1);if(w&&(k.type="script",k.width=w.width,k.height=w.height),k.width=k.width||300,k.height=k.height||150,f.each(k,function(t,r){k[r]=q.dom.encode(t)}),"iframe"===k.type){var s=k.allowFullscreen?' allowFullscreen="1"':"";u+='<iframe src="'+k.source1+'" width="'+k.width+'" height="'+k.height+'"'+s+"></iframe>"}else{"application/x-shockwave-flash"===k.source1mime?(u+='<object data="'+k.source1+'" width="'+k.width+'" height="'+k.height+'" type="application/x-shockwave-flash">',k.poster&&(u+='<img src="'+k.poster+'" width="'+k.width+'" height="'+k.height+'" />'),u+="</object>"):k.source1mime.indexOf("audio")!==-1?q.settings.audio_template_callback?u=q.settings.audio_template_callback(k):u+='<audio controls="controls" src="'+k.source1+'">'+(k.source2?'\n<source src="'+k.source2+'"'+(k.source2mime?' type="'+k.source2mime+'"':"")+" />\n":"")+"</audio>":"script"===k.type?u+='<script src="'+k.source1+'"><\/script>':u=q.settings.video_template_callback?q.settings.video_template_callback(k):'<video width="'+k.width+'" height="'+k.height+'"'+(k.poster?' poster="'+k.poster+'"':"")+' controls="controls">\n<source src="'+k.source1+'"'+(k.source1mime?' type="'+k.source1mime+'"':"")+" />\n"+(k.source2?'<source src="'+k.source2+'"'+(k.source2mime?' type="'+k.source2mime+'"':"")+" />\n":"")+"</video>"}}return u};return{dataToHtml:c}}),n("k",tinymce.util.Promise),a("d",["j","k"],function(h,d){var f=function(k,j,q){var r={};return new d(function(s,u){var t=function(v){return v.html&&(r[k.source1]=v),s({url:k.source1,html:v.html?v.html:j(k)})};r[k.source1]?t(r[k.source1]):q({url:k.source1},t,u)})},b=function(j,k){return new d(function(q){q({html:k(j),url:j.source1})})},c=function(j){return function(k){return h.dataToHtml(j,k)}},g=function(q,j){var k=q.settings.media_url_resolver;return k?f(j,c(q),k):b(j,c(q))};return{getEmbedHtml:g}}),n("f",tinymce.Env),a("g",[],function(){var h=function(k,j){k.state.set("oldVal",k.value()),j.state.set("oldVal",j.value())},d=function(k,r){var j=k.find("#width")[0],q=k.find("#height")[0],s=k.find("#constrain")[0];j&&q&&s&&r(j,q,s.checked())},f=function(q,t,j){var r=q.state.get("oldVal"),A=t.state.get("oldVal"),s=q.value(),k=t.value();j&&r&&A&&s&&k&&(s!==r?(k=Math.round(s/r*k),isNaN(k)||t.value(k)):(s=Math.round(k/A*s),isNaN(s)||q.value(s))),h(q,t)},b=function(j){d(j,h)},c=function(j){d(j,f)},g=function(k){var j=function(){k(function(q){c(q)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:j,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:j,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}};return{createUi:g,syncSize:b,updateSize:c}}),a("2",["6","7","4","d","c","e","f","g"],function(g,k,O,f,u,Q,b,h){var v=b.ie&&b.ie<=8?"onChange":"onInput",c=function(q){return function(x){var w=x&&x.msg?"Media embed handler error: "+x.msg:"Media embed handler threw unknown error.";q.notificationManager.open({type:"error",text:w})}},s=function(x){var w=x.selection.getNode(),q=w.getAttribute("data-ephox-embed-iri");return q?{source1:q,"data-ephox-embed-iri":q,width:u.getMaxWidth(w),height:u.getMaxHeight(w)}:w.getAttribute("data-mce-object")?k.htmlToData(x.settings.media_scripts,x.serializer.serialize(w,{selection:!0})):{}},d=function(w){var q=w.selection.getNode();if(q.getAttribute("data-mce-object")||q.getAttribute("data-ephox-embed-iri")){return w.selection.getContent()}},j=function(q,w){return function(z){var A=z.html,x=q.find("#embed")[0],y=Q.extend(k.htmlToData(w.settings.media_scripts,A),{source1:z.url});q.fromJSON(y),x&&(x.value(A),h.updateSize(q))}},R=function(z,x){var y,q,w=z.dom.select("img[data-mce-object]");for(y=0;y<x.length;y++){for(q=w.length-1;q>=0;q--){x[y]===w[q]&&w.splice(q,1)}}z.selection.select(w[0])},N=function(x,w){var q=x.dom.select("img[data-mce-object]");x.insertContent(w),R(x,q),x.nodeChanged()},r=function(q,x){var w=q.toJSON();w.embed=O.updateHtml(w.embed,w),w.embed?N(x,w.embed):f.getEmbedHtml(x,w).then(function(y){N(x,y.html)})["catch"](c(x))},t=function(w,q){Q.each(q,function(y,x){w.find("#"+x).value(y)})},P=function(q){var w,A,y=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){f.getEmbedHtml(q,w.toJSON()).then(j(w,q))["catch"](c(q))},1)},onchange:function(E){f.getEmbedHtml(q,w.toJSON()).then(j(w,q))["catch"](c(q)),t(w,E.meta)},onbeforecall:function(E){E.meta=w.toJSON()}}],x=[],z=function(E){E(w),A=w.toJSON(),w.find("#embed").value(O.updateHtml(A.embed,A))};if(q.settings.media_alt_source!==!1&&x.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),q.settings.media_poster!==!1&&x.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),q.settings.media_dimensions!==!1){var C=h.createUi(z);y.push(C)}A=s(q);var D={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:d(q),multiline:!0,rows:5,label:"Source"},B=function(){A=Q.extend({},k.htmlToData(q.settings.media_scripts,this.value())),this.parent().parent().fromJSON(A)};D[v]=B,w=q.windowManager.open({title:"Insert/edit media",data:A,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},D]},{title:"Advanced",type:"form",items:x}],onSubmit:function(){h.updateSize(w),r(w,q)}}),h.syncSize(w)};return{showDialog:P}}),a("3",["e","8","9","a"],function(g,d,f,b){var c=function(j,k){if(j.settings.media_filter_html===!1){return k}var h,t=new d;return new f({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(q){t.comment(q)},cdata:function(q){t.cdata(q)},text:function(q,r){t.text(q,r)},start:function(s,q,r){if(h=!0,"script"!==s&&"noscript"!==s){for(var x=0;x<q.length;x++){if(0===q[x].name.indexOf("on")){return}"style"===q[x].name&&(q[x].value=j.dom.serializeStyle(j.dom.parseStyle(q[x].value),s))}t.start(s,q,r),h=!1}},end:function(q){h||t.end(q)}},new b({})).parse(k),t.getContent()};return{sanitize:c}}),n("i",tinymce.html.Node),a("5",["3","h","i","f"],function(j,g,b,d){var k=function(u,s){var q,t=s.name;return q=new b("img",1),q.shortEnded=!0,h(u,s,q),q.attr({width:s.attr("width")||"300",height:s.attr("height")||("audio"===t?"30":"150"),style:s.attr("style"),src:d.transparentSrc,"data-mce-object":t,"class":"mce-object mce-object-"+t}),q},c=function(w,t){var q,s,u,v=t.name;return q=new b("span",1),q.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":v,"class":"mce-preview-object mce-object-"+v}),h(w,t,q),s=new b(v,1),s.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:t.attr("width")||"300",height:t.attr("height")||("audio"===v?"30":"150"),frameborder:"0"}),u=new b("span",1),u.attr("class","mce-shim"),q.append(s),q.append(u),q},h=function(x,s,u){var y,t,q,w,v;for(q=s.attributes,w=q.length;w--;){y=q[w].name,t=q[w].value,"width"!==y&&"height"!==y&&"style"!==y&&("data"!==y&&"src"!==y||(t=x.convertURL(t,y)),u.attr("data-mce-p-"+y,t))}v=s.firstChild&&s.firstChild.value,v&&(u.attr("data-mce-html",escape(j.sanitize(x,v))),u.firstChild=null)},f=function(q){for(;q=q.parent;){if(q.attr("data-ephox-embed-iri")){return !0}}return !1},r=function(q){return function(t){for(var s,u,v=t.length;v--;){s=t[v],s.parent&&(s.parent.attr("data-mce-object")||("script"!==s.name||(u=g.getVideoScriptMatch(q.settings.media_scripts,s.attr("src"))))&&(u&&(u.width&&s.attr("width",u.width.toString()),u.height&&s.attr("height",u.height.toString())),"iframe"===s.name&&q.settings.media_live_embeds!==!1&&d.ceFalse?f(s)||s.replace(c(q,s)):f(s)||s.replace(k(q,s))))}}};return{createPreviewIframeNode:c,createPlaceholderNode:k,placeHolderConverter:r}}),a("0",["1","2","3","4","5"],function(h,d,f,b,c){var g=function(j){j.on("ResolveName",function(k){var q;1===k.target.nodeType&&(q=k.target.getAttribute("data-mce-object"))&&(k.name=q)}),j.on("preInit",function(){var k=j.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(r){k[r]=new RegExp("</"+r+"[^>]*>","gi")});var q=j.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(r){q[r]={}}),j.parser.addNodeFilter("iframe,video,audio,object,embed,script",c.placeHolderConverter(j)),j.serializer.addAttributeFilter("data-mce-object",function(N,L){for(var H,J,r,M,I,s,O,t,u=N.length;u--;){if(H=N[u],H.parent){for(O=H.attr(L),J=new tinymce.html.Node(O,1),"audio"!==O&&"script"!==O&&(t=H.attr("class"),t&&t.indexOf("mce-preview-object")!==-1?J.attr({width:H.firstChild.attr("width"),height:H.firstChild.attr("height")}):J.attr({width:H.attr("width"),height:H.attr("height")})),J.attr({style:H.attr("style")}),M=H.attributes,r=M.length;r--;){var K=M[r].name;0===K.indexOf("data-mce-p-")&&J.attr(K.substr(11),M[r].value)}"script"===O&&J.attr("type","text/javascript"),I=H.attr("data-mce-html"),I&&(s=new tinymce.html.Node("#text",3),s.raw=!0,s.value=f.sanitize(j,unescape(I)),J.append(s)),H.replace(J)}}})}),j.on("click keyup",function(){var k=j.selection.getNode();k&&j.dom.hasClass(k,"mce-preview-object")&&j.dom.getAttrib(k,"data-mce-selected")&&k.setAttribute("data-mce-selected","2")}),j.on("ObjectSelected",function(k){var q=k.target.getAttribute("data-mce-object");"audio"!==q&&"script"!==q||k.preventDefault()}),j.on("objectResized",function(q){var s,k=q.target;k.getAttribute("data-mce-object")&&(s=k.getAttribute("data-mce-html"),s&&(s=unescape(s),k.setAttribute("data-mce-html",escape(b.updateHtml(s,{width:q.width,height:q.height})))))}),this.showDialog=function(){d.showDialog(j)},j.addButton("media",{tooltip:"Insert/edit media",onclick:this.showDialog,stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),j.addMenuItem("media",{icon:"media",text:"Media",onclick:this.showDialog,context:"insert",prependToContext:!0}),j.on("setContent",function(){j.$("span.mce-preview-object").each(function(q,k){var r=j.$(k);0===r.find("span.mce-shim",k).length&&r.append('<span class="mce-shim"></span>')})}),j.addCommand("mceMedia",this.showDialog)};return h.add("media",g),function(){}}),m("0")()}();