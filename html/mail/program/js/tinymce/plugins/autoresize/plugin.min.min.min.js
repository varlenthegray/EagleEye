tinymce.PluginManager.add("autoresize",function(k){function e(){return k.plugins.fullscreen&&k.plugins.fullscreen.isFullscreen()}function i(r){var u,b,g,C,d,D,a,p,m,c,f,s,v=tinymce.DOM;if(b=k.getDoc()){if(g=b.body,C=b.documentElement,d=h.autoresize_min_height,!g||r&&"setcontent"===r.type&&r.initial||e()){return void (g&&C&&(g.style.overflowY="auto",C.style.overflowY="auto"))}a=k.dom.getStyle(g,"margin-top",!0),p=k.dom.getStyle(g,"margin-bottom",!0),m=k.dom.getStyle(g,"padding-top",!0),c=k.dom.getStyle(g,"padding-bottom",!0),f=k.dom.getStyle(g,"border-top-width",!0),s=k.dom.getStyle(g,"border-bottom-width",!0),D=g.offsetHeight+parseInt(a,10)+parseInt(p,10)+parseInt(m,10)+parseInt(c,10)+parseInt(f,10)+parseInt(s,10),(isNaN(D)||D<=0)&&(D=tinymce.Env.ie?g.scrollHeight:tinymce.Env.webkit&&0===g.clientHeight?0:g.offsetHeight),D>h.autoresize_min_height&&(d=D),h.autoresize_max_height&&D>h.autoresize_max_height?(d=h.autoresize_max_height,g.style.overflowY="auto",C.style.overflowY="auto"):(g.style.overflowY="hidden",C.style.overflowY="hidden",g.scrollTop=0),d!==j&&(u=d-j,v.setStyle(k.iframeElement,"height",d+"px"),j=d,tinymce.isWebKit&&u<0&&i(r))}}function l(b,c,a){tinymce.util.Delay.setEditorTimeout(k,function(){i({}),b--?l(b,c,a):a&&a()},c)}var h=k.settings,j=0;k.settings.inline||(h.autoresize_min_height=parseInt(k.getParam("autoresize_min_height",k.getElement().offsetHeight),10),h.autoresize_max_height=parseInt(k.getParam("autoresize_max_height",0),10),k.on("init",function(){var b,a;b=k.getParam("autoresize_overflow_padding",1),a=k.getParam("autoresize_bottom_margin",50),b!==!1&&k.dom.setStyles(k.getBody(),{paddingLeft:b,paddingRight:b}),a!==!1&&k.dom.setStyles(k.getBody(),{paddingBottom:a})}),k.on("nodechange setcontent keyup FullscreenStateChanged",i),k.getParam("autoresize_on_init",!0)&&k.on("init",function(){l(20,100,function(){l(5,1000)})}),k.addCommand("mceAutoResize",i))});