var CONTROL_KEY=1;var SHIFT_KEY=2;var CONTROL_SHIFT_KEY=3;function roundcube_browser(){var a=navigator;this.agent=a.userAgent;this.agent_lc=a.userAgent.toLowerCase();this.name=a.appName;this.vendor=a.vendor?a.vendor:"";this.vendver=a.vendorSub?parseFloat(a.vendorSub):0;this.product=a.product?a.product:"";this.platform=String(a.platform).toLowerCase();this.lang=a.language?a.language.substring(0,2):a.browserLanguage?a.browserLanguage.substring(0,2):a.systemLanguage?a.systemLanguage.substring(0,2):"en";this.win=this.platform.indexOf("win")>=0;this.mac=this.platform.indexOf("mac")>=0;this.linux=this.platform.indexOf("linux")>=0;this.unix=this.platform.indexOf("unix")>=0;this.dom=document.getElementById?true:false;this.dom2=document.addEventListener&&document.removeEventListener;this.edge=this.agent_lc.indexOf(" edge/")>0;this.webkit=!this.edge&&this.agent_lc.indexOf("applewebkit")>0;this.ie=(document.all&&!window.opera)||(this.win&&this.agent_lc.indexOf("trident/")>0);if(window.opera){this.opera=true;this.vendver=opera.version()}else{if(!this.ie&&!this.edge){this.chrome=this.agent_lc.indexOf("chrome")>0;this.opera=this.webkit&&this.agent.indexOf(" OPR/")>0;this.safari=!this.chrome&&!this.opera&&(this.webkit||this.agent_lc.indexOf("safari")>0);this.konq=this.agent_lc.indexOf("konqueror")>0;this.mz=this.dom&&!this.chrome&&!this.safari&&!this.konq&&!this.opera&&this.agent.indexOf("Mozilla")>=0;this.iphone=this.safari&&(this.agent_lc.indexOf("iphone")>0||this.agent_lc.indexOf("ipod")>0);this.ipad=this.safari&&this.agent_lc.indexOf("ipad")>0}}if(!this.vendver){this.vendver=/(opera|opr|khtml|chrome|safari|applewebkit|msie)(\s|\/)([0-9\.]+)/.test(this.agent_lc)?parseFloat(RegExp.$3):0;if(!this.vendver){this.vendver=/rv:([0-9\.]+)/.test(this.agent)?parseFloat(RegExp.$1):0}}if(this.safari&&(/;\s+([a-z]{2})-[a-z]{2}\)/.test(this.agent_lc))){this.lang=RegExp.$1}this.tablet=/ipad|android|xoom|sch-i800|playbook|tablet|kindle/i.test(this.agent_lc);this.mobile=/iphone|ipod|blackberry|iemobile|opera mini|opera mobi|mobile/i.test(this.agent_lc);this.touch=this.mobile||this.tablet;this.pointer=typeof window.PointerEvent=="function";this.cookies=a.cookieEnabled;this.xmlhttp_test=function(){var b=new Function("try{var o=new ActiveXObject('Microsoft.XMLHTTP');return true;}catch(err){return false;}");this.xmlhttp=window.XMLHttpRequest||(("ActiveXObject" in window)&&b());return this.xmlhttp};this.set_html_class=function(){var b=" js";if(this.ie){b+=" ie ie"+parseInt(this.vendver)}else{if(this.opera){b+=" opera"}else{if(this.konq){b+=" konqueror"}else{if(this.safari){b+=" chrome"}else{if(this.chrome){b+=" chrome"}else{if(this.mz){b+=" mozilla"}}}}}}if(this.iphone){b+=" iphone"}else{if(this.ipad){b+=" ipad"}else{if(this.webkit){b+=" webkit"}}}if(this.mobile){b+=" mobile"}if(this.tablet){b+=" tablet"}if(document.documentElement){document.documentElement.className+=b}}}var rcube_event={get_target:function(a){a=a||window.event;return a&&a.target?a.target:a.srcElement},get_keycode:function(a){a=a||window.event;return a&&a.keyCode?a.keyCode:(a&&a.which?a.which:0)},get_button:function(a){a=a||window.event;return a&&a.button!==undefined?a.button:(a&&a.which?a.which:0)},get_modifier:function(b){var a=0;b=b||window.event;if(bw.mac&&b){a+=(b.metaKey&&CONTROL_KEY)+(b.shiftKey&&SHIFT_KEY)}else{if(b){a+=(b.ctrlKey&&CONTROL_KEY)+(b.shiftKey&&SHIFT_KEY)}}return a},get_mouse_pos:function(a){if(!a){a=window.event}var c=(a.pageX)?a.pageX:a.clientX,b=(a.pageY)?a.pageY:a.clientY;if(document.body&&document.all){c+=document.body.scrollLeft;b+=document.body.scrollTop}if(a._offset){c+=a._offset.left;b+=a._offset.top}return{x:c,y:b}},add_listener:function(b){if(!b.object||!b.method){return}if(!b.element){b.element=document}if(!b.object._rc_events){b.object._rc_events={}}var a=b.event+"*"+b.method;if(!b.object._rc_events[a]){b.object._rc_events[a]=function(c){return b.object[b.method](c)}}if(b.element.addEventListener){b.element.addEventListener(b.event,b.object._rc_events[a],false)}else{if(b.element.attachEvent){b.element.detachEvent("on"+b.event,b.object._rc_events[a]);b.element.attachEvent("on"+b.event,b.object._rc_events[a])}else{b.element["on"+b.event]=b.object._rc_events[a]}}},remove_listener:function(b){if(!b.element){b.element=document}var a=b.event+"*"+b.method;if(b.object&&b.object._rc_events&&b.object._rc_events[a]){if(b.element.removeEventListener){b.element.removeEventListener(b.event,b.object._rc_events[a],false)}else{if(b.element.detachEvent){b.element.detachEvent("on"+b.event,b.object._rc_events[a])}else{b.element["on"+b.event]=null}}}},cancel:function(a){var b=a?a:window.event;if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}if(b.stopPropagation){b.stopPropagation()}b.cancelBubble=true;return false},is_keyboard:function(a){return a&&((a.type&&String(a.type).match(/^key/))||(!a.pageX&&(a.pageY||0)<=0&&!a.clientX&&(a.clientY||0)<=0))},keyboard_only:function(a){return rcube_event.is_keyboard(a)?true:rcube_event.cancel(a)},touchevent:function(a){return{pageX:a.pageX,pageY:a.pageY,offsetX:a.pageX-a.target.offsetLeft,offsetY:a.pageY-a.target.offsetTop,target:a.target,istouch:true}}};function rcube_event_engine(){this._events={}}rcube_event_engine.prototype={addEventListener:function(b,c,a){if(!this._events){this._events={}}if(!this._events[b]){this._events[b]=[]}this._events[b].push({func:c,obj:a?a:window});return this},removeEventListener:function(d,b,c){if(c===undefined){c=window}for(var a,e=0;this._events&&this._events[d]&&e<this._events[d].length;e++){if((a=this._events[d][e])&&a.func==b&&a.obj==c){this._events[d][e]=null}}},triggerEvent:function(f,d){var g,b;if(d===undefined){d=this}else{if(typeof d==="object"){d.event=f}}if(!this._event_exec){this._event_exec={}}if(this._events&&this._events[f]&&!this._event_exec[f]){this._event_exec[f]=true;for(var a=0;a<this._events[f].length;a++){if((b=this._events[f][a])){if(typeof b.func==="function"){g=b.func.call?b.func.call(b.obj,d):b.func(d)}else{if(typeof b.obj[b.func]==="function"){g=b.obj[b.func](d)}}if(g!==undefined&&!g){break}}}if(g&&g.event){try{delete g.event}catch(c){$(g).removeAttr("event")}}}delete this._event_exec[f];if(d.event){try{delete d.event}catch(c){$(d).removeAttr("event")}}return g}};function rcube_check_email(q,c,n){if(!q){return n?0:false}if(n){c=true}var j="[^\\x0d\\x22\\x5c\\x80-\\xff]",f="[^\\x0d\\x5b-\\x5d\\x80-\\xff]",a="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",p="\\x5c[\\x00-\\x7f]",e="\\x22("+j+"|"+p+")*\\x22",t="\\[(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])(.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])){3}\\]",s="\\[IPv6:[0-9a-f:.]+\\]",r="("+t+")|("+s+")",o="(("+r+")|(([^@\\x2e]+\\x2e)+([^\\x00-\\x40\\x5b-\\x60\\x7b-\\x7f]{2,}|xn--[a-z0-9]{2,})))",d=["\\u0645\\u062b\\u0627\\u0644\\x2e\\u0625\\u062e\\u062a\\u0628\\u0627\\u0631","\\u4f8b\\u5b50\\x2e\\u6d4b\\u8bd5","\\u4f8b\\u5b50\\x2e\\u6e2c\\u8a66","\\u03c0\\u03b1\\u03c1\\u03ac\\u03b4\\u03b5\\u03b9\\u03b3\\u03bc\\u03b1\\x2e\\u03b4\\u03bf\\u03ba\\u03b9\\u03bc\\u03ae","\\u0909\\u0926\\u093e\\u0939\\u0930\\u0923\\x2e\\u092a\\u0930\\u0940\\u0915\\u094d\\u0937\\u093e","\\u4f8b\\u3048\\x2e\\u30c6\\u30b9\\u30c8","\\uc2e4\\ub840\\x2e\\ud14c\\uc2a4\\ud2b8","\\u0645\\u062b\\u0627\\u0644\\x2e\\u0622\\u0632\\u0645\\u0627\\u06cc\\u0634\u06cc","\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440\\x2e\\u0438\\u0441\\u043f\\u044b\\u0442\\u0430\\u043d\\u0438\\u0435","\\u0b89\\u0ba4\\u0bbe\\u0bb0\\u0ba3\\u0bae\\u0bcd\\x2e\\u0baa\\u0bb0\\u0bbf\\u0b9f\\u0bcd\\u0b9a\\u0bc8","\\u05d1\\u05f2\\u05b7\\u05e9\\u05e4\\u05bc\\u05d9\\u05dc\\x2e\\u05d8\\u05e2\\u05e1\\u05d8"],k="mailtest\\x40("+d.join("|")+")",i="("+a+"|"+e+")",m="[,;\\s\\n]",g=i+"(\\x2e"+i+")*",b="(("+g+"\\x40"+o+")|("+k+"))",l=n?"ig":"i",h=c?new RegExp("(^|<|"+m+")"+b+"($|>|"+m+")",l):new RegExp("^"+b+"$","i");if(n){return q.match(h).length}return h.test(q)}function rcube_clone_object(a){var b={};for(var c in a){if(a[c]&&typeof a[c]==="object"){b[c]=rcube_clone_object(a[c])}else{b[c]=a[c]}}return b}function urlencode(a){if(window.encodeURIComponent){return encodeURIComponent(a).replace("*","%2A")}return escape(a).replace("+","%2B").replace("*","%2A").replace("/","%2F").replace("@","%40")}function rcube_find_object(g,b){var c,h,a,i;if(!b){b=document}if(b.getElementById){if(a=b.getElementById(g)){return a}}if(!a&&b.getElementsByName&&(i=b.getElementsByName(g))){a=i[0]}if(!a&&b.all){a=b.all[g]}if(!a&&b.images.length){a=b.images[g]}if(!a&&b.forms.length){for(h=0;h<b.forms.length;h++){if(b.forms[h].name==g){a=b.forms[h]}else{if(b.forms[h].elements[g]){a=b.forms[h].elements[g]}}}}if(!a&&b.layers){if(b.layers[g]){a=b.layers[g]}for(c=0;!a&&c<b.layers.length;c++){a=rcube_find_object(g,b.layers[c].document)}}return a}function rcube_mouse_is_over(d,a){var c=rcube_event.get_mouse_pos(d),b=$(a).offset();return(c.x>=b.left)&&(c.x<(b.left+a.offsetWidth))&&(c.y>=b.top)&&(c.y<(b.top+a.offsetHeight))}function setCookie(g,b,e,d,a,c){var f=g+"="+escape(b)+(e?"; expires="+e.toGMTString():"")+(d?"; path="+d:"")+(a?"; domain="+a:"")+(c?"; secure":"");document.cookie=f}function getCookie(a){var e=document.cookie,c=a+"=",b=e.indexOf("; "+c);if(b==-1){b=e.indexOf(c);if(b!=0){return null}}else{b+=2}var d=e.indexOf(";",b);if(d==-1){d=e.length}return unescape(e.substring(b+c.length,d))}roundcube_browser.prototype.set_cookie=setCookie;roundcube_browser.prototype.get_cookie=getCookie;var bw=new roundcube_browser();bw.set_html_class();RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};Date.prototype.getStdTimezoneOffset=function(){var b=12,a=new Date(null,b,1),c=a.getTimezoneOffset();while(--b){a.setUTCMonth(b);if(c!=a.getTimezoneOffset()){return Math.max(c,a.getTimezoneOffset())}}return c};if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.slice(a,b.length)===b}}jQuery.last=function(a){return a&&a.length?a[a.length-1]:undefined};jQuery.fn.placeholder=function(a){return this.each(function(){$(this).prop({title:a,placeholder:a})})};var rcube_parse_query=function(h){if(!h){return{}}var c={},a,g,d,f=/([^&=]+)=?([^&]*)/g,b=/\+/g,i=function(e){return decodeURIComponent(e.replace(b," "))};h=h.replace(/\?/,"");while(a=f.exec(h)){g=i(a[1]);d=i(a[2]);if(g.substring(g.length-2)==="[]"){g=g.substring(0,g.length-2);(c[g]||(c[g]=[])).push(d)}else{c[g]=d}}return c};var Base64=(function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var d=function(h){h=h.replace(/\r\n/g,"\n");var g="";for(var f=0;f<h.length;f++){var e=h.charCodeAt(f);if(e<128){g+=String.fromCharCode(e)}else{if(e>127&&e<2048){g+=String.fromCharCode((e>>6)|192);g+=String.fromCharCode((e&63)|128)}else{g+=String.fromCharCode((e>>12)|224);g+=String.fromCharCode(((e>>6)&63)|128);g+=String.fromCharCode((e&63)|128)}}}return g};var b=function(g){var e=0,j="",f=0,k=0,h=0;while(e<g.length){f=g.charCodeAt(e);if(f<128){j+=String.fromCharCode(f);e++}else{if(f>191&&f<224){k=g.charCodeAt(e+1);j+=String.fromCharCode(((f&31)<<6)|(k&63));e+=2}else{k=g.charCodeAt(e+1);h=g.charCodeAt(e+2);j+=String.fromCharCode(((f&15)<<12)|((k&63)<<6)|(h&63));e+=3}}}return j};var a={encode:function(o){o=d(o);if(typeof(window.btoa)==="function"){try{return btoa(o)}catch(n){}}var l,g,e,j,f,q,p,k=0,h="",m=o.length;while(k<m){l=o.charCodeAt(k++);g=o.charCodeAt(k++);e=o.charCodeAt(k++);j=l>>2;f=((l&3)<<4)|(g>>4);q=((g&15)<<2)|(e>>6);p=e&63;if(isNaN(g)){q=p=64}else{if(isNaN(e)){p=64}}h=h+c.charAt(j)+c.charAt(f)+c.charAt(q)+c.charAt(p)}return h},decode:function(o){if(typeof(window.atob)==="function"){try{return b(atob(o))}catch(n){}}var l,g,e,j,f,q,p,m,k=0,h="";o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");m=o.length;while(k<m){j=c.indexOf(o.charAt(k++));f=c.indexOf(o.charAt(k++));q=c.indexOf(o.charAt(k++));p=c.indexOf(o.charAt(k++));l=(j<<2)|(f>>4);g=((f&15)<<4)|(q>>2);e=((q&3)<<6)|p;h=h+String.fromCharCode(l);if(q!=64){h=h+String.fromCharCode(g)}if(p!=64){h=h+String.fromCharCode(e)}}return b(h)}};return a})();