function rcmail_archive(b){if(rcmail_is_archive()){return}var a=rcmail.selection_post_data();if(!a._uid){return}rcmail.show_contentframe(false);rcmail.enable_command(rcmail.env.message_commands,false);rcmail.enable_command("plugin.archive",false);rcmail.with_selected_messages("move",a,null,"plugin.move2archive")}function rcmail_is_archive(){return rcmail.env.mailbox==rcmail.env.archive_folder||rcmail.env.mailbox.startsWith(rcmail.env.archive_folder+rcmail.env.delimiter)}if(window.rcmail){rcmail.addEventListener("init",function(b){rcmail.register_command("plugin.archive",rcmail_archive,rcmail.env.uid&&!rcmail_is_archive());if(rcmail.message_list){rcmail.message_list.addEventListener("select",function(c){rcmail.enable_command("plugin.archive",c.get_selection().length>0&&!rcmail_is_archive())})}var a;if(rcmail.env.archive_folder&&(a=rcmail.get_folder_li(rcmail.env.archive_folder,"",true))){$(a).addClass("archive")}})};