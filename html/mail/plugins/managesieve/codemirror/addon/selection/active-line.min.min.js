(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(p){var k="CodeMirror-activeline";var l="CodeMirror-activeline-background";var m="CodeMirror-activeline-gutter";p.defineOption("styleActiveLine",false,function(d,a,c){var b=c&&c!=p.Init;if(a&&!b){d.state.activeLines=[];n(d,d.listSelections());d.on("beforeSelectionChange",i)}else{if(!a&&b){d.off("beforeSelectionChange",i);o(d);delete d.state.activeLines}}});function o(b){for(var a=0;a<b.state.activeLines.length;a++){b.removeLineClass(b.state.activeLines[a],"wrap",k);b.removeLineClass(b.state.activeLines[a],"background",l);b.removeLineClass(b.state.activeLines[a],"gutter",m)}}function j(b,c){if(b.length!=c.length){return false}for(var a=0;a<b.length;a++){if(b[a]!=c[a]){return false}}return true}function n(d,b){var e=[];for(var f=0;f<b.length;f++){var a=b[f];if(!a.empty()){continue}var c=d.getLineHandleVisualStart(a.head.line);if(e[e.length-1]!=c){e.push(c)}}if(j(d.state.activeLines,e)){return}d.operation(function(){o(d);for(var g=0;g<e.length;g++){d.addLineClass(e[g],"wrap",k);d.addLineClass(e[g],"background",l);d.addLineClass(e[g],"gutter",m)}d.state.activeLines=e})}function i(b,a){n(b,a.ranges)}});