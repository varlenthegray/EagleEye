(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(h){h.defineOption("selectionPointer",false,function(c,a){var b=c.state.selectionPointer;if(b){h.off(c.getWrapperElement(),"mousemove",b.mousemove);h.off(c.getWrapperElement(),"mouseout",b.mouseout);h.off(window,"scroll",b.windowScroll);c.off("cursorActivity",k);c.off("scroll",k);c.state.selectionPointer=null;c.display.lineDiv.style.cursor=""}if(a){b=c.state.selectionPointer={value:typeof a=="string"?a:"default",mousemove:function(d){l(c,d)},mouseout:function(d){j(c,d)},windowScroll:function(){k(c)},rects:null,mouseX:null,mouseY:null,willUpdate:false};h.on(c.getWrapperElement(),"mousemove",b.mousemove);h.on(c.getWrapperElement(),"mouseout",b.mouseout);h.on(window,"scroll",b.windowScroll);c.on("cursorActivity",k);c.on("scroll",k)}});function l(c,b){var a=c.state.selectionPointer;if(b.buttons==null?b.which:b.buttons){a.mouseX=a.mouseY=null}else{a.mouseX=b.clientX;a.mouseY=b.clientY}g(c)}function j(c,b){if(!c.getWrapperElement().contains(b.relatedTarget)){var a=c.state.selectionPointer;a.mouseX=a.mouseY=null;g(c)}}function k(a){a.state.selectionPointer.rects=null;g(a)}function g(a){if(!a.state.selectionPointer.willUpdate){a.state.selectionPointer.willUpdate=true;setTimeout(function(){i(a);a.state.selectionPointer.willUpdate=false},50)}}function i(e){var a=e.state.selectionPointer;if(!a){return}if(a.rects==null&&a.mouseX!=null){a.rects=[];if(e.somethingSelected()){for(var b=e.display.selectionDiv.firstChild;b;b=b.nextSibling){a.rects.push(b.getBoundingClientRect())}}}var f=false;if(a.mouseX!=null){for(var d=0;d<a.rects.length;d++){var c=a.rects[d];if(c.left<=a.mouseX&&c.right>=a.mouseX&&c.top<=a.mouseY&&c.bottom>=a.mouseY){f=true}}}var o=f?a.value:"";if(e.display.lineDiv.style.cursor!=o){e.display.lineDiv.style.cursor=o}}});