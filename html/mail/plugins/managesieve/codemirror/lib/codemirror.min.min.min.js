(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.CodeMirror=a())}(this,(function(){var e9=navigator.userAgent;var d3=navigator.platform;var cB=/gecko\/\d/i.test(e9);var bQ=/MSIE \d/.test(e9);var A=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e9);var cm=bQ||A;var du=cm&&(bQ?document.documentMode||6:A[1]);var aX=/WebKit\//.test(e9);var eU=aX&&/Qt\/\d+\.\d+/.test(e9);var cU=/Chrome\//.test(e9);var fj=/Opera\//.test(e9);var d=/Apple Computer/.test(navigator.vendor);var eq=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e9);var d5=/PhantomJS/.test(e9);var ga=/AppleWebKit/.test(e9)&&/Mobile\/\w+/.test(e9);var eu=ga||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e9);var dP=ga||/Mac/.test(d3);var fN=/\bCrOS\b/.test(e9);var N=/win/i.test(d3);var az=fj&&e9.match(/Version\/(\d*\.\d*)/);if(az){az=Number(az[1])}if(az&&az>=15){fj=false;aX=true}var aQ=dP&&(eU||fj&&(az==null||az<12.11));var fQ=cB||(cm&&du>=9);function ce(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var c2=function(gP,gQ){var i=gP.className;var gO=ce(gQ).exec(i);if(gO){var gN=i.slice(gO.index+gO[0].length);gP.className=i.slice(0,gO.index)+(gN?gO[1]+gN:"")}};function fe(i){for(var gN=i.childNodes.length;gN>0;--gN){i.removeChild(i.firstChild)}return i}function a5(gN,i){return fe(gN).appendChild(i)}function gf(gO,i,gR,gQ){var gN=document.createElement(gO);if(gR){gN.className=gR}if(gQ){gN.style.cssText=gQ}if(typeof i=="string"){gN.appendChild(document.createTextNode(i))}else{if(i){for(var gP=0;gP<i.length;++gP){gN.appendChild(i[gP])}}}return gN}var cp;if(document.createRange){cp=function(gQ,gN,gO,i){var gP=document.createRange();gP.setEnd(i||gQ,gO);gP.setStart(gQ,gN);return gP}}else{cp=function(gP,gN,gQ){var gO=document.body.createTextRange();try{gO.moveToElementText(gP.parentNode)}catch(i){return gO}gO.collapse(true);gO.moveEnd("character",gQ);gO.moveStart("character",gN);return gO}}function fU(gN,i){if(i.nodeType==3){i=i.parentNode}if(gN.contains){return gN.contains(i)}do{if(i.nodeType==11){i=i.host}if(i==gN){return true}}while(i=i.parentNode)}function e3(){var gN;try{gN=document.activeElement}catch(i){gN=document.body||null}while(gN&&gN.root&&gN.root.activeElement){gN=gN.root.activeElement}return gN}function gn(gO,gN){var i=gO.className;if(!ce(gN).test(i)){gO.className+=(i?" ":"")+gN}}function gC(i,gO){var gP=i.split(" ");for(var gN=0;gN<gP.length;gN++){if(gP[gN]&&!ce(gP[gN]).test(gO)){gO+=" "+gP[gN]}}return gO}var cu=function(i){i.select()};if(ga){cu=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(cm){cu=function(i){try{i.select()}catch(gN){}}}}function bA(i){var gN=Array.prototype.slice.call(arguments,1);return function(){return i.apply(null,gN)}}function bd(gP,gO,i){if(!gO){gO={}}for(var gN in gP){if(gP.hasOwnProperty(gN)&&(i!==false||!gO.hasOwnProperty(gN))){gO[gN]=gP[gN]}}return gO}function aT(gS,gQ,i,gN,gR){if(gQ==null){gQ=gS.search(/[^\s\u00a0]/);if(gQ==-1){gQ=gS.length}}for(var gT=gN||0,gO=gR||0;;){var gP=gS.indexOf("\t",gT);if(gP<0||gP>=gQ){return gO+(gQ-gT)}gO+=gP-gT;gO+=i-(gO%i);gT=gP+1}}function ge(){this.id=null}ge.prototype.set=function(gN,i){clearTimeout(this.id);this.id=setTimeout(i,gN)};function dE(gN,gO){for(var i=0;i<gN.length;++i){if(gN[i]==gO){return i}}return -1}var cc=30;var cX={toString:function(){return"CodeMirror.Pass"}};var be={scroll:false};var cN={origin:"*mouse"};var b3={origin:"+move"};function ei(gS,gQ,i){for(var gN=0,gP=0;;){var gO=gS.indexOf("\t",gN);if(gO==-1){gO=gS.length}var gR=gO-gN;if(gO==gS.length||gP+gR>=gQ){return gN+Math.min(gR,gQ-gP)}gP+=gO-gN;gP+=i-(gP%i);gN=gO+1;if(gP>=gQ){return gN}}}var go=[""];function eR(i){while(go.length<=i){go.push(dp(go)+" ")}return go[i]}function dp(i){return i[i.length-1]}function bf(gN,i){var gO=[];for(var gP=0;gP<gN.length;gP++){gO[gP]=i(gN[gP],gP)}return gO}function cJ(gN,gO,gP){var gQ=0,i=gP(gO);while(gQ<gN.length&&gP(gN[gQ])<=i){gQ++}gN.splice(gQ,0,gO)}function gD(){}function bY(i,gN){var gO;if(Object.create){gO=Object.create(i)}else{gD.prototype=i;gO=new gD()}if(gN){bd(gN,gO)}return gO}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function gA(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||Q.test(i))}function ab(gN,i){if(!i){return gA(gN)}if(i.source.indexOf("\\w")>-1&&gA(gN)){return true}return i.test(gN)}function fR(gN){for(var i in gN){if(gN.hasOwnProperty(i)&&gN[i]){return false}}return true}var bJ=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fD(i){return i.charCodeAt(0)>=768&&bJ.test(i)}function eV(i,gP,gO){var gN=this;this.input=gO;gN.scrollbarFiller=gf("div",null,"CodeMirror-scrollbar-filler");gN.scrollbarFiller.setAttribute("cm-not-content","true");gN.gutterFiller=gf("div",null,"CodeMirror-gutter-filler");gN.gutterFiller.setAttribute("cm-not-content","true");gN.lineDiv=gf("div",null,"CodeMirror-code");gN.selectionDiv=gf("div",null,null,"position: relative; z-index: 1");gN.cursorDiv=gf("div",null,"CodeMirror-cursors");gN.measure=gf("div",null,"CodeMirror-measure");gN.lineMeasure=gf("div",null,"CodeMirror-measure");gN.lineSpace=gf("div",[gN.measure,gN.lineMeasure,gN.selectionDiv,gN.cursorDiv,gN.lineDiv],null,"position: relative; outline: none");gN.mover=gf("div",[gf("div",[gN.lineSpace],"CodeMirror-lines")],null,"position: relative");gN.sizer=gf("div",[gN.mover],"CodeMirror-sizer");gN.sizerWidth=null;gN.heightForcer=gf("div",null,null,"position: absolute; height: "+cc+"px; width: 1px;");gN.gutters=gf("div",null,"CodeMirror-gutters");gN.lineGutter=null;gN.scroller=gf("div",[gN.sizer,gN.heightForcer,gN.gutters],"CodeMirror-scroll");gN.scroller.setAttribute("tabIndex","-1");gN.wrapper=gf("div",[gN.scrollbarFiller,gN.gutterFiller,gN.scroller],"CodeMirror");if(cm&&du<8){gN.gutters.style.zIndex=-1;gN.scroller.style.paddingRight=0}if(!aX&&!(cB&&eu)){gN.scroller.draggable=true}if(i){if(i.appendChild){i.appendChild(gN.wrapper)}else{i(gN.wrapper)}}gN.viewFrom=gN.viewTo=gP.first;gN.reportedViewFrom=gN.reportedViewTo=gP.first;gN.view=[];gN.renderedView=null;gN.externalMeasured=null;gN.viewOffset=0;gN.lastWrapHeight=gN.lastWrapWidth=0;gN.updateLineNumbers=null;gN.nativeBarWidth=gN.barHeight=gN.barWidth=0;gN.scrollbarsClipped=false;gN.lineNumWidth=gN.lineNumInnerWidth=gN.lineNumChars=null;gN.alignWidgets=false;gN.cachedCharWidth=gN.cachedTextHeight=gN.cachedPaddingH=null;gN.maxLine=null;gN.maxLineLength=0;gN.maxLineChanged=false;gN.wheelDX=gN.wheelDY=gN.wheelStartX=gN.wheelStartY=null;gN.shift=false;gN.selForContextMenu=null;gN.activeTouch=null;gO.init(gN)}function ff(gR,gN){gN-=gR.first;if(gN<0||gN>=gR.size){throw new Error("There is no line "+(gN+gR.first)+" in the document.")}var gO=gR;while(!gO.lines){for(var gP=0;;++gP){var i=gO.children[gP],gQ=i.chunkSize();if(gN<gQ){gO=i;break}gN-=gQ}}return gO.lines[gN]}function gg(gP,gN,gQ){var gO=[],i=gN.line;gP.iter(gN.line,gQ.line+1,function(gR){var gS=gR.text;if(i==gQ.line){gS=gS.slice(0,gQ.ch)}if(i==gN.line){gS=gS.slice(gN.ch)}gO.push(gS);++i});return gO}function gs(gO,i,gP){var gN=[];gO.iter(i,gP,function(gQ){gN.push(gQ.text)});return gN}function gm(gO,i){var gP=i-gO.height;if(gP){for(var gN=gO;gN;gN=gN.parent){gN.height+=gP}}}function bZ(gO){if(gO.parent==null){return null}var gN=gO.parent,i=dE(gN.lines,gO);for(var gP=gN.parent;gP;gN=gP,gP=gP.parent){for(var gQ=0;;++gQ){if(gP.children[gQ]==gN){break}i+=gP.children[gQ].chunkSize()}}return i+gN.first}function w(gS,gR){var gP=gS.first;outer:do{for(var gO=0;gO<gS.children.length;++gO){var gN=gS.children[gO],i=gN.height;if(gR<i){gS=gN;continue outer}gR-=i;gP+=gN.chunkSize()}return gP}while(!gS.lines);var gQ=0;for(;gQ<gS.lines.length;++gQ){var gU=gS.lines[gQ],gT=gU.height;if(gR<gT){break}gR-=gT}return gP+gQ}function d6(i,gN){return gN>=i.first&&gN<i.first+i.size}function ev(i,gN){return String(i.lineNumberFormatter(gN+i.firstLineNumber))}function cG(gN,i){if(!(this instanceof cG)){return new cG(gN,i)}this.line=gN;this.ch=i}function ds(i,gN){return i.line-gN.line||i.ch-gN.ch}function bH(i){return cG(i.line,i.ch)}function aB(i,gN){return ds(i,gN)<0?gN:i}function b6(i,gN){return ds(i,gN)<0?i:gN}function ek(gN,i){return Math.max(gN.first,Math.min(i,gN.first+gN.size-1))}function fT(gO,i){if(i.line<gO.first){return cG(gO.first,0)}var gN=gO.first+gO.size-1;if(i.line>gN){return cG(gN,ff(gO,gN).text.length)}return dV(i,ff(gO,i.line).text.length)}function dV(i,gO){var gN=i.ch;if(gN==null||gN>gO){return cG(i.line,gO)}else{if(gN<0){return cG(i.line,0)}else{return i}}}function ba(i,gN){var gO=[];for(var gP=0;gP<gN.length;gP++){gO[gP]=fT(i,gN[gP])}return gO}var f2=false;var gB=false;function eD(){f2=true}function bv(){gB=true}function gl(gN,i,gO){this.marker=gN;this.from=i;this.to=gO}function e0(i,gO){if(i){for(var gP=0;gP<i.length;++gP){var gN=i[gP];if(gN.marker==gO){return gN}}}}function eJ(gP,i){var gN;for(var gO=0;gO<gP.length;++gO){if(gP[gO]!=i){(gN||(gN=[])).push(gP[gO])}}return gN}function db(gN,i){gN.markedSpans=gN.markedSpans?gN.markedSpans.concat([i]):[i];i.marker.attachLine(gN)}function P(gN,gO,gS){var gT;if(gN){for(var gQ=0;gQ<gN.length;++gQ){var gU=gN[gQ],gR=gU.marker;var i=gU.from==null||(gR.inclusiveLeft?gU.from<=gO:gU.from<gO);if(i||gU.from==gO&&gR.type=="bookmark"&&(!gS||!gU.marker.insertLeft)){var gP=gU.to==null||(gR.inclusiveRight?gU.to>=gO:gU.to>gO);(gT||(gT=[])).push(new gl(gR,gU.from,gP?null:gU.to))}}}return gT}function c(gN,gP,gS){var gT;if(gN){for(var gQ=0;gQ<gN.length;++gQ){var gU=gN[gQ],gR=gU.marker;var gO=gU.to==null||(gR.inclusiveRight?gU.to>=gP:gU.to>gP);if(gO||gU.from==gP&&gR.type=="bookmark"&&(!gS||gU.marker.insertLeft)){var i=gU.from==null||(gR.inclusiveLeft?gU.from<=gP:gU.from<gP);(gT||(gT=[])).push(new gl(gR,i?null:gU.from-gP,gU.to==null?null:gU.to-gP))}}}return gT}function gq(gS,g4){if(g4.full){return null}var gV=d6(gS,g4.from.line)&&ff(gS,g4.from.line).markedSpans;var g2=d6(gS,g4.to.line)&&ff(gS,g4.to.line).markedSpans;if(!gV&&!g2){return null}var g1=g4.from.ch,gN=g4.to.ch,g6=ds(g4.from,g4.to)==0;var g0=P(gV,g1,g6);var g3=c(g2,gN,g6);var g7=g4.text.length==1,gY=dp(g4.text).length+(g7?g1:0);if(g0){for(var gQ=0;gQ<g0.length;++gQ){var gP=g0[gQ];if(gP.to==null){var g5=e0(g3,gP.marker);if(!g5){gP.to=g1}else{if(g7){gP.to=g5.to==null?null:g5.to+gY}}}}}if(g3){for(var gZ=0;gZ<g3.length;++gZ){var gO=g3[gZ];if(gO.to!=null){gO.to+=gY}if(gO.from==null){var gU=e0(g0,gO.marker);if(!gU){gO.from=gY;if(g7){(g0||(g0=[])).push(gO)}}}else{gO.from+=gY;if(g7){(g0||(g0=[])).push(gO)}}}}if(g0){g0=cd(g0)}if(g3&&g3!=g0){g3=cd(g3)}var gR=[g0];if(!g7){var i=g4.text.length-2,gT;if(i>0&&g0){for(var gX=0;gX<g0.length;++gX){if(g0[gX].to==null){(gT||(gT=[])).push(new gl(g0[gX].marker,null,null))}}}for(var gW=0;gW<i;++gW){gR.push(gT)}gR.push(g3)}return gR}function cd(i){for(var gO=0;gO<i.length;++gO){var gN=i[gO];if(gN.from!=null&&gN.from==gN.to&&gN.marker.clearWhenEmpty!==false){i.splice(gO--,1)}}if(!i.length){return null}return i}function da(gY,gW,gX){var gQ=null;gY.iter(gW.line,gX.line+1,function(gZ){if(gZ.markedSpans){for(var g0=0;g0<gZ.markedSpans.length;++g0){var g1=gZ.markedSpans[g0].marker;if(g1.readOnly&&(!gQ||dE(gQ,g1)==-1)){(gQ||(gQ=[])).push(g1)}}}});if(!gQ){return null}var gR=[{from:gW,to:gX}];for(var gS=0;gS<gQ.length;++gS){var gT=gQ[gS],gO=gT.find(0);for(var gP=0;gP<gR.length;++gP){var gN=gR[gP];if(ds(gN.to,gO.from)<0||ds(gN.from,gO.to)>0){continue}var gV=[gP,1],i=ds(gN.from,gO.from),gU=ds(gN.to,gO.to);if(i<0||!gT.inclusiveLeft&&!i){gV.push({from:gN.from,to:gO.from})}if(gU>0||!gT.inclusiveRight&&!gU){gV.push({from:gO.to,to:gN.to})}gR.splice.apply(gR,gV);gP+=gV.length-1}}return gR}function fL(gO){var gN=gO.markedSpans;if(!gN){return}for(var i=0;i<gN.length;++i){gN[i].marker.detachLine(gO)}gO.markedSpans=null}function bj(gO,gN){if(!gN){return}for(var i=0;i<gN.length;++i){gN[i].marker.attachLine(gO)}gO.markedSpans=gN}function eX(i){return i.inclusiveLeft?-1:0}function bt(i){return i.inclusiveRight?1:0}function bP(gQ,gO){var i=gQ.lines.length-gO.lines.length;if(i!=0){return i}var gP=gQ.find(),gN=gO.find();var gR=ds(gP.from,gN.from)||eX(gQ)-eX(gO);if(gR){return -gR}var gS=ds(gP.to,gN.to)||bt(gQ)-bt(gO);if(gS){return gS}return gO.id-gQ.id}function gz(gP,gN){var gO=gB&&gP.markedSpans,i;if(gO){for(var gR=void 0,gQ=0;gQ<gO.length;++gQ){gR=gO[gQ];if(gR.marker.collapsed&&(gN?gR.from:gR.to)==null&&(!i||bP(i,gR.marker)<0)){i=gR.marker}}}return i}function cD(i){return gz(i,true)}function cI(i){return gz(i,false)}function d2(gU,i,gS,gT,gQ){var gX=ff(gU,i);var gN=gB&&gX.markedSpans;if(gN){for(var gP=0;gP<gN.length;++gP){var gO=gN[gP];if(!gO.marker.collapsed){continue}var gW=gO.marker.find(0);var gV=ds(gW.from,gS)||eX(gO.marker)-eX(gQ);var gR=ds(gW.to,gT)||bt(gO.marker)-bt(gQ);if(gV>=0&&gR<=0||gV<=0&&gR>=0){continue}if(gV<=0&&(gO.marker.inclusiveRight&&gQ.inclusiveLeft?ds(gW.to,gS)>=0:ds(gW.to,gS)>0)||gV>=0&&(gO.marker.inclusiveRight&&gQ.inclusiveLeft?ds(gW.from,gT)<=0:ds(gW.from,gT)<0)){return true}}}}function dU(i){var gN;while(gN=cD(i)){i=gN.find(-1,true).line}return i}function cR(i){var gN,gO;while(gN=cI(i)){i=gN.find(1,true).line;(gO||(gO=[])).push(i)}return gO}function ao(i,gO){var gN=ff(i,gO),gP=dU(gN);if(gN==gP){return gO}return bZ(gP)}function fn(i,gP){if(gP>i.lastLine()){return gP}var gO=ff(i,gP),gN;if(!eh(i,gO)){return gP}while(gN=cI(gO)){gO=gN.find(1,true).line}return bZ(gO)+1}function eh(gN,gP){var gO=gB&&gP.markedSpans;if(gO){for(var i=void 0,gQ=0;gQ<gO.length;++gQ){i=gO[gQ];if(!i.marker.collapsed){continue}if(i.from==null){return true}if(i.marker.widgetNode){continue}if(i.from==0&&i.marker.inclusiveLeft&&co(gN,gP,i)){return true}}}}function co(gN,gP,gR){if(gR.to==null){var gO=gR.marker.find(1,true);return co(gN,gO.line,e0(gO.line.markedSpans,gR.marker))}if(gR.marker.inclusiveRight&&gR.to==gP.text.length){return true}for(var i=void 0,gQ=0;gQ<gP.markedSpans.length;++gQ){i=gP.markedSpans[gQ];if(i.marker.collapsed&&!i.marker.widgetNode&&i.from==gR.to&&(i.to==null||i.to!=gR.from)&&(i.marker.inclusiveLeft||gR.marker.inclusiveRight)&&co(gN,gP,i)){return true}}}function bT(gR){gR=dU(gR);var gT=0,gQ=gR.parent;for(var gS=0;gS<gQ.lines.length;++gS){var gP=gQ.lines[gS];if(gP==gR){break}else{gT+=gP.height}}for(var i=gQ.parent;i;gQ=i,i=gQ.parent){for(var gO=0;gO<i.children.length;++gO){var gN=i.children[gO];if(gN==gQ){break}else{gT+=gN.height}}}return gT}function fF(gP){if(gP.height==0){return 0}var gO=gP.text.length,gQ,gN=gP;while(gQ=cD(gN)){var gR=gQ.find(0,true);gN=gR.from.line;gO+=gR.from.ch-gR.to.ch}gN=gP;while(gQ=cI(gN)){var i=gQ.find(0,true);gO-=gN.text.length-i.from.ch;gN=i.to.line;gO+=gN.text.length-i.to.ch}return gO}function cL(gN){var i=gN.display,gO=gN.doc;i.maxLine=ff(gO,gO.first);i.maxLineLength=fF(i.maxLine);i.maxLineChanged=true;gO.iter(function(gQ){var gP=fF(gQ);if(gP>i.maxLineLength){i.maxLineLength=gP;i.maxLine=gQ}})}function ft(gO,gN,i,gS){if(!gO){return gS(gN,i,"ltr")}var gR=false;for(var gQ=0;gQ<gO.length;++gQ){var gP=gO[gQ];if(gP.from<i&&gP.to>gN||gN==i&&gP.to==gN){gS(Math.max(gP.from,gN),Math.min(gP.to,i),gP.level==1?"rtl":"ltr");gR=true}}if(!gR){gS(gN,i,"ltr")}}function cZ(i){return i.level%2?i.to:i.from}function f5(i){return i.level%2?i.from:i.to}function ay(i){var gN=by(i);return gN?cZ(gN[0]):0}function bn(i){var gN=by(i);if(!gN){return i.text.length}return f5(dp(gN))}function B(gO,gP,i){var gN=gO[0].level;if(gP==gN){return true}if(i==gN){return false}return gP<i}var eF=null;function aW(gO,gN){var gQ;eF=null;for(var gP=0;gP<gO.length;++gP){var i=gO[gP];if(i.from<gN&&i.to>gN){return gP}if((i.from==gN||i.to==gN)){if(gQ==null){gQ=gP}else{if(B(gO,i.level,gO[gQ].level)){if(i.from!=i.to){eF=gQ}return gP}else{if(i.from!=i.to){eF=gP}return gQ}}}}return gQ}function fh(i,gN,gO,gP){if(!gP){return gN+gO}do{gN+=gO}while(gN>0&&fD(i.text.charAt(gN)));return gN}function cF(gQ,gN,gP,gR){var gS=by(gQ);if(!gS){return s(gQ,gN,gP,gR)}var i=aW(gS,gN),gO=gS[i];var gT=fh(gQ,gN,gO.level%2?-gP:gP,gR);for(;;){if(gT>gO.from&&gT<gO.to){return gT}if(gT==gO.from||gT==gO.to){if(aW(gS,gT)==i){return gT}gO=gS[i+=gP];return(gP>0)==gO.level%2?gO.to:gO.from}else{gO=gS[i+=gP];if(!gO){return null}if((gP>0)==gO.level%2){gT=fh(gQ,gO.to,-1,gR)}else{gT=fh(gQ,gO.from,1,gR)}}}}function s(gQ,gN,gO,gP){var i=gN+gO;if(gP){while(i>0&&fD(gQ.text.charAt(i))){i+=gO}}return i<0||i>gQ.text.length?null:i}var aA=(function(){var gR="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gP="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gO(gW){if(gW<=247){return gR.charAt(gW)}else{if(1424<=gW&&gW<=1524){return"R"}else{if(1536<=gW&&gW<=1773){return gP.charAt(gW-1536)}else{if(1774<=gW&&gW<=2220){return"r"}else{if(8192<=gW&&gW<=8203){return"w"}else{if(gW==8204){return"b"}else{return"L"}}}}}}}var gU=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gV=/[stwN]/,gN=/[LRr]/,i=/[Lb1n]/,gQ=/[1n]/;var gT="L";function gS(gX,gW,gY){this.level=gX;this.from=gW;this.to=gY}return function(hk){if(!gU.test(hk)){return false}var gY=hk.length,hg=[];for(var hu=0;hu<gY;++hu){hg.push(gO(hk.charCodeAt(hu)))}for(var hb=0,ho=gT;hb<gY;++hb){var hr=hg[hb];if(hr=="m"){hg[hb]=ho}else{ho=hr}}for(var g7=0,he=gT;g7<gY;++g7){var hm=hg[g7];if(hm=="1"&&he=="r"){hg[g7]="n"}else{if(gN.test(hm)){he=hm;if(hm=="r"){hg[g7]="R"}}}}for(var g6=1,hq=hg[0];g6<gY-1;++g6){var hc=hg[g6];if(hc=="+"&&hq=="1"&&hg[g6+1]=="1"){hg[g6]="1"}else{if(hc==","&&hq==hg[g6+1]&&(hq=="1"||hq=="n")){hg[g6]=hq}}hq=hc}for(var g2=0;g2<gY;++g2){var g8=hg[g2];if(g8==","){hg[g2]="N"}else{if(g8=="%"){var ht=void 0;for(ht=g2+1;ht<gY&&hg[ht]=="%";++ht){}var g4=(g2&&hg[g2-1]=="!")||(ht<gY&&hg[ht]=="1")?"1":"N";for(var hs=g2;hs<ht;++hs){hg[hs]=g4}g2=ht-1}}}for(var gW=0,gX=gT;gW<gY;++gW){var hl=hg[gW];if(gX=="L"&&hl=="1"){hg[gW]="L"}else{if(gN.test(hl)){gX=hl}}}for(var hf=0;hf<gY;++hf){if(gV.test(hg[hf])){var g0=void 0;for(g0=hf+1;g0<gY&&gV.test(hg[g0]);++g0){}var hi=(hf?hg[hf-1]:gT)=="L";var ha=(g0<gY?hg[g0]:gT)=="L";var hd=hi||ha?"L":"R";for(var g3=hf;g3<g0;++g3){hg[g3]=hd}hf=g0-1}}var hp=[],hh;for(var g5=0;g5<gY;){if(i.test(hg[g5])){var gZ=g5;for(++g5;g5<gY&&i.test(hg[g5]);++g5){}hp.push(new gS(0,gZ,g5))}else{var g9=g5,hj=hp.length;for(++g5;g5<gY&&hg[g5]!="L";++g5){}for(var g1=g9;g1<g5;){if(gQ.test(hg[g1])){if(g9<g1){hp.splice(hj,0,new gS(1,g9,g1))}var hn=g1;for(++g1;g1<g5&&gQ.test(hg[g1]);++g1){}hp.splice(hj,0,new gS(2,hn,g1));g9=g1}else{++g1}}if(g9<g5){hp.splice(hj,0,new gS(1,g9,g5))}}}if(hp[0].level==1&&(hh=hk.match(/^\s+/))){hp[0].from=hh[0].length;hp.unshift(new gS(0,0,hh[0].length))}if(dp(hp).level==1&&(hh=hk.match(/\s+$/))){dp(hp).to-=hh[0].length;hp.push(new gS(0,gY-hh[0].length,gY))}if(hp[0].level==2){hp.unshift(new gS(1,hp[0].to,hp[0].to))}if(hp[0].level!=dp(hp).level){hp.push(new gS(hp[0].level,gY,gY))}return hp}})();function by(i){var gN=i.order;if(gN==null){gN=i.order=aA(i.text)}return gN}var eO=[];var J=function(i,gN,gP){if(i.addEventListener){i.addEventListener(gN,gP,false)}else{if(i.attachEvent){i.attachEvent("on"+gN,gP)}else{var gO=i._handlers||(i._handlers={});gO[gN]=(gO[gN]||eO).concat(gP)}}};function gr(i,gN){return i._handlers&&i._handlers[gN]||eO}function ep(gN,gP,i){if(gN.removeEventListener){gN.removeEventListener(gP,i,false)}else{if(gN.detachEvent){gN.detachEvent("on"+gP,i)}else{var gQ=gN._handlers,gR=gQ&&gQ[gP];if(gR){var gO=dE(gR,i);if(gO>-1){gQ[gP]=gR.slice(0,gO).concat(gR.slice(gO+1))}}}}}function aM(gN,i){var gO=gr(gN,i);if(!gO.length){return}var gP=Array.prototype.slice.call(arguments,2);for(var gQ=0;gQ<gO.length;++gQ){gO[gQ].apply(null,gP)}}function U(gN,i,gO){if(typeof i=="string"){i={type:i,preventDefault:function(){this.defaultPrevented=true}}}aM(gN,gO||i.type,gN,i);return F(i)||i.codemirrorIgnore}function cA(gP){var gO=gP._handlers&&gP._handlers.cursorActivity;if(!gO){return}var gN=gP.curOp.cursorActivityHandlers||(gP.curOp.cursorActivityHandlers=[]);for(var i=0;i<gO.length;++i){if(dE(gN,gO[i])==-1){gN.push(gO[i])}}}function fp(i,gN){return gr(i,gN).length>0}function aG(i){i.prototype.on=function(gO,gN){J(this,gO,gN)};i.prototype.off=function(gO,gN){ep(this,gO,gN)}}function cT(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function eW(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function F(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function em(i){cT(i);eW(i)}function aC(i){return i.target||i.srcElement}function fm(i){var gN=i.which;if(gN==null){if(i.button&1){gN=1}else{if(i.button&2){gN=3}else{if(i.button&4){gN=2}}}}if(dP&&i.ctrlKey&&gN==1){gN=3}return gN}var b2=function(){if(cm&&du<9){return false}var i=gf("div");return"draggable" in i||"dragDrop" in i}();var fi;function cb(gN){if(fi==null){var i=gf("span","\u200b");a5(gN,gf("span",[i,document.createTextNode("x")]));if(gN.firstChild.offsetHeight!=0){fi=i.offsetWidth<=1&&i.offsetHeight>2&&!(cm&&du<8)}}var gO=fi?gf("span","\u200b"):gf("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gO.setAttribute("cm-text","");return gO}var fl;function b8(i){if(fl!=null){return fl}var gN=a5(i,document.createTextNode("A\u062eA"));var gP=cp(gN,0,1).getBoundingClientRect();var gO=cp(gN,1,2).getBoundingClientRect();fe(i);if(!gP||gP.left==gP.right){return false}return fl=(gO.right-gP.right<3)}var fw="\n\nb".split(/\n/).length!=3?function(i){var gN=0,gQ=[],gS=i.length;while(gN<=gS){var gR=i.indexOf("\n",gN);if(gR==-1){gR=i.length}var gP=i.slice(gN,i.charAt(gR-1)=="\r"?gR-1:gR);var gO=gP.indexOf("\r");if(gO!=-1){gQ.push(gP.slice(0,gO));gN+=gO+1}else{gQ.push(gP);gN=gR+1}}return gQ}:function(i){return i.split(/\r\n?|\n/)};var aP=window.getSelection?function(i){try{return i.selectionStart!=i.selectionEnd}catch(gN){return false}}:function(i){var gO;try{gO=i.ownerDocument.selection.createRange()}catch(gN){}if(!gO||gO.parentElement()!=i){return false}return gO.compareEndPoints("StartToEnd",gO)!=0};var cH=(function(){var i=gf("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var eQ=null;function a9(gO){if(eQ!=null){return eQ}var gP=a5(gO,gf("span","x"));var i=gP.getBoundingClientRect();var gN=cp(gP,0,1).getBoundingClientRect();return eQ=Math.abs(i.left-gN.left)>1}var bw={};var Z={};function ex(gN,i){if(arguments.length>2){i.dependencies=Array.prototype.slice.call(arguments,2)}bw[gN]=i}function b0(i,gN){Z[i]=gN}function fY(gN){if(typeof gN=="string"&&Z.hasOwnProperty(gN)){gN=Z[gN]}else{if(gN&&typeof gN.name=="string"&&Z.hasOwnProperty(gN.name)){var i=Z[gN.name];if(typeof i=="string"){i={name:i}}gN=bY(i,gN);gN.name=i.name}else{if(typeof gN=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(gN)){return fY("application/xml")}else{if(typeof gN=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(gN)){return fY("application/json")}}}}if(typeof gN=="string"){return{name:gN}}else{return gN||{name:"null"}}}function gj(gP,gO){gO=fY(gO);var gS=bw[gO.name];if(!gS){return gj(gP,"text/plain")}var i=gS(gP,gO);if(eS.hasOwnProperty(gO.name)){var gQ=eS[gO.name];for(var gN in gQ){if(!gQ.hasOwnProperty(gN)){continue}if(i.hasOwnProperty(gN)){i["_"+gN]=i[gN]}i[gN]=gQ[gN]}}i.name=gO.name;if(gO.helperType){i.helperType=gO.helperType}if(gO.modeProps){for(var gR in gO.modeProps){i[gR]=gO.modeProps[gR]}}return i}var eS={};function dB(i,gO){var gN=eS.hasOwnProperty(i)?eS[i]:(eS[i]={});bd(gO,gN)}function am(gQ,i){if(i===true){return i}if(gQ.copyState){return gQ.copyState(i)}var gP={};for(var gN in i){var gO=i[gN];if(gO instanceof Array){gO=gO.concat([])}gP[gN]=gO}return gP}function fH(i,gN){var gO;while(i.innerMode){gO=i.innerMode(gN);if(!gO||gO.mode==i){break}gN=gO.state;i=gO.mode}return gO||{mode:i,state:gN}}function Y(i,gO,gN){return i.startState?i.startState(gO,gN):true}var fO=function(gN,i){this.pos=this.start=0;this.string=gN;this.tabSize=i||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};fO.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(gN){var i=this.string.charAt(this.pos);var gO;if(typeof gN=="string"){gO=i==gN}else{gO=i&&(gN.test?gN.test(i):gN(i))}if(gO){++this.pos;return i}},eatWhile:function(gN){var i=this.pos;while(this.eat(gN)){}return this.pos>i},eatSpace:function(){var i=this;var gN=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++i.pos}return this.pos>gN},skipToEnd:function(){this.pos=this.string.length},skipTo:function(gN){var i=this.string.indexOf(gN,this.pos);if(i>-1){this.pos=i;return true}},backUp:function(i){this.pos-=i},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=aT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?aT(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return aT(this.string,null,this.tabSize)-(this.lineStart?aT(this.string,this.lineStart,this.tabSize):0)},match:function(i,gO,gQ){if(typeof i=="string"){var gN=function(gS){return gQ?gS.toLowerCase():gS};var gR=this.string.substr(this.pos,i.length);if(gN(gR)==gN(i)){if(gO!==false){this.pos+=i.length}return true}}else{var gP=this.string.slice(this.pos).match(i);if(gP&&gP.index>0){return null}if(gP&&gO!==false){this.pos+=gP[0].length}return gP}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(i,gN){this.lineStart+=i;try{return gN()}finally{this.lineStart-=i}}};function eB(gQ,gP,i,gT){var gS=[gQ.state.modeGen],gR={};e6(gQ,gP.text,gQ.doc.mode,i,function(gU,gV){return gS.push(gU,gV)},gR,gT);var gO=function(gX){var gV=gQ.state.overlays[gX],gW=1,gU=0;e6(gQ,gP.text,gV.mode,true,function(gY,g0){var g2=gW;while(gU<gY){var gZ=gS[gW];if(gZ>gY){gS.splice(gW,1,gY,gS[gW+1],gZ)}gW+=2;gU=Math.min(gY,gZ)}if(!g0){return}if(gV.opaque){gS.splice(g2,gW-g2,gY,"overlay "+g0);gW=g2+2}else{for(;g2<gW;g2+=2){var g1=gS[g2+1];gS[g2+1]=(g1?g1+" ":"")+"overlay "+g0}}},gR)};for(var gN=0;gN<gQ.state.overlays.length;++gN){gO(gN)}return{styles:gS,classes:gR.bgClass||gR.textClass?gR:null}}function et(gO,gP,gN){if(!gP.styles||gP.styles[0]!=gO.state.modeGen){var gQ=di(gO,bZ(gP));var i=eB(gO,gP,gP.text.length>gO.options.maxHighlightLength?am(gO.doc.mode,gQ):gQ);gP.stateAfter=gQ;gP.styles=i.styles;if(i.classes){gP.styleClasses=i.classes}else{if(gP.styleClasses){gP.styleClasses=null}}if(gN===gO.doc.frontier){gO.doc.frontier++}}return gP.styles}function di(gQ,gN,gO){var gS=gQ.doc,gR=gQ.display;if(!gS.mode.startState){return true}var i=O(gQ,gN,gO),gP=i>gS.first&&ff(gS,i-1).stateAfter;if(!gP){gP=Y(gS.mode)}else{gP=am(gS.mode,gP)}gS.iter(i,gN,function(gU){ee(gQ,gU.text,gP);var gT=i==gN-1||i%5==0||i>=gR.viewFrom&&i<gR.viewTo;gU.stateAfter=gT?am(gS.mode,gP):null;++i});if(gO){gS.frontier=i}return gP}function ee(gQ,gN,gP,gO){var i=gQ.doc.mode;var gR=new fO(gN,gQ.options.tabSize);gR.start=gR.pos=gO||0;if(gN==""){dI(i,gP)}while(!gR.eol()){dn(i,gR,gP);gR.start=gR.pos}}function dI(i,gO){if(i.blankLine){return i.blankLine(gO)}if(!i.innerMode){return}var gN=fH(i,gO);if(gN.mode.blankLine){return gN.mode.blankLine(gN.state)}}function dn(gN,i,gR,gO){for(var gP=0;gP<10;gP++){if(gO){gO[0]=fH(gN,gR).mode}var gQ=gN.token(i,gR);if(i.pos>i.start){return gQ}}throw new Error("Mode "+gN.name+" failed to advance stream.")}function e1(gV,gS,gP,gO){var gU=function(gY){return({start:gW.start,end:gW.pos,string:gW.current(),type:gN||null,state:gY?am(gT.mode,i):i})};var gT=gV.doc,gQ=gT.mode,gN;gS=fT(gT,gS);var gX=ff(gT,gS.line),i=di(gV,gS.line,gP);var gW=new fO(gX.text,gV.options.tabSize),gR;if(gO){gR=[]}while((gO||gW.pos<gS.ch)&&!gW.eol()){gW.start=gW.pos;gN=dn(gQ,gW,i);if(gO){gR.push(gU(true))}}return gO?gR:gU()}function fJ(gP,gO){if(gP){for(;;){var i=gP.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}gP=gP.slice(0,i.index)+gP.slice(i.index+i[0].length);var gN=i[1]?"bgClass":"textClass";if(gO[gN]==null){gO[gN]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(gO[gN])){gO[gN]+=" "+i[2]}}}}return gP}function e6(gW,gY,gQ,i,gR,gO,gP){var gN=gQ.flattenSpans;if(gN==null){gN=gW.options.flattenSpans}var gT=0,gS=null;var gX=new fO(gY,gW.options.tabSize),gU;var g0=gW.options.addModeClass&&[null];if(gY==""){fJ(dI(gQ,i),gO)}while(!gX.eol()){if(gX.pos>gW.options.maxHighlightLength){gN=false;if(gP){ee(gW,gY,i,gX.pos)}gX.pos=gY.length;gU=null}else{gU=fJ(dn(gQ,gX,i,g0),gO)}if(g0){var gZ=g0[0].name;if(gZ){gU="m-"+(gU?gZ+" "+gU:gZ)}}if(!gN||gS!=gU){while(gT<gX.start){gT=Math.min(gX.start,gT+5000);gR(gT,gS)}gS=gU}gX.start=gX.pos}while(gT<gX.pos){var gV=Math.min(gX.pos,gT+5000);gR(gV,gS);gT=gV}}function O(gR,gU,gO){var i,gP,gQ=gR.doc;var gN=gO?-1:gU-(gR.doc.mode.innerMode?1000:100);for(var gV=gU;gV>gN;--gV){if(gV<=gQ.first){return gQ.first}var gT=ff(gQ,gV-1);if(gT.stateAfter&&(!gO||gV<=gQ.frontier)){return gV}var gS=aT(gT.text,null,gR.options.tabSize);if(gP==null||i>gS){gP=gV-1;i=gS}}return gP}function gk(i,gO,gN){this.text=i;bj(this,gO);this.height=gN?gN(this):1}aG(gk);gk.prototype.lineNo=function(){return bZ(this)};function fG(gO,gN,gP,gQ){gO.text=gN;if(gO.stateAfter){gO.stateAfter=null}if(gO.styles){gO.styles=null}if(gO.order!=null){gO.order=null}fL(gO);bj(gO,gP);var i=gQ?gQ(gO):1;if(i!=gO.height){gm(gO,i)}}function k(i){i.parent=null;fL(i)}var cz={};var ai={};function f0(i,gO){if(!i||/^\s*$/.test(i)){return null}var gN=gO.addModeClass?ai:cz;return gN[i]||(gN[i]=i.replace(/\S+/g,"cm-$&"))}function fc(gS,gR){var gQ=gf("span",null,null,aX?"padding-right: .1px":null);var gP={pre:gf("pre",[gQ],"CodeMirror-line"),content:gQ,col:0,pos:0,cm:gS,trailingSpace:false,splitSpaces:(cm||aX)&&gS.getOption("lineWrapping")};gR.measure={};for(var gO=0;gO<=(gR.rest?gR.rest.length:0);gO++){var gU=gO?gR.rest[gO-1]:gR.line,gN=void 0;gP.pos=0;gP.addToken=cw;if(b8(gS.display.measure)&&(gN=by(gU))){gP.addToken=cx(gP.addToken,gN)}gP.map=[];var i=gR!=gS.display.externalMeasured&&bZ(gU);cn(gU,gP,et(gS,gU,i));if(gU.styleClasses){if(gU.styleClasses.bgClass){gP.bgClass=gC(gU.styleClasses.bgClass,gP.bgClass||"")}if(gU.styleClasses.textClass){gP.textClass=gC(gU.styleClasses.textClass,gP.textClass||"")}}if(gP.map.length==0){gP.map.push(0,0,gP.content.appendChild(cb(gS.display.measure)))}if(gO==0){gR.measure.map=gP.map;gR.measure.cache={}}else{(gR.measure.maps||(gR.measure.maps=[])).push(gP.map);(gR.measure.caches||(gR.measure.caches=[])).push({})}}if(aX){var gT=gP.content.lastChild;if(/\bcm-tab\b/.test(gT.className)||(gT.querySelector&&gT.querySelector(".cm-tab"))){gP.content.className="cm-tab-wrap-hack"}}aM(gS,"renderLine",gS,gR.line,gP.pre);if(gP.pre.className){gP.textClass=gC(gP.pre.className,gP.textClass||"")}return gP}function fd(i){var gN=gf("span","\u2022","cm-invalidchar");gN.title="\\u"+i.charCodeAt(0).toString(16);gN.setAttribute("aria-label",gN.title);return gN}function cw(g1,gW,i,g3,gZ,gP,gV){if(!gW){return}var g5=g1.splitSpaces?aE(gW,g1.trailingSpace):gW;var gQ=g1.cm.state.specialChars,gR=false;var g4;if(!gQ.test(gW)){g1.col+=gW.length;g4=document.createTextNode(g5);g1.map.push(g1.pos,g1.pos+gW.length,g4);if(cm&&du<9){gR=true}g1.pos+=gW.length}else{g4=document.createDocumentFragment();var gT=0;while(true){gQ.lastIndex=gT;var g2=gQ.exec(gW);var gO=g2?g2.index-gT:gW.length-gT;if(gO){var gY=document.createTextNode(g5.slice(gT,gT+gO));if(cm&&du<9){g4.appendChild(gf("span",[gY]))}else{g4.appendChild(gY)}g1.map.push(g1.pos,g1.pos+gO,gY);g1.col+=gO;g1.pos+=gO}if(!g2){break}gT+=gO+1;var gN=void 0;if(g2[0]=="\t"){var g0=g1.cm.options.tabSize,gX=g0-g1.col%g0;gN=g4.appendChild(gf("span",eR(gX),"cm-tab"));gN.setAttribute("role","presentation");gN.setAttribute("cm-text","\t");g1.col+=gX}else{if(g2[0]=="\r"||g2[0]=="\n"){gN=g4.appendChild(gf("span",g2[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));gN.setAttribute("cm-text",g2[0]);g1.col+=1}else{gN=g1.cm.options.specialCharPlaceholder(g2[0]);gN.setAttribute("cm-text",g2[0]);if(cm&&du<9){g4.appendChild(gf("span",[gN]))}else{g4.appendChild(gN)}g1.col+=1}}g1.map.push(g1.pos,g1.pos+1,gN);g1.pos++}}g1.trailingSpace=g5.charCodeAt(gW.length-1)==32;if(i||g3||gZ||gR||gV){var gS=i||"";if(g3){gS+=g3}if(gZ){gS+=gZ}var gU=gf("span",[g4],gS,gV);if(gP){gU.title=gP}return g1.content.appendChild(gU)}g1.content.appendChild(g4)}function aE(gN,i){if(gN.length>1&&!/  /.test(gN)){return gN}var gP=i,gO="";for(var gQ=0;gQ<gN.length;gQ++){var gR=gN.charAt(gQ);if(gR==" "&&gP&&(gQ==gN.length-1||gN.charCodeAt(gQ+1)==32)){gR="\u00a0"}gO+=gR;gP=gR==" "}return gO}function cx(i,gN){return function(gV,gX,gO,gS,gY,gW,gU){gO=gO?gO+" cm-force-border":"cm-force-border";var gP=gV.pos,gR=gP+gX.length;for(;;){var gQ=void 0;for(var gT=0;gT<gN.length;gT++){gQ=gN[gT];if(gQ.to>gP&&gQ.from<=gP){break}}if(gQ.to>=gR){return i(gV,gX,gO,gS,gY,gW,gU)}i(gV,gX.slice(0,gQ.to-gP),gO,gS,null,gW,gU);gS=null;gX=gX.slice(gQ.to-gP);gP=gQ.to}}}function g(gO,gQ,i,gP){var gN=!gP&&i.widgetNode;if(gN){gO.map.push(gO.pos,gO.pos+gQ,gN)}if(!gP&&gO.cm.display.input.needsContentAttribute){if(!gN){gN=gO.content.appendChild(document.createElement("span"))}gN.setAttribute("cm-marker",i.id)}if(gN){gO.cm.display.input.setUneditable(gN);gO.content.appendChild(gN)}gO.pos+=gQ;gO.trailingSpace=false}function cn(hb,g0,ha){var g1=hb.markedSpans,g7=hb.text,gW=0;if(!g1){for(var g4=1;g4<ha.length;g4+=2){g0.addToken(g0,g7.slice(gW,gW=ha[g4]),f0(ha[g4+1],g0.cm.options))}return}var gP=g7.length,gY=0,gO=1,he="",gT,hc;var g5=0,gQ,g3,gU,g8,gS;for(;;){if(g5==gY){gQ=g3=gU=g8=hc="";gS=null;g5=Infinity;var g6=[],g9=void 0;for(var i=0;i<g1.length;++i){var gN=g1[i],gX=gN.marker;if(gX.type=="bookmark"&&gN.from==gY&&gX.widgetNode){g6.push(gX)}else{if(gN.from<=gY&&(gN.to==null||gN.to>gY||gX.collapsed&&gN.to==gY&&gN.from==gY)){if(gN.to!=null&&gN.to!=gY&&g5>gN.to){g5=gN.to;g3=""}if(gX.className){gQ+=" "+gX.className}if(gX.css){hc=(hc?hc+";":"")+gX.css}if(gX.startStyle&&gN.from==gY){gU+=" "+gX.startStyle}if(gX.endStyle&&gN.to==g5){(g9||(g9=[])).push(gX.endStyle,gN.to)}if(gX.title&&!g8){g8=gX.title}if(gX.collapsed&&(!gS||bP(gS.marker,gX)<0)){gS=gN}}else{if(gN.from>gY&&g5>gN.from){g5=gN.from}}}}if(g9){for(var g2=0;g2<g9.length;g2+=2){if(g9[g2+1]==g5){g3+=" "+g9[g2]}}}if(!gS||gS.from==gY){for(var gZ=0;gZ<g6.length;++gZ){g(g0,0,g6[gZ])}}if(gS&&(gS.from||0)==gY){g(g0,(gS.to==null?gP+1:gS.to)-gY,gS.marker,gS.from==null);if(gS.to==null){return}if(gS.to==gY){gS=false}}}if(gY>=gP){break}var hd=Math.min(gP,g5);while(true){if(he){var gR=gY+he.length;if(!gS){var gV=gR>hd?he.slice(0,hd-gY):he;g0.addToken(g0,gV,gT?gT+gQ:gQ,gU,gY+gV.length==g5?g3:"",g8,hc)}if(gR>=hd){he=he.slice(hd-gY);gY=hd;break}gY=gR;gU=""}he=g7.slice(gW,gW=ha[gO++]);gT=f0(ha[gO++],g0.cm.options)}}}function bl(i,gN,gO){this.line=gN;this.rest=cR(gN);this.size=this.rest?bZ(dp(this.rest))-gO+1:1;this.node=this.text=null;this.hidden=eh(i,gN)}function fW(gQ,gN,i){var gS=[],gP;for(var gR=gN;gR<i;gR=gP){var gO=new bl(gQ.doc,ff(gQ.doc,gR),gR);gP=gR+gO.size;gS.push(gO)}return gS}var cv=null;function c0(i){if(cv){cv.ops.push(i)}else{i.ownsGroup=cv={ops:[i],delayedCallbacks:[]}}}function E(i){var gQ=i.delayedCallbacks,gP=0;do{for(;gP<gQ.length;gP++){gQ[gP].call(null)}for(var gO=0;gO<i.ops.length;gO++){var gN=i.ops[gO];if(gN.cursorActivityHandlers){while(gN.cursorActivityCalled<gN.cursorActivityHandlers.length){gN.cursorActivityHandlers[gN.cursorActivityCalled++].call(null,gN.cm)}}}}while(gP<gQ.length)}function M(i,gO){var gN=i.ownsGroup;if(!gN){return}try{E(gN)}finally{cv=null;gO(gN)}}var aF=null;function j(gN,gS){var gO=gr(gN,gS);if(!gO.length){return}var gQ=Array.prototype.slice.call(arguments,2),i;if(cv){i=cv.delayedCallbacks}else{if(aF){i=aF}else{i=aF=[];setTimeout(bb,0)}}var gP=function(gT){i.push(function(){return gO[gT].apply(null,gQ)})};for(var gR=0;gR<gO.length;++gR){gP(gR)}}function bb(){var i=aF;aF=null;for(var gN=0;gN<i.length;++gN){i[gN]()}}function aD(gQ,gP,i,gN){for(var gO=0;gO<gP.changes.length;gO++){var gR=gP.changes[gO];if(gR=="text"){fq(gQ,gP)}else{if(gR=="gutter"){dc(gQ,gP,i,gN)}else{if(gR=="class"){dH(gP)}else{if(gR=="widget"){D(gQ,gP,gN)}}}}}gP.changes=null}function dA(i){if(i.node==i.text){i.node=gf("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(cm&&du<8){i.node.style.zIndex=2}}return i.node}function eE(gO){var gN=gO.bgClass?gO.bgClass+" "+(gO.line.bgClass||""):gO.line.bgClass;if(gN){gN+=" CodeMirror-linebackground"}if(gO.background){if(gN){gO.background.className=gN}else{gO.background.parentNode.removeChild(gO.background);gO.background=null}}else{if(gN){var i=dA(gO);gO.background=i.insertBefore(gf("div",null,gN),i.firstChild)}}}function cs(gN,gO){var i=gN.display.externalMeasured;if(i&&i.line==gO.line){gN.display.externalMeasured=null;gO.measure=i.measure;return i.built}return fc(gN,gO)}function fq(i,gN){var gO=gN.text.className;var gP=cs(i,gN);if(gN.text==gN.node){gN.node=gP.pre}gN.text.parentNode.replaceChild(gP.pre,gN.text);gN.text=gP.pre;if(gP.bgClass!=gN.bgClass||gP.textClass!=gN.textClass){gN.bgClass=gP.bgClass;gN.textClass=gP.textClass;dH(gN)}else{if(gO){gN.text.className=gO}}}function dH(i){eE(i);if(i.line.wrapClass){dA(i).className=i.line.wrapClass}else{if(i.node!=i.text){i.node.className=""}}var gN=i.textClass?i.textClass+" "+(i.line.textClass||""):i.line.textClass;i.text.className=gN||""}function dc(gT,gR,gQ,gS){if(gR.gutter){gR.node.removeChild(gR.gutter);gR.gutter=null}if(gR.gutterBackground){gR.node.removeChild(gR.gutterBackground);gR.gutterBackground=null}if(gR.line.gutterClass){var i=dA(gR);gR.gutterBackground=gf("div",null,"CodeMirror-gutter-background "+gR.line.gutterClass,("left: "+(gT.options.fixedGutter?gS.fixedPos:-gS.gutterTotalWidth)+"px; width: "+(gS.gutterTotalWidth)+"px"));i.insertBefore(gR.gutterBackground,gR.text)}var gO=gR.line.gutterMarkers;if(gT.options.lineNumbers||gO){var gU=dA(gR);var gP=gR.gutter=gf("div",null,"CodeMirror-gutter-wrapper",("left: "+(gT.options.fixedGutter?gS.fixedPos:-gS.gutterTotalWidth)+"px"));gT.display.input.setUneditable(gP);gU.insertBefore(gP,gR.text);if(gR.line.gutterClass){gP.className+=" "+gR.line.gutterClass}if(gT.options.lineNumbers&&(!gO||!gO["CodeMirror-linenumbers"])){gR.lineNumber=gP.appendChild(gf("div",ev(gT.options,gQ),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(gS.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(gT.display.lineNumInnerWidth)+"px")))}if(gO){for(var gN=0;gN<gT.options.gutters.length;++gN){var gV=gT.options.gutters[gN],gW=gO.hasOwnProperty(gV)&&gO[gV];if(gW){gP.appendChild(gf("div",[gW],"CodeMirror-gutter-elt",("left: "+(gS.gutterLeft[gV])+"px; width: "+(gS.gutterWidth[gV])+"px")))}}}}}function D(gQ,gO,gN){if(gO.alignable){gO.alignable=null}for(var i=gO.node.firstChild,gP=void 0;i;i=gP){gP=i.nextSibling;if(i.className=="CodeMirror-linewidget"){gO.node.removeChild(i)}}dY(gQ,gO,gN)}function aR(gQ,gP,i,gN){var gO=cs(gQ,gP);gP.text=gP.node=gO.pre;if(gO.bgClass){gP.bgClass=gO.bgClass}if(gO.textClass){gP.textClass=gO.textClass}dH(gP);dc(gQ,gP,i,gN);dY(gQ,gP,gN);return gP.node}function dY(gO,i,gN){gi(gO,i.line,i,gN,true);if(i.rest){for(var gP=0;gP<i.rest.length;gP++){gi(gO,i.rest[gP],i,gN,false)}}}function gi(gU,gV,gR,gT,gP){if(!gV.widgets){return}var i=dA(gR);for(var gO=0,gS=gV.widgets;gO<gS.length;++gO){var gQ=gS[gO],gN=gf("div",[gQ.node],"CodeMirror-linewidget");if(!gQ.handleMouseEvents){gN.setAttribute("cm-ignore-events","true")}r(gQ,gN,gR,gT);gU.display.input.setUneditable(gN);if(gP&&gQ.above){i.insertBefore(gN,gR.gutter||gR.text)}else{i.appendChild(gN)}j(gQ,"redraw")}}function r(gQ,gP,i,gN){if(gQ.noHScroll){(i.alignable||(i.alignable=[])).push(gP);var gO=gN.wrapperWidth;gP.style.left=gN.fixedPos+"px";if(!gQ.coverGutter){gO-=gN.gutterTotalWidth;gP.style.paddingLeft=gN.gutterTotalWidth+"px"}gP.style.width=gO+"px"}if(gQ.coverGutter){gP.style.zIndex=5;gP.style.position="relative";if(!gQ.noHScroll){gP.style.marginLeft=-gN.gutterTotalWidth+"px"}}}function cf(i){if(i.height!=null){return i.height}var gN=i.doc.cm;if(!gN){return 0}if(!fU(document.body,i.node)){var gO="position: relative;";if(i.coverGutter){gO+="margin-left: -"+gN.display.gutters.offsetWidth+"px;"}if(i.noHScroll){gO+="width: "+gN.display.wrapper.clientWidth+"px;"}a5(gN.display.measure,gf("div",[i.node],null,gO))}return i.height=i.node.parentNode.offsetHeight}function H(gO,gN){for(var i=aC(gN);i!=gO.wrapper;i=i.parentNode){if(!i||(i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true")||(i.parentNode==gO.sizer&&i!=gO.mover)){return true}}}function eY(i){return i.lineSpace.offsetTop}function x(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function eM(i){if(i.cachedPaddingH){return i.cachedPaddingH}var gP=a5(i.measure,gf("pre","x"));var gN=window.getComputedStyle?window.getComputedStyle(gP):gP.currentStyle;var gO={left:parseInt(gN.paddingLeft),right:parseInt(gN.paddingRight)};if(!isNaN(gO.left)&&!isNaN(gO.right)){i.cachedPaddingH=gO}return gO}function br(i){return cc-i.display.nativeBarWidth}function fS(i){return i.display.scroller.clientWidth-br(i)-i.display.barWidth}function bR(i){return i.display.scroller.clientHeight-br(i)-i.display.barHeight}function dC(gT,gP,gS){var gO=gT.options.lineWrapping;var gQ=gO&&fS(gT);if(!gP.measure.heights||gO&&gP.measure.width!=gQ){var gR=gP.measure.heights=[];if(gO){gP.measure.width=gQ;var gV=gP.text.firstChild.getClientRects();for(var i=0;i<gV.length-1;i++){var gU=gV[i],gN=gV[i+1];if(Math.abs(gU.bottom-gN.bottom)>2){gR.push((gU.bottom+gN.top)/2-gS.top)}}}gR.push(gS.bottom-gS.top)}}function d0(gQ,gO,i){if(gQ.line==gO){return{map:gQ.measure.map,cache:gQ.measure.cache}}for(var gP=0;gP<gQ.rest.length;gP++){if(gQ.rest[gP]==gO){return{map:gQ.measure.maps[gP],cache:gQ.measure.caches[gP]}}}for(var gN=0;gN<gQ.rest.length;gN++){if(bZ(gQ.rest[gN])>i){return{map:gQ.measure.maps[gN],cache:gQ.measure.caches[gN],before:true}}}}function bc(gQ,gP){gP=dU(gP);var gN=bZ(gP);var gO=gQ.display.externalMeasured=new bl(gQ.doc,gP,gN);gO.lineN=gN;var i=gO.built=fc(gQ,gO);gO.text=i.pre;a5(gQ.display.lineMeasure,i.pre);return gO}function ez(i,gO,gN,gP){return bF(i,gy(i,gO),gN,gP)}function e7(gN,i){if(i>=gN.display.viewFrom&&i<gN.display.viewTo){return gN.display.view[e4(gN,i)]}var gO=gN.display.externalMeasured;if(gO&&i>=gO.lineN&&i<gO.lineN+gO.size){return gO}}function gy(gQ,gP){var i=bZ(gP);var gO=e7(gQ,i);if(gO&&!gO.text){gO=null}else{if(gO&&gO.changes){aD(gQ,gO,i,fa(gQ));gQ.curOp.forceUpdate=true}}if(!gO){gO=bc(gQ,gP)}var gN=d0(gO,gP,i);return{line:gP,view:gO,rect:null,map:gN.map,cache:gN.cache,before:gN.before,hasHeights:false}}function bF(gQ,gN,gS,gO,gR){if(gN.before){gS=-1}var gP=gS+(gO||""),i;if(gN.cache.hasOwnProperty(gP)){i=gN.cache[gP]}else{if(!gN.rect){gN.rect=gN.view.text.getBoundingClientRect()}if(!gN.hasHeights){dC(gQ,gN.view,gN.rect);gN.hasHeights=true}i=dl(gQ,gN,gS,gO);if(!i.bogus){gN.cache[gP]=i}}return{left:i.left,right:i.right,top:gR?i.rtop:i.top,bottom:gR?i.rbottom:i.bottom}}var dk={left:0,right:0,top:0,bottom:0};function a6(gV,i,gS){var gO,gN,gQ,gT,gP,gU;for(var gR=0;gR<gV.length;gR+=3){gP=gV[gR];gU=gV[gR+1];if(i<gP){gN=0;gQ=1;gT="left"}else{if(i<gU){gN=i-gP;gQ=gN+1}else{if(gR==gV.length-3||i==gU&&gV[gR+3]>i){gQ=gU-gP;gN=gQ-1;if(i>=gU){gT="right"}}}}if(gN!=null){gO=gV[gR+2];if(gP==gU&&gS==(gO.insertLeft?"left":"right")){gT=gS}if(gS=="left"&&gN==0){while(gR&&gV[gR-2]==gV[gR-3]&&gV[gR-1].insertLeft){gO=gV[(gR-=3)+2];gT="left"}}if(gS=="right"&&gN==gU-gP){while(gR<gV.length-3&&gV[gR+3]==gV[gR+4]&&!gV[gR+5].insertLeft){gO=gV[(gR+=3)+2];gT="right"}}break}}return{node:gO,start:gN,end:gQ,collapse:gT,coverStart:gP,coverEnd:gU}}function fK(gP,gO){var i=dk;if(gO=="left"){for(var gQ=0;gQ<gP.length;gQ++){if((i=gP[gQ]).left!=i.right){break}}}else{for(var gN=gP.length-1;gN>=0;gN--){if((i=gP[gN]).left!=i.right){break}}}return i}function dl(g0,gP,g3,gX){var g1=a6(gP.map,g3,gX);var gN=g1.node,gW=g1.start,gV=g1.end,gS=g1.collapse;var gT;if(gN.nodeType==3){for(var gY=0;gY<4;gY++){while(gW&&fD(gP.line.text.charAt(g1.coverStart+gW))){--gW}while(g1.coverStart+gV<g1.coverEnd&&fD(gP.line.text.charAt(g1.coverStart+gV))){++gV}if(cm&&du<9&&gW==0&&gV==g1.coverEnd-g1.coverStart){gT=gN.parentNode.getBoundingClientRect()}else{gT=fK(cp(gN,gW,gV).getClientRects(),gX)}if(gT.left||gT.right||gW==0){break}gV=gW;gW=gW-1;gS="right"}if(cm&&du<11){gT=ck(g0.display.measure,gT)}}else{if(gW>0){gS=gX="right"}var gU;if(g0.options.lineWrapping&&(gU=gN.getClientRects()).length>1){gT=gU[gX=="right"?gU.length-1:0]}else{gT=gN.getBoundingClientRect()}}if(cm&&du<9&&!gW&&(!gT||!gT.left&&!gT.right)){var gZ=gN.parentNode.getClientRects()[0];if(gZ){gT={left:gZ.left,right:gZ.left+dq(g0.display),top:gZ.top,bottom:gZ.bottom}}else{gT=dk}}var g6=gT.top-gP.rect.top,g4=gT.bottom-gP.rect.top;var gR=(g6+g4)/2;var gQ=gP.view.measure.heights;var gO=0;for(;gO<gQ.length-1;gO++){if(gR<gQ[gO]){break}}var i=gO?gQ[gO-1]:0,g5=gQ[gO];var g2={left:(gS=="right"?gT.right:gT.left)-gP.rect.left,right:(gS=="left"?gT.left:gT.right)-gP.rect.left,top:i,bottom:g5};if(!gT.left&&!gT.right){g2.bogus=true}if(!g0.options.singleCursorHeightPerLine){g2.rtop=g6;g2.rbottom=g4}return g2}function ck(gP,i){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!a9(gP)){return i}var gO=screen.logicalXDPI/screen.deviceXDPI;var gN=screen.logicalYDPI/screen.deviceYDPI;return{left:i.left*gO,right:i.right*gO,top:i.top*gN,bottom:i.bottom*gN}}function a2(gN){if(gN.measure){gN.measure.cache={};gN.measure.heights=null;if(gN.rest){for(var i=0;i<gN.rest.length;i++){gN.measure.caches[i]={}}}}}function I(i){i.display.externalMeasure=null;fe(i.display.lineMeasure);for(var gN=0;gN<i.display.view.length;gN++){a2(i.display.view[gN])}}function t(i){I(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function d9(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dQ(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eP(gT,gQ,gS,gN,gP){if(!gP&&gQ.widgets){for(var gO=0;gO<gQ.widgets.length;++gO){if(gQ.widgets[gO].above){var gV=cf(gQ.widgets[gO]);gS.top+=gV;gS.bottom+=gV}}}if(gN=="line"){return gS}if(!gN){gN="local"}var gR=bT(gQ);if(gN=="local"){gR+=eY(gT.display)}else{gR-=gT.display.viewOffset}if(gN=="page"||gN=="window"){var i=gT.display.lineSpace.getBoundingClientRect();gR+=i.top+(gN=="window"?0:dQ());var gU=i.left+(gN=="window"?0:d9());gS.left+=gU;gS.right+=gU}gS.top+=gR;gS.bottom+=gR;return gS}function f6(gO,gS,gP){if(gP=="div"){return gS}var gN=gS.left,i=gS.top;if(gP=="page"){gN-=d9();i-=dQ()}else{if(gP=="local"||!gP){var gQ=gO.display.sizer.getBoundingClientRect();gN+=gQ.left;i+=gQ.top}}var gR=gO.display.lineSpace.getBoundingClientRect();return{left:gN-gR.left,top:i-gR.top}}function bW(gQ,gN,i,gP,gO){if(!gP){gP=ff(gQ.doc,gN.line)}return eP(gQ,gP,ez(gQ,gP,gN.ch,gO),i)}function cl(gU,gT,gN,gR,gX,gS){gR=gR||ff(gU.doc,gT.line);if(!gX){gX=gy(gU,gR)}function gP(g0,gZ){var gY=bF(gU,gX,g0,gZ?"right":"left",gS);if(gZ){gY.left=gY.right}else{gY.right=gY.left}return eP(gU,gR,gY,gN)}function gW(g1,gY){var gZ=gQ[gY],g0=gZ.level%2;if(g1==cZ(gZ)&&gY&&gZ.level<gQ[gY-1].level){gZ=gQ[--gY];g1=f5(gZ)-(gZ.level%2?0:1);g0=true}else{if(g1==f5(gZ)&&gY<gQ.length-1&&gZ.level<gQ[gY+1].level){gZ=gQ[++gY];g1=cZ(gZ)-gZ.level%2;g0=false}}if(g0&&g1==gZ.to&&g1>gZ.from){return gP(g1-1)}return gP(g1,g0)}var gQ=by(gR),gV=gT.ch;if(!gQ){return gP(gV)}var i=aW(gQ,gV);var gO=gW(gV,i);if(eF!=null){gO.other=gW(gV,eF)}return gO}function bM(gQ,gN){var i=0;gN=fT(gQ.doc,gN);if(!gQ.options.lineWrapping){i=dq(gQ.display)*gN.ch}var gO=ff(gQ.doc,gN.line);var gP=bT(gO)+eY(gQ.display);return{left:i,right:i,top:gP,bottom:gP+gO.height}}function gK(gQ,gO,gP,gN){var i=cG(gQ,gO);i.xRel=gN;if(gP){i.outside=true}return i}function fr(gS,gP,gO){var gR=gS.doc;gO+=gS.display.viewOffset;if(gO<0){return gK(gR.first,0,true,-1)}var gN=w(gR,gO),gT=gR.first+gR.size-1;if(gN>gT){return gK(gR.first+gR.size-1,ff(gR,gT).text.length,true,1)}if(gP<0){gP=0}var i=ff(gR,gN);for(;;){var gU=aN(gS,i,gN,gP,gO);var gQ=cI(i);var gV=gQ&&gQ.find(0,true);if(gQ&&(gU.ch>gV.from.ch||gU.ch==gV.from.ch&&gU.xRel>0)){gN=bZ(i=gV.to.line)}else{return gU}}}function aN(g8,gU,g1,ha,g9){var g7=g9-bT(gU);var g3=false,gN=2*g8.display.wrapper.clientWidth;var gV=gy(g8,gU);function gW(he){var hd=cl(g8,cG(g1,he),"line",gU,gV);g3=true;if(g7>hd.bottom){return hd.left-gN}else{if(g7<hd.top){return hd.left+gN}else{g3=false}}return hd.left}var hc=by(gU),i=gU.text.length;var gO=ay(gU),gY=bn(gU);var gX=gW(gO),gS=g3,gT=gW(gY),g2=g3;if(ha>gT){return gK(g1,gY,g2,1)}for(;;){if(hc?gY==gO||gY==cF(gU,gO,1):gY-gO<=1){var hb=ha<gX||ha-gX<=gT-ha?gO:gY;var gZ=hb==gO?gS:g2;var gR=ha-(hb==gO?gX:gT);if(g2&&!hc&&!/\s/.test(gU.text.charAt(hb))&&gR>0&&hb<gU.text.length&&gV.view.measure.heights.length>1){var gP=bF(g8,gV,hb,"right");if(g7<=gP.bottom&&g7>=gP.top&&Math.abs(ha-gP.right)<gR){gZ=false;hb++;gR=ha-gP.right}}while(fD(gU.text.charAt(hb))){++hb}var g6=gK(g1,hb,gZ,gR<-1?-1:gR>1?1:0);return g6}var g5=Math.ceil(i/2),g4=gO+g5;if(hc){g4=gO;for(var gQ=0;gQ<g5;++gQ){g4=cF(gU,g4,1)}}var g0=gW(g4);if(g0>ha){gY=g4;gT=g0;if(g2=g3){gT+=1000}i=g5}else{gO=g4;gX=g0;gS=g3;i-=g5}}}var aU;function ax(gN){if(gN.cachedTextHeight!=null){return gN.cachedTextHeight}if(aU==null){aU=gf("pre");for(var i=0;i<49;++i){aU.appendChild(document.createTextNode("x"));aU.appendChild(gf("br"))}aU.appendChild(document.createTextNode("x"))}a5(gN.measure,aU);var gO=aU.offsetHeight/50;if(gO>3){gN.cachedTextHeight=gO}fe(gN.measure);return gO||1}function dq(gN){if(gN.cachedCharWidth!=null){return gN.cachedCharWidth}var gQ=gf("span","xxxxxxxxxx");var i=gf("pre",[gQ]);a5(gN.measure,i);var gP=gQ.getBoundingClientRect(),gO=(gP.right-gP.left)/10;if(gO>2){gN.cachedCharWidth=gO}return gO||10}function fa(gO){var i=gO.display,gR={},gQ={};var gS=i.gutters.clientLeft;for(var gN=i.gutters.firstChild,gP=0;gN;gN=gN.nextSibling,++gP){gR[gO.options.gutters[gP]]=gN.offsetLeft+gN.clientLeft+gS;gQ[gO.options.gutters[gP]]=gN.clientWidth}return{fixedPos:aO(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:gR,gutterWidth:gQ,wrapperWidth:i.wrapper.clientWidth}}function aO(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function aa(i){var gP=ax(i.display),gO=i.options.lineWrapping;var gN=gO&&Math.max(5,i.display.scroller.clientWidth/dq(i.display)-3);return function(gR){if(eh(i.doc,gR)){return 0}var gQ=0;if(gR.widgets){for(var gS=0;gS<gR.widgets.length;gS++){if(gR.widgets[gS].height){gQ+=gR.widgets[gS].height}}}if(gO){return gQ+(Math.ceil(gR.text.length/gN)||1)*gP}else{return gQ+gP}}}function a3(gN){var i=gN.doc,gO=aa(gN);i.iter(function(gP){var gQ=gO(gP);if(gQ!=gP.height){gm(gP,gQ)}})}function ct(gV,gP,i,gN){var gQ=gV.display;if(!i&&aC(gP).getAttribute("cm-not-content")=="true"){return null}var gT,gR,gU=gQ.lineSpace.getBoundingClientRect();try{gT=gP.clientX-gU.left;gR=gP.clientY-gU.top}catch(gP){return null}var gS=fr(gV,gT,gR),gW;if(gN&&gS.xRel==1&&(gW=ff(gV.doc,gS.line).text).length==gS.ch){var gO=aT(gW,gW.length,gV.options.tabSize)-gW.length;gS=cG(gS.line,Math.max(0,Math.round((gT-eM(gV.display).left)/dq(gV.display))-gO))}return gS}function e4(gO,gN){if(gN>=gO.display.viewTo){return null}gN-=gO.display.viewFrom;if(gN<0){return null}var gP=gO.display.view;for(var i=0;i<gP.length;i++){gN-=gP[i].size;if(gN<0){return i}}}function l(i){i.display.input.showSelection(i.display.input.prepareSelection())}function fI(gS,i){var gR=gS.doc,gU={};var gQ=gU.cursors=document.createDocumentFragment();var gN=gU.selection=document.createDocumentFragment();for(var gP=0;gP<gR.sel.ranges.length;gP++){if(i===false&&gP==gR.sel.primIndex){continue}var gT=gR.sel.ranges[gP];if(gT.from().line>=gS.display.viewTo||gT.to().line<gS.display.viewFrom){continue}var gO=gT.empty();if(gO||gS.options.showCursorWhenSelecting){bz(gS,gT.head,gQ)}if(!gO){n(gS,gT,gN)}}return gU}function bz(gQ,gR,gP){var gN=cl(gQ,gR,"div",null,null,!gQ.options.singleCursorHeightPerLine);var i=gP.appendChild(gf("div","\u00a0","CodeMirror-cursor"));i.style.left=gN.left+"px";i.style.top=gN.top+"px";i.style.height=Math.max(0,gN.bottom-gN.top)*gQ.options.cursorHeight+"px";if(gN.other){var gO=gP.appendChild(gf("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gO.style.display="";gO.style.left=gN.other.left+"px";gO.style.top=gN.other.top+"px";gO.style.height=(gN.other.bottom-gN.other.top)*0.85+"px"}}function n(gT,gS,gU){var g1=gT.display,gN=gT.doc;var gO=document.createDocumentFragment();var gY=eM(gT.display),gR=gY.left;var g2=Math.max(g1.sizerWidth,fS(gT)-g1.sizer.offsetLeft)-gY.right;function gZ(g7,g6,g5,g4){if(g6<0){g6=0}g6=Math.round(g6);g4=Math.round(g4);gO.appendChild(gf("div",null,"CodeMirror-selected",("position: absolute; left: "+g7+"px;\n                             top: "+g6+"px; width: "+(g5==null?g2-g7:g5)+"px;\n                             height: "+(g4-g6)+"px")))}function gP(hb,g6,g9){var g5=ff(gN,hb);var g7=g5.text.length;var g4,ha;function g8(hd,hc){return bW(gT,cG(hb,hd),"div",g5,hc)}ft(by(g5),g6||0,g9==null?g7:g9,function(hj,hi,hc){var hf=g8(hj,"left"),hg,hh,he;if(hj==hi){hg=hf;hh=he=hf.left}else{hg=g8(hi-1,"right");if(hc=="rtl"){var hd=hf;hf=hg;hg=hd}hh=hf.left;he=hg.right}if(g6==null&&hj==0){hh=gR}if(hg.top-hf.top>3){gZ(hh,hf.top,null,hf.bottom);hh=gR;if(hf.bottom<hg.top){gZ(hh,hf.bottom,null,hg.top)}}if(g9==null&&hi==g7){he=g2}if(!g4||hf.top<g4.top||hf.top==g4.top&&hf.left<g4.left){g4=hf}if(!ha||hg.bottom>ha.bottom||hg.bottom==ha.bottom&&hg.right>ha.right){ha=hg}if(hh<gR+1){hh=gR}gZ(hh,hg.top,he-hh,hg.bottom)});return{start:g4,end:ha}}var i=gS.from(),g3=gS.to();if(i.line==g3.line){gP(i.line,i.ch,g3.ch)}else{var gQ=ff(gN,i.line),gW=ff(gN,g3.line);var gV=dU(gQ)==dU(gW);var gX=gP(i.line,i.ch,gV?gQ.text.length+1:null).end;var g0=gP(g3.line,gV?0:null,g3.ch).start;if(gV){if(gX.top<g0.top-2){gZ(gX.right,gX.top,null,gX.bottom);gZ(gR,g0.top,g0.left,g0.bottom)}else{gZ(gX.right,gX.top,g0.left-gX.right,gX.bottom)}}if(gX.bottom<g0.top){gZ(gR,gX.bottom,null,g0.top)}}gU.appendChild(gO)}function bU(gN){if(!gN.state.focused){return}var i=gN.display;clearInterval(i.blinker);var gO=true;i.cursorDiv.style.visibility="";if(gN.options.cursorBlinkRate>0){i.blinker=setInterval(function(){return i.cursorDiv.style.visibility=(gO=!gO)?"":"hidden"},gN.options.cursorBlinkRate)}else{if(gN.options.cursorBlinkRate<0){i.cursorDiv.style.visibility="hidden"}}}function cq(i){if(!i.state.focused){i.display.input.focus();af(i)}}function v(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;ak(i)}},100)}function af(gN,i){if(gN.state.delayingBlurEvent){gN.state.delayingBlurEvent=false}if(gN.options.readOnly=="nocursor"){return}if(!gN.state.focused){aM(gN,"focus",gN,i);gN.state.focused=true;gn(gN.display.wrapper,"CodeMirror-focused");if(!gN.curOp&&gN.display.selForContextMenu!=gN.doc.sel){gN.display.input.reset();if(aX){setTimeout(function(){return gN.display.input.reset(true)},20)}}gN.display.input.receivedFocus()}bU(gN)}function ak(gN,i){if(gN.state.delayingBlurEvent){return}if(gN.state.focused){aM(gN,"blur",gN,i);gN.state.focused=false;c2(gN.display.wrapper,"CodeMirror-focused")}clearInterval(gN.display.blinker);setTimeout(function(){if(!gN.state.focused){gN.display.shift=false}},150)}function dG(gU){var gS=gU.display,gT=gS.view;if(!gS.alignWidgets&&(!gS.gutters.firstChild||!gU.options.fixedGutter)){return}var gQ=aO(gS)-gS.scroller.scrollLeft+gU.doc.scrollLeft;var i=gS.gutters.offsetWidth,gN=gQ+"px";for(var gP=0;gP<gT.length;gP++){if(!gT[gP].hidden){if(gU.options.fixedGutter){if(gT[gP].gutter){gT[gP].gutter.style.left=gN}if(gT[gP].gutterBackground){gT[gP].gutterBackground.style.left=gN}}var gR=gT[gP].alignable;if(gR){for(var gO=0;gO<gR.length;gO++){gR[gO].style.left=gN}}}}if(gU.options.fixedGutter){gS.gutters.style.left=(gQ+i)+"px"}}function fx(gQ){if(!gQ.options.lineNumbers){return false}var i=gQ.doc,gO=ev(gQ.options,i.first+i.size-1),gS=gQ.display;if(gO.length!=gS.lineNumChars){var gN=gS.measure.appendChild(gf("div",[gf("div",gO)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gP=gN.firstChild.offsetWidth,gR=gN.offsetWidth-gP;gS.lineGutter.style.width="";gS.lineNumInnerWidth=Math.max(gP,gS.lineGutter.offsetWidth-gR)+1;gS.lineNumWidth=gS.lineNumInnerWidth+gR;gS.lineNumChars=gS.lineNumInnerWidth?gO.length:-1;gS.lineGutter.style.width=gS.lineNumWidth+"px";ed(gQ);return true}return false}function gM(gT){var gR=gT.display;var gN=gR.lineDiv.offsetTop;for(var gO=0;gO<gR.view.length;gO++){var gU=gR.view[gO],gV=void 0;if(gU.hidden){continue}if(cm&&du<8){var gQ=gU.node.offsetTop+gU.node.offsetHeight;gV=gQ-gN;gN=gQ}else{var gP=gU.node.getBoundingClientRect();gV=gP.bottom-gP.top}var gS=gU.line.height-gV;if(gV<2){gV=ax(gR)}if(gS>0.001||gS<-0.001){gm(gU.line,gV);cO(gU.line);if(gU.rest){for(var i=0;i<gU.rest.length;i++){cO(gU.rest[i])}}}}}function cO(i){if(i.widgets){for(var gN=0;gN<i.widgets.length;++gN){i.widgets[gN].height=i.widgets[gN].node.parentNode.offsetHeight}}}function bB(gO,gS,gN){var gP=gN&&gN.top!=null?Math.max(0,gN.top):gO.scroller.scrollTop;gP=Math.floor(gP-eY(gO));var gU=gN&&gN.bottom!=null?gN.bottom:gP+gO.wrapper.clientHeight;var gQ=w(gS,gP),gR=w(gS,gU);if(gN&&gN.ensure){var i=gN.ensure.from.line,gT=gN.ensure.to.line;if(i<gQ){gQ=i;gR=w(gS,bT(ff(gS,i))+gO.wrapper.clientHeight)}else{if(Math.min(gT,gS.lastLine())>=gR){gQ=w(gS,bT(ff(gS,gT))-gO.wrapper.clientHeight);gR=gT}}}return{from:gQ,to:Math.max(gR,gQ+1)}}function c3(gN,i){if(Math.abs(gN.doc.scrollTop-i)<2){return}gN.doc.scrollTop=i;if(!cB){ch(gN,{top:i})}if(gN.display.scroller.scrollTop!=i){gN.display.scroller.scrollTop=i}gN.display.scrollbars.setScrollTop(i);if(cB){ch(gN)}el(gN,100)}function p(gN,i,gO){if(gO?i==gN.doc.scrollLeft:Math.abs(gN.doc.scrollLeft-i)<2){return}i=Math.min(i,gN.display.scroller.scrollWidth-gN.display.scroller.clientWidth);gN.doc.scrollLeft=i;dG(gN);if(gN.display.scroller.scrollLeft!=i){gN.display.scroller.scrollLeft=i}gN.display.scrollbars.setScrollLeft(i)}var fv=0;var dw=null;if(cm){dw=-0.53}else{if(cB){dw=15}else{if(cU){dw=-0.7}else{if(d){dw=-1/3}}}}function a0(i){var gO=i.wheelDeltaX,gN=i.wheelDeltaY;if(gO==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS){gO=i.detail}if(gN==null&&i.detail&&i.axis==i.VERTICAL_AXIS){gN=i.detail}else{if(gN==null){gN=i.wheelDelta}}return{x:gO,y:gN}}function bx(gN){var i=a0(gN);i.x*=dw;i.y*=dw;return i}function dR(gW,gQ){var gY=a0(gQ),g0=gY.x,gZ=gY.y;var gS=gW.display,gV=gS.scroller;var gP=gV.scrollWidth>gV.clientWidth;var gO=gV.scrollHeight>gV.clientHeight;if(!(g0&&gP||gZ&&gO)){return}if(gZ&&dP&&aX){outer:for(var gX=gQ.target,gU=gS.view;gX!=gV;gX=gX.parentNode){for(var gN=0;gN<gU.length;gN++){if(gU[gN].node==gX){gW.display.currentWheelTarget=gX;break outer}}}}if(g0&&!cB&&!fj&&dw!=null){if(gZ&&gO){c3(gW,Math.max(0,Math.min(gV.scrollTop+gZ*dw,gV.scrollHeight-gV.clientHeight)))}p(gW,Math.max(0,Math.min(gV.scrollLeft+g0*dw,gV.scrollWidth-gV.clientWidth)));if(!gZ||(gZ&&gO)){cT(gQ)}gS.wheelStartX=null;return}if(gZ&&dw!=null){var i=gZ*dw;var gT=gW.doc.scrollTop,gR=gT+gS.wrapper.clientHeight;if(i<0){gT=Math.max(0,gT+i-50)}else{gR=Math.min(gW.doc.height,gR+i+50)}ch(gW,{top:gT,bottom:gR})}if(fv<20){if(gS.wheelStartX==null){gS.wheelStartX=gV.scrollLeft;gS.wheelStartY=gV.scrollTop;gS.wheelDX=g0;gS.wheelDY=gZ;setTimeout(function(){if(gS.wheelStartX==null){return}var g1=gV.scrollLeft-gS.wheelStartX;var g3=gV.scrollTop-gS.wheelStartY;var g2=(g3&&gS.wheelDY&&g3/gS.wheelDY)||(g1&&gS.wheelDX&&g1/gS.wheelDX);gS.wheelStartX=gS.wheelStartY=null;if(!g2){return}dw=(dw*fv+g2)/(fv+1);++fv},200)}else{gS.wheelDX+=g0;gS.wheelDY+=gZ}}}function c6(i){var gN=i.display,gP=gN.gutters.offsetWidth;var gO=Math.round(i.doc.height+x(i.display));return{clientHeight:gN.scroller.clientHeight,viewHeight:gN.wrapper.clientHeight,scrollWidth:gN.scroller.scrollWidth,clientWidth:gN.scroller.clientWidth,viewWidth:gN.wrapper.clientWidth,barLeft:i.options.fixedGutter?gP:0,docHeight:gO,scrollHeight:gO+br(i)+gN.barHeight,nativeBarWidth:gN.nativeBarWidth,gutterWidth:gP}}function fM(gP,gO,gQ){this.cm=gQ;var i=this.vert=gf("div",[gf("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gN=this.horiz=gf("div",[gf("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gP(i);gP(gN);J(i,"scroll",function(){if(i.clientHeight){gO(i.scrollTop,"vertical")}});J(gN,"scroll",function(){if(gN.clientWidth){gO(gN.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(cm&&du<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}fM.prototype=bd({update:function(gQ){var i=gQ.scrollWidth>gQ.clientWidth+1;var gP=gQ.scrollHeight>gQ.clientHeight+1;var gN=gQ.nativeBarWidth;if(gP){this.vert.style.display="block";this.vert.style.bottom=i?gN+"px":"0";var gO=gQ.viewHeight-(i?gN:0);this.vert.firstChild.style.height=Math.max(0,gQ.scrollHeight-gQ.clientHeight+gO)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(i){this.horiz.style.display="block";this.horiz.style.right=gP?gN+"px":"0";this.horiz.style.left=gQ.barLeft+"px";var gR=gQ.viewWidth-gQ.barLeft-(gP?gN:0);this.horiz.firstChild.style.width=(gQ.scrollWidth-gQ.clientWidth+gR)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gQ.clientHeight>0){if(gN==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gP?gN:0,bottom:i?gN:0}},setScrollLeft:function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}},setScrollTop:function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}},zeroWidthHack:function(){var i=dP&&!eq?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new ge;this.disableVert=new ge},enableZeroWidthBar:function(gO,gN){gO.style.pointerEvents="auto";function i(){var gQ=gO.getBoundingClientRect();var gP=document.elementFromPoint(gQ.left+1,gQ.bottom-1);if(gP!=gO){gO.style.pointerEvents="none"}else{gN.set(1000,i)}}gN.set(1000,i)},clear:function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)}},fM.prototype);function eH(){}eH.prototype=bd({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},eH.prototype);function f4(gQ,gN){if(!gN){gN=c6(gQ)}var gP=gQ.display.barWidth,gO=gQ.display.barHeight;ag(gQ,gN);for(var i=0;i<4&&gP!=gQ.display.barWidth||gO!=gQ.display.barHeight;i++){if(gP!=gQ.display.barWidth&&gQ.options.lineWrapping){gM(gQ)}ag(gQ,c6(gQ));gP=gQ.display.barWidth;gO=gQ.display.barHeight}}function ag(i,gO){var gN=i.display;var gP=gN.scrollbars.update(gO);gN.sizer.style.paddingRight=(gN.barWidth=gP.right)+"px";gN.sizer.style.paddingBottom=(gN.barHeight=gP.bottom)+"px";gN.heightForcer.style.borderBottom=gP.bottom+"px solid transparent";if(gP.right&&gP.bottom){gN.scrollbarFiller.style.display="block";gN.scrollbarFiller.style.height=gP.bottom+"px";gN.scrollbarFiller.style.width=gP.right+"px"}else{gN.scrollbarFiller.style.display=""}if(gP.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){gN.gutterFiller.style.display="block";gN.gutterFiller.style.height=gP.bottom+"px";gN.gutterFiller.style.width=gO.gutterWidth+"px"}else{gN.gutterFiller.style.display=""}}var bN={"native":fM,"null":eH};function e(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){c2(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new bN[i.options.scrollbarStyle](function(gN){i.display.wrapper.insertBefore(gN,i.display.scrollbarFiller);J(gN,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});gN.setAttribute("cm-not-content","true")},function(gN,gO){if(gO=="horizontal"){p(i,gN)}else{c3(i,gN)}},i);if(i.display.scrollbars.addClass){gn(i.display.wrapper,i.display.scrollbars.addClass)}}function fz(gO,i){if(U(gO,"scrollCursorIntoView")){return}var gN=gO.display,gP=gN.sizer.getBoundingClientRect(),gQ=null;if(i.top+gP.top<0){gQ=true}else{if(i.bottom+gP.top>(window.innerHeight||document.documentElement.clientHeight)){gQ=false}}if(gQ!=null&&!d5){var gR=gf("div","\u200b",null,("position: absolute;\n                         top: "+(i.top-gN.viewOffset-eY(gO.display))+"px;\n                         height: "+(i.bottom-i.top+br(gO)+gN.barHeight)+"px;\n                         left: "+(i.left)+"px; width: 2px;"));gO.display.lineSpace.appendChild(gR);gR.scrollIntoView(gQ);gO.display.lineSpace.removeChild(gR)}}function K(gW,gT,gP,gO){if(gO==null){gO=0}var gV;for(var gQ=0;gQ<5;gQ++){var gR=false;gV=cl(gW,gT);var gU=!gP||gP==gT?gV:cl(gW,gP);var gN=ae(gW,Math.min(gV.left,gU.left),Math.min(gV.top,gU.top)-gO,Math.max(gV.left,gU.left),Math.max(gV.bottom,gU.bottom)+gO);var gS=gW.doc.scrollTop,i=gW.doc.scrollLeft;if(gN.scrollTop!=null){c3(gW,gN.scrollTop);if(Math.abs(gW.doc.scrollTop-gS)>1){gR=true}}if(gN.scrollLeft!=null){p(gW,gN.scrollLeft);if(Math.abs(gW.doc.scrollLeft-i)>1){gR=true}}if(!gR){break}}return gV}function S(gQ,gP,i,gO,gR){var gN=ae(gQ,gP,i,gO,gR);if(gN.scrollTop!=null){c3(gQ,gN.scrollTop)}if(gN.scrollLeft!=null){p(gQ,gN.scrollLeft)}}function ae(gZ,gP,gY,gN,gX){var gU=gZ.display,gS=ax(gZ.display);if(gY<0){gY=0}var gQ=gZ.curOp&&gZ.curOp.scrollTop!=null?gZ.curOp.scrollTop:gU.scroller.scrollTop;var g1=bR(gZ),i={};if(gX-gY>g1){gX=gY+g1}var gO=gZ.doc.height+x(gU);var gV=gY<gS,gT=gX>gO-gS;if(gY<gQ){i.scrollTop=gV?0:gY}else{if(gX>gQ+g1){var gW=Math.min(gY,(gT?gO:gX)-g1);if(gW!=gQ){i.scrollTop=gW}}}var g2=gZ.curOp&&gZ.curOp.scrollLeft!=null?gZ.curOp.scrollLeft:gU.scroller.scrollLeft;var g0=fS(gZ)-(gZ.options.fixedGutter?gU.gutters.offsetWidth:0);var gR=gN-gP>g0;if(gR){gN=gP+g0}if(gP<10){i.scrollLeft=0}else{if(gP<g2){i.scrollLeft=Math.max(0,gP-(gR?0:10))}else{if(gN>g0+g2-3){i.scrollLeft=gN+(gR?0:10)-g0}}}return i}function cj(gN,i,gO){if(i!=null||gO!=null){gw(gN)}if(i!=null){gN.curOp.scrollLeft=(gN.curOp.scrollLeft==null?gN.doc.scrollLeft:gN.curOp.scrollLeft)+i}if(gO!=null){gN.curOp.scrollTop=(gN.curOp.scrollTop==null?gN.doc.scrollTop:gN.curOp.scrollTop)+gO}}function dj(i){gw(i);var gO=i.getCursor(),gN=gO,gP=gO;if(!i.options.lineWrapping){gN=gO.ch?cG(gO.line,gO.ch-1):gO;gP=cG(gO.line,gO.ch+1)}i.curOp.scrollToPos={from:gN,to:gP,margin:i.options.cursorScrollMargin,isCursor:true}}function gw(gQ){var gP=gQ.curOp.scrollToPos;if(gP){gQ.curOp.scrollToPos=null;var gN=bM(gQ,gP.from),i=bM(gQ,gP.to);var gO=ae(gQ,Math.min(gN.left,i.left),Math.min(gN.top,i.top)-gP.margin,Math.max(gN.right,i.right),Math.max(gN.bottom,i.bottom)+gP.margin);gQ.scrollTo(gO.scrollLeft,gO.scrollTop)}}var dS=0;function bL(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++dS};c0(i.curOp)}function z(gN){var i=gN.curOp;M(i,function(gP){for(var gO=0;gO<gP.ops.length;gO++){gP.ops[gO].cm.curOp=null}b9(gP)})}function b9(i){var gP=i.ops;for(var gO=0;gO<gP.length;gO++){at(gP[gO])}for(var gN=0;gN<gP.length;gN++){bX(gP[gN])}for(var gS=0;gS<gP.length;gS++){ac(gP[gS])}for(var gR=0;gR<gP.length;gR++){bO(gP[gR])}for(var gQ=0;gQ<gP.length;gQ++){f8(gP[gQ])}}function at(i){var gN=i.cm,gO=gN.display;al(gN);if(i.updateMaxLine){cL(gN)}i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<gO.viewFrom||i.scrollToPos.to.line>=gO.viewTo)||gO.maxLineChanged&&gN.options.lineWrapping;i.update=i.mustUpdate&&new a1(gN,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function bX(i){i.updatedDisplay=i.mustUpdate&&bD(i.cm,i.update)}function ac(i){var gN=i.cm,gO=gN.display;if(i.updatedDisplay){gM(gN)}i.barMeasure=c6(gN);if(gO.maxLineChanged&&!gN.options.lineWrapping){i.adjustWidthTo=ez(gN,gO.maxLine,gO.maxLine.text.length).left+3;gN.display.sizerWidth=i.adjustWidthTo;i.barMeasure.scrollWidth=Math.max(gO.scroller.clientWidth,gO.sizer.offsetLeft+i.adjustWidthTo+br(gN)+gN.display.barWidth);i.maxScrollLeft=Math.max(0,gO.sizer.offsetLeft+i.adjustWidthTo-fS(gN))}if(i.updatedDisplay||i.selectionChanged){i.preparedSelection=gO.input.prepareSelection(i.focus)}}function bO(i){var gN=i.cm;if(i.adjustWidthTo!=null){gN.display.sizer.style.minWidth=i.adjustWidthTo+"px";if(i.maxScrollLeft<gN.doc.scrollLeft){p(gN,Math.min(gN.display.scroller.scrollLeft,i.maxScrollLeft),true)}gN.display.maxLineChanged=false}var gO=i.focus&&i.focus==e3()&&(!document.hasFocus||document.hasFocus());if(i.preparedSelection){gN.display.input.showSelection(i.preparedSelection,gO)}if(i.updatedDisplay||i.startHeight!=gN.doc.height){f4(gN,i.barMeasure)}if(i.updatedDisplay){cS(gN,i.barMeasure)}if(i.selectionChanged){bU(gN)}if(gN.state.focused&&i.updateInput){gN.display.input.reset(i.typing)}if(gO){cq(i.cm)}}function f8(gP){var gU=gP.cm,gR=gU.display,gT=gU.doc;if(gP.updatedDisplay){bV(gU,gP.update)}if(gR.wheelStartX!=null&&(gP.scrollTop!=null||gP.scrollLeft!=null||gP.scrollToPos)){gR.wheelStartX=gR.wheelStartY=null}if(gP.scrollTop!=null&&(gR.scroller.scrollTop!=gP.scrollTop||gP.forceScroll)){gT.scrollTop=Math.max(0,Math.min(gR.scroller.scrollHeight-gR.scroller.clientHeight,gP.scrollTop));gR.scrollbars.setScrollTop(gT.scrollTop);gR.scroller.scrollTop=gT.scrollTop}if(gP.scrollLeft!=null&&(gR.scroller.scrollLeft!=gP.scrollLeft||gP.forceScroll)){gT.scrollLeft=Math.max(0,Math.min(gR.scroller.scrollWidth-gR.scroller.clientWidth,gP.scrollLeft));gR.scrollbars.setScrollLeft(gT.scrollLeft);gR.scroller.scrollLeft=gT.scrollLeft;dG(gU)}if(gP.scrollToPos){var gS=K(gU,fT(gT,gP.scrollToPos.from),fT(gT,gP.scrollToPos.to),gP.scrollToPos.margin);if(gP.scrollToPos.isCursor&&gU.state.focused){fz(gU,gS)}}var gQ=gP.maybeHiddenMarkers,i=gP.maybeUnhiddenMarkers;if(gQ){for(var gO=0;gO<gQ.length;++gO){if(!gQ[gO].lines.length){aM(gQ[gO],"hide")}}}if(i){for(var gN=0;gN<i.length;++gN){if(i[gN].lines.length){aM(i[gN],"unhide")}}}if(gR.wrapper.offsetHeight){gT.scrollTop=gU.display.scroller.scrollTop}if(gP.changeObjs){aM(gU,"changes",gU,gP.changeObjs)}if(gP.update){gP.update.finish()}}function cr(gN,i){if(gN.curOp){return i()}bL(gN);try{return i()}finally{z(gN)}}function a8(gN,i){return function(){if(gN.curOp){return i.apply(gN,arguments)}bL(gN);try{return i.apply(gN,arguments)}finally{z(gN)}}}function eA(i){return function(){if(this.curOp){return i.apply(this,arguments)}bL(this);try{return i.apply(this,arguments)}finally{z(this)}}}function ar(i){return function(){var gN=this.cm;if(!gN||gN.curOp){return i.apply(this,arguments)}bL(gN);try{return i.apply(this,arguments)}finally{z(gN)}}}function q(gT,gR,gS,gU){if(gR==null){gR=gT.doc.first}if(gS==null){gS=gT.doc.first+gT.doc.size}if(!gU){gU=0}var gO=gT.display;if(gU&&gS<gO.viewTo&&(gO.updateLineNumbers==null||gO.updateLineNumbers>gR)){gO.updateLineNumbers=gR}gT.curOp.viewChanged=true;if(gR>=gO.viewTo){if(gB&&ao(gT.doc,gR)<gO.viewTo){cM(gT)}}else{if(gS<=gO.viewFrom){if(gB&&fn(gT.doc,gS+gU)>gO.viewFrom){cM(gT)}else{gO.viewFrom+=gU;gO.viewTo+=gU}}else{if(gR<=gO.viewFrom&&gS>=gO.viewTo){cM(gT)}else{if(gR<=gO.viewFrom){var gQ=c5(gT,gS,gS+gU,1);if(gQ){gO.view=gO.view.slice(gQ.index);gO.viewFrom=gQ.lineN;gO.viewTo+=gU}else{cM(gT)}}else{if(gS>=gO.viewTo){var i=c5(gT,gR,gR,-1);if(i){gO.view=gO.view.slice(0,i.index);gO.viewTo=i.lineN}else{cM(gT)}}else{var gP=c5(gT,gR,gR,-1);var gN=c5(gT,gS,gS+gU,1);if(gP&&gN){gO.view=gO.view.slice(0,gP.index).concat(fW(gT,gP.lineN,gN.lineN)).concat(gO.view.slice(gN.index));gO.viewTo+=gU}else{cM(gT)}}}}}}var gV=gO.externalMeasured;if(gV){if(gS<gV.lineN){gV.lineN+=gU}else{if(gR<gV.lineN+gV.size){gO.externalMeasured=null}}}}function b1(gO,gP,i){gO.curOp.viewChanged=true;var gN=gO.display,gS=gO.display.externalMeasured;if(gS&&gP>=gS.lineN&&gP<gS.lineN+gS.size){gN.externalMeasured=null}if(gP<gN.viewFrom||gP>=gN.viewTo){return}var gQ=gN.view[e4(gO,gP)];if(gQ.node==null){return}var gR=gQ.changes||(gQ.changes=[]);if(dE(gR,i)==-1){gR.push(i)}}function cM(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function c5(gU,gO,gQ,gN){var gR=e4(gU,gO),gT,gS=gU.display.view;if(!gB||gQ==gU.doc.first+gU.doc.size){return{index:gR,lineN:gQ}}var i=gU.display.viewFrom;for(var gP=0;gP<gR;gP++){i+=gS[gP].size}if(i!=gO){if(gN>0){if(gR==gS.length-1){return null}gT=(i+gS[gR].size)-gO;gR++}else{gT=i-gO}gO+=gT;gQ+=gT}while(ao(gU.doc,gQ)!=gQ){if(gR==(gN<0?0:gS.length-1)){return null}gQ+=gN*gS[gR-(gN<0?1:0)].size;gR+=gN}return{index:gR,lineN:gQ}}function bh(gQ,gN,i){var gP=gQ.display,gO=gP.view;if(gO.length==0||gN>=gP.viewTo||i<=gP.viewFrom){gP.view=fW(gQ,gN,i);gP.viewFrom=gN}else{if(gP.viewFrom>gN){gP.view=fW(gQ,gN,gP.viewFrom).concat(gP.view)}else{if(gP.viewFrom<gN){gP.view=gP.view.slice(e4(gQ,gN))}}gP.viewFrom=gN;if(gP.viewTo<i){gP.view=gP.view.concat(fW(gQ,gP.viewTo,i))}else{if(gP.viewTo>i){gP.view=gP.view.slice(0,e4(gQ,i))}}}gP.viewTo=i}function cQ(gO){var gP=gO.display.view,gN=0;for(var i=0;i<gP.length;i++){var gQ=gP[i];if(!gQ.hidden&&(!gQ.node||gQ.changes)){++gN}}return gN}function el(gN,i){if(gN.doc.mode.startState&&gN.doc.frontier<gN.display.viewTo){gN.state.highlight.set(i,bA(aS,gN))}}function aS(gQ){var gN=gQ.doc;if(gN.frontier<gN.first){gN.frontier=gN.first}if(gN.frontier>=gQ.display.viewTo){return}var gP=+new Date+gQ.options.workTime;var i=am(gN.mode,di(gQ,gN.frontier));var gO=[];gN.iter(gN.frontier,Math.min(gN.first+gN.size,gQ.display.viewTo+500),function(gV){if(gN.frontier>=gQ.display.viewFrom){var gY=gV.styles,gU=gV.text.length>gQ.options.maxHighlightLength;var gS=eB(gQ,gV,gU?am(gN.mode,i):i,true);gV.styles=gS.styles;var gX=gV.styleClasses,gR=gS.classes;if(gR){gV.styleClasses=gR}else{if(gX){gV.styleClasses=null}}var gT=!gY||gY.length!=gV.styles.length||gX!=gR&&(!gX||!gR||gX.bgClass!=gR.bgClass||gX.textClass!=gR.textClass);for(var gW=0;!gT&&gW<gY.length;++gW){gT=gY[gW]!=gV.styles[gW]}if(gT){gO.push(gN.frontier)}gV.stateAfter=gU?i:am(gN.mode,i)}else{if(gV.text.length<=gQ.options.maxHighlightLength){ee(gQ,gV.text,i)}gV.stateAfter=gN.frontier%5==0?am(gN.mode,i):null}++gN.frontier;if(+new Date>gP){el(gQ,gQ.options.workDelay);return true}});if(gO.length){cr(gQ,function(){for(var gR=0;gR<gO.length;gR++){b1(gQ,gO[gR],"text")}})}}function a1(gO,i,gP){var gN=gO.display;this.viewport=i;this.visible=bB(gN,gO.doc,i);this.editorIsHidden=!gN.wrapper.offsetWidth;this.wrapperHeight=gN.wrapper.clientHeight;this.wrapperWidth=gN.wrapper.clientWidth;this.oldDisplayWidth=fS(gO);this.force=gP;this.dims=fa(gO);this.events=[]}a1.prototype.signal=function(i,gN){if(fp(i,gN)){this.events.push(arguments)}};a1.prototype.finish=function(){var gN=this;for(var i=0;i<this.events.length;i++){aM.apply(null,gN.events[i])}};function al(gN){var i=gN.display;if(!i.scrollbarsClipped&&i.scroller.offsetWidth){i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth;i.heightForcer.style.height=br(gN)+"px";i.sizer.style.marginBottom=-i.nativeBarWidth+"px";i.sizer.style.borderRightWidth=br(gN)+"px";i.scrollbarsClipped=true}}function bD(gU,gO){var gP=gU.display,gT=gU.doc;if(gO.editorIsHidden){cM(gU);return false}if(!gO.force&&gO.visible.from>=gP.viewFrom&&gO.visible.to<=gP.viewTo&&(gP.updateLineNumbers==null||gP.updateLineNumbers>=gP.viewTo)&&gP.renderedView==gP.view&&cQ(gU)==0){return false}if(fx(gU)){cM(gU);gO.dims=fa(gU)}var gN=gT.first+gT.size;var gR=Math.max(gO.visible.from-gU.options.viewportMargin,gT.first);var gS=Math.min(gN,gO.visible.to+gU.options.viewportMargin);if(gP.viewFrom<gR&&gR-gP.viewFrom<20){gR=Math.max(gT.first,gP.viewFrom)}if(gP.viewTo>gS&&gP.viewTo-gS<20){gS=Math.min(gN,gP.viewTo)}if(gB){gR=ao(gU.doc,gR);gS=fn(gU.doc,gS)}var i=gR!=gP.viewFrom||gS!=gP.viewTo||gP.lastWrapHeight!=gO.wrapperHeight||gP.lastWrapWidth!=gO.wrapperWidth;bh(gU,gR,gS);gP.viewOffset=bT(ff(gU.doc,gP.viewFrom));gU.display.mover.style.top=gP.viewOffset+"px";var gV=cQ(gU);if(!i&&gV==0&&!gO.force&&gP.renderedView==gP.view&&(gP.updateLineNumbers==null||gP.updateLineNumbers>=gP.viewTo)){return false}var gQ=e3();if(gV>4){gP.lineDiv.style.display="none"}cg(gU,gP.updateLineNumbers,gO.dims);if(gV>4){gP.lineDiv.style.display=""}gP.renderedView=gP.view;if(gQ&&e3()!=gQ&&gQ.offsetHeight){gQ.focus()}fe(gP.cursorDiv);fe(gP.selectionDiv);gP.gutters.style.height=gP.sizer.style.minHeight=0;if(i){gP.lastWrapHeight=gO.wrapperHeight;gP.lastWrapWidth=gO.wrapperWidth;el(gU,400)}gP.updateLineNumbers=null;return true}function bV(gO,gN){var gQ=gN.viewport;for(var i=true;;i=false){if(!i||!gO.options.lineWrapping||gN.oldDisplayWidth==fS(gO)){if(gQ&&gQ.top!=null){gQ={top:Math.min(gO.doc.height+x(gO.display)-bR(gO),gQ.top)}}gN.visible=bB(gO.display,gO.doc,gQ);if(gN.visible.from>=gO.display.viewFrom&&gN.visible.to<=gO.display.viewTo){break}}if(!bD(gO,gN)){break}gM(gO);var gP=c6(gO);l(gO);f4(gO,gP);cS(gO,gP)}gN.signal(gO,"update",gO);if(gO.display.viewFrom!=gO.display.reportedViewFrom||gO.display.viewTo!=gO.display.reportedViewTo){gN.signal(gO,"viewportChange",gO,gO.display.viewFrom,gO.display.viewTo);gO.display.reportedViewFrom=gO.display.viewFrom;gO.display.reportedViewTo=gO.display.viewTo}}function ch(gO,i){var gN=new a1(gO,i);if(bD(gO,gN)){gM(gO);bV(gO,gN);var gP=c6(gO);l(gO);f4(gO,gP);cS(gO,gP);gN.finish()}}function cg(gX,gO,gW){var gT=gX.display,gZ=gX.options.lineNumbers;var i=gT.lineDiv,gY=i.firstChild;function gS(g1){var g0=g1.nextSibling;if(aX&&dP&&gX.display.currentWheelTarget==g1){g1.style.display="none"}else{g1.parentNode.removeChild(g1)}return g0}var gU=gT.view,gR=gT.viewFrom;for(var gP=0;gP<gU.length;gP++){var gQ=gU[gP];if(gQ.hidden){}else{if(!gQ.node||gQ.node.parentNode!=i){var gN=aR(gX,gQ,gR,gW);i.insertBefore(gN,gY)}else{while(gY!=gQ.node){gY=gS(gY)}var gV=gZ&&gO!=null&&gO<=gR&&gQ.lineNumber;if(gQ.changes){if(dE(gQ.changes,"gutter")>-1){gV=false}aD(gX,gQ,gR,gW)}if(gV){fe(gQ.lineNumber);gQ.lineNumber.appendChild(document.createTextNode(ev(gX.options,gR)))}gY=gQ.node.nextSibling}}gR+=gQ.size}while(gY){gY=gS(gY)}}function ed(gN){var i=gN.display.gutters.offsetWidth;gN.display.sizer.style.marginLeft=i+"px"}function cS(gN,i){gN.display.sizer.style.minHeight=i.docHeight+"px";gN.display.heightForcer.style.top=i.docHeight+"px";gN.display.gutters.style.height=(i.docHeight+gN.display.barHeight+br(gN))+"px"}function ec(gO){var gP=gO.display.gutters,gN=gO.options.gutters;fe(gP);var gQ=0;for(;gQ<gN.length;++gQ){var gR=gN[gQ];var i=gP.appendChild(gf("div",null,"CodeMirror-gutter "+gR));if(gR=="CodeMirror-linenumbers"){gO.display.lineGutter=i;i.style.width=(gO.display.lineNumWidth||1)+"px"}}gP.style.display=gQ?"":"none";ed(gO)}function dm(gN){var i=dE(gN.gutters,"CodeMirror-linenumbers");if(i==-1&&gN.lineNumbers){gN.gutters=gN.gutters.concat(["CodeMirror-linenumbers"])}else{if(i>-1&&!gN.lineNumbers){gN.gutters=gN.gutters.slice(0);gN.gutters.splice(i,1)}}}function gL(gN,i){this.ranges=gN;this.primIndex=i}gL.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(gO){var gN=this;if(gO==this){return true}if(gO.primIndex!=this.primIndex||gO.ranges.length!=this.ranges.length){return false}for(var gQ=0;gQ<this.ranges.length;gQ++){var gP=gN.ranges[gQ],i=gO.ranges[gQ];if(ds(gP.anchor,i.anchor)!=0||ds(gP.head,i.head)!=0){return false}}return true},deepCopy:function(){var gN=this;var gO=[];for(var i=0;i<this.ranges.length;i++){gO[i]=new aH(bH(gN.ranges[i].anchor),bH(gN.ranges[i].head))}return new gL(gO,this.primIndex)},somethingSelected:function(){var gN=this;for(var i=0;i<this.ranges.length;i++){if(!gN.ranges[i].empty()){return true}}return false},contains:function(gN,gO){var i=this;if(!gO){gO=gN}for(var gQ=0;gQ<this.ranges.length;gQ++){var gP=i.ranges[gQ];if(ds(gO,gP.from())>=0&&ds(gN,gP.to())<=0){return gQ}}return -1}};function aH(gN,i){this.anchor=gN;this.head=i}aH.prototype={from:function(){return b6(this.anchor,this.head)},to:function(){return aB(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function bG(i,gT){var gO=i[gT];i.sort(function(gV,gW){return ds(gV.from(),gW.from())});gT=dE(i,gO);for(var gQ=1;gQ<i.length;gQ++){var gU=i[gQ],gN=i[gQ-1];if(ds(gN.to(),gU.from())>=0){var gR=b6(gN.from(),gU.from()),gS=aB(gN.to(),gU.to());var gP=gN.empty()?gU.from()==gU.head:gN.from()==gN.head;if(gQ<=gT){--gT}i.splice(--gQ,2,new aH(gP?gS:gR,gP?gR:gS))}}return new gL(i,gT)}function e8(gN,i){return new gL([new aH(gN,i||gN)],0)}function ca(i){if(!i.text){return i.to}return cG(i.from.line+i.text.length-1,dp(i.text).length+(i.text.length==1?i.from.ch:0))}function W(i,gP){if(ds(i,gP.from)<0){return i}if(ds(i,gP.to)<=0){return ca(gP)}var gN=i.line+gP.text.length-(gP.to.line-gP.from.line)-1,gO=i.ch;if(i.line==gP.to.line){gO+=ca(gP).ch-gP.to.ch}return cG(gN,gO)}function fk(i,gN){var gP=[];for(var gQ=0;gQ<i.sel.ranges.length;gQ++){var gO=i.sel.ranges[gQ];gP.push(new aH(W(gO.anchor,gN),W(gO.head,gN)))}return bG(gP,i.sel.primIndex)}function bi(i,gO,gN){if(i.line==gO.line){return cG(gN.line,i.ch-gO.ch+gN.ch)}else{return cG(gN.line+(i.line-gO.line),i.ch)}}function m(gW,gT,gN){var gO=[];var i=cG(gW.first,0),gX=i;for(var gQ=0;gQ<gT.length;gQ++){var gS=gT[gQ];var gV=bi(gS.from,i,gX);var gU=bi(ca(gS),i,gX);i=gS.to;gX=gU;if(gN=="around"){var gR=gW.sel.ranges[gQ],gP=ds(gR.head,gR.anchor)<0;gO[gQ]=new aH(gP?gU:gV,gP?gV:gU)}else{gO[gQ]=new aH(gV,gV)}}return new gL(gO,gW.sel.primIndex)}function aJ(i){i.doc.mode=gj(i.options,i.doc.modeOption);gx(i)}function gx(i){i.doc.iter(function(gN){if(gN.stateAfter){gN.stateAfter=null}if(gN.styles){gN.styles=null}});i.doc.frontier=i.doc.first;el(i,100);i.state.modeGen++;if(i.curOp){q(i)}}function b5(gN,i){return i.from.ch==0&&i.to.ch==0&&dp(i.text)==""&&(!gN.cm||gN.cm.options.wholeLineUpdateBefore)}function ew(gN,gY,gS,gX){function gR(g4){return gS?gS[g4]:null}function gW(g4,g6,g5){fG(g4,g6,g5,gX);j(g4,"change",g4,gY)}function g2(g7,g5){var g4=[];for(var g6=g7;g6<g5;++g6){g4.push(new gk(g0[g6],gR(g6),gX))}return g4}var g3=gY.from,gP=gY.to,g0=gY.text;var gZ=ff(gN,g3.line),gO=ff(gN,gP.line);var gQ=dp(g0),i=gR(g0.length-1),g1=gP.line-g3.line;if(gY.full){gN.insert(0,g2(0,g0.length));gN.remove(g0.length,gN.size-g0.length)}else{if(b5(gN,gY)){var gV=g2(0,g0.length-1);gW(gO,gO.text,i);if(g1){gN.remove(g3.line,g1)}if(gV.length){gN.insert(g3.line,gV)}}else{if(gZ==gO){if(g0.length==1){gW(gZ,gZ.text.slice(0,g3.ch)+gQ+gZ.text.slice(gP.ch),i)}else{var gU=g2(1,g0.length-1);gU.push(new gk(gQ+gZ.text.slice(gP.ch),i,gX));gW(gZ,gZ.text.slice(0,g3.ch)+g0[0],gR(0));gN.insert(g3.line+1,gU)}}else{if(g0.length==1){gW(gZ,gZ.text.slice(0,g3.ch)+g0[0]+gO.text.slice(gP.ch),gR(0));gN.remove(g3.line+1,g1)}else{gW(gZ,gZ.text.slice(0,g3.ch)+g0[0],gR(0));gW(gO,gQ+gO.text.slice(gP.ch),i);var gT=g2(1,g0.length-1);if(g1>1){gN.remove(g3.line+1,g1-1)}gN.insert(g3.line+1,gT)}}}}j(gN,"change",gN,gY)}function fE(i,gP,gO){function gN(gR,gV,gT){if(gR.linked){for(var gU=0;gU<gR.linked.length;++gU){var gS=gR.linked[gU];if(gS.doc==gV){continue}var gQ=gT&&gS.sharedHist;if(gO&&!gQ){continue}gP(gS.doc,gQ);gN(gS.doc,gR,gQ)}}}gN(i,null,true)}function d8(gN,i){if(i.cm){throw new Error("This document is already in use.")}gN.doc=i;i.cm=gN;a3(gN);aJ(gN);if(!gN.options.lineWrapping){cL(gN)}gN.options.mode=i.modeOption;q(gN)}function fC(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function dX(gN,i){var gO={from:bH(i.from),to:ca(i),text:gg(gN,i.from,i.to)};R(gN,gO,i.from.line,i.to.line+1);fE(gN,function(gP){return R(gP,gO,i.from.line,i.to.line+1)},true);return gO}function gu(i){while(i.length){var gN=dp(i);if(gN.ranges){i.pop()}else{break}}}function ci(i,gN){if(gN){gu(i.done);return dp(i.done)}else{if(i.done.length&&!dp(i.done).ranges){return dp(i.done)}else{if(i.done.length>1&&!i.done[i.done.length-2].ranges){i.done.pop();return dp(i.done)}}}}function eL(gR,gP,gU,gO){var gN=gR.history;gN.undone.length=0;var i=+new Date,gS;var gT;if((gN.lastOp==gO||gN.lastOrigin==gP.origin&&gP.origin&&((gP.origin.charAt(0)=="+"&&gR.cm&&gN.lastModTime>i-gR.cm.options.historyEventDelay)||gP.origin.charAt(0)=="*"))&&(gS=ci(gN,gN.lastOp==gO))){gT=dp(gS.changes);if(ds(gP.from,gP.to)==0&&ds(gP.from,gT.to)==0){gT.to=ca(gP)}else{gS.changes.push(dX(gR,gP))}}else{var gQ=dp(gN.done);if(!gQ||!gQ.ranges){aL(gR.sel,gN.done)}gS={changes:[dX(gR,gP)],generation:gN.generation};gN.done.push(gS);while(gN.done.length>gN.undoDepth){gN.done.shift();if(!gN.done[0].ranges){gN.done.shift()}}}gN.done.push(gU);gN.generation=++gN.maxGeneration;gN.lastModTime=gN.lastSelTime=i;gN.lastOp=gN.lastSelOp=gO;gN.lastOrigin=gN.lastSelOrigin=gP.origin;if(!gT){aM(gR,"historyAdded")}}function h(gN,gQ,gP,i){var gO=gQ.charAt(0);return gO=="*"||gO=="+"&&gP.ranges.length==i.ranges.length&&gP.somethingSelected()==i.somethingSelected()&&new Date-gN.history.lastSelTime<=(gN.cm?gN.cm.options.historyEventDelay:500)}function f1(gN,gQ,gR,gP){var i=gN.history,gO=gP&&gP.origin;if(gR==i.lastSelOp||(gO&&i.lastSelOrigin==gO&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==gO||h(gN,gO,dp(i.done),gQ)))){i.done[i.done.length-1]=gQ}else{aL(gQ,i.done)}i.lastSelTime=+new Date;i.lastSelOrigin=gO;i.lastSelOp=gR;if(gP&&gP.clearRedo!==false){gu(i.undone)}}function aL(gO,gN){var i=dp(gN);if(!(i&&i.ranges&&i.equals(gO))){gN.push(gO)}}function R(gO,gN,i,gQ){var gR=gN["spans_"+gO.id],gP=0;gO.iter(Math.max(gO.first,i),Math.min(gO.first+gO.size,gQ),function(gS){if(gS.markedSpans){(gR||(gR=gN["spans_"+gO.id]={}))[gP]=gS.markedSpans}++gP})}function c4(gN){if(!gN){return null}var gO;for(var i=0;i<gN.length;++i){if(gN[i].marker.explicitlyCleared){if(!gO){gO=gN.slice(0,i)}}else{if(gO){gO.push(gN[i])}}}return !gO?gN:gO.length?gO:null}function aq(i,gN){var gQ=gN["spans_"+i.id];if(!gQ){return null}var gO=[];for(var gP=0;gP<gN.text.length;++gP){gO.push(c4(gQ[gP]))}return gO}function dM(gU,gS){var i=aq(gU,gS);var gV=gq(gU,gS);if(!i){return gV}if(!gV){return i}for(var gP=0;gP<i.length;++gP){var gQ=i[gP],gR=gV[gP];if(gQ&&gR){spans:for(var gO=0;gO<gR.length;++gO){var gT=gR[gO];for(var gN=0;gN<gQ.length;++gN){if(gQ[gN].marker==gT.marker){continue spans}}gQ.push(gT)}}else{if(gR){i[gP]=gR}}}return i}function aI(gX,gP,gW){var gN=[];for(var gS=0;gS<gX.length;++gS){var gO=gX[gS];if(gO.ranges){gN.push(gW?gL.prototype.deepCopy.call(gO):gO);continue}var gU=gO.changes,gV=[];gN.push({changes:gV});for(var gR=0;gR<gU.length;++gR){var gT=gU[gR],gQ=void 0;gV.push({from:gT.from,to:gT.to,text:gT.text});if(gP){for(var i in gT){if(gQ=i.match(/^spans_(\d+)$/)){if(dE(gP,Number(gQ[1]))>-1){dp(gV)[i]=gT[i];delete gT[i]}}}}}}return gN}function eg(gN,gO,i,gQ){if(gN.cm&&gN.cm.display.shift||gN.extend){var gR=gO.anchor;if(gQ){var gP=ds(i,gR)<0;if(gP!=(ds(gQ,gR)<0)){gR=i;i=gQ}else{if(gP!=(ds(i,gQ)<0)){i=gQ}}}return new aH(gR,i)}else{return new aH(gQ||i,i)}}function gG(i,gP,gN,gO){bk(i,new gL([eg(i,i.sel.primary(),gP,gN)],0),gO)}function bg(gN,i,gQ){var gP=[];for(var gR=0;gR<gN.sel.ranges.length;gR++){gP[gR]=eg(gN,gN.sel.ranges[gR],i[gR],null)}var gO=bG(gP,gN.sel.primIndex);bk(gN,gO,gQ)}function d7(gN,i,gP,gQ){var gO=gN.sel.ranges.slice(0);gO[i]=gP;bk(gN,bG(gO,gN.sel.primIndex),gQ)}function T(i,gO,gP,gN){bk(i,e8(gO,gP),gN)}function bC(i,gO,gN){var gP={ranges:gO.ranges,update:function(gQ){var gS=this;this.ranges=[];for(var gR=0;gR<gQ.length;gR++){gS.ranges[gR]=new aH(fT(i,gQ[gR].anchor),fT(i,gQ[gR].head))}},origin:gN&&gN.origin};aM(i,"beforeSelectionChange",i,gP);if(i.cm){aM(i.cm,"beforeSelectionChange",i.cm,gP)}if(gP.ranges!=gO.ranges){return bG(gP.ranges,gP.ranges.length-1)}else{return gO}}function eT(gN,gQ,gO){var i=gN.history.done,gP=dp(i);if(gP&&gP.ranges){i[i.length-1]=gQ;ef(gN,gQ,gO)}else{bk(gN,gQ,gO)}}function bk(i,gO,gN){ef(i,gO,gN);f1(i,i.sel,i.cm?i.cm.curOp.id:NaN,gN)}function ef(i,gP,gO){if(fp(i,"beforeSelectionChange")||i.cm&&fp(i.cm,"beforeSelectionChange")){gP=bC(i,gP,gO)}var gN=gO&&gO.bias||(ds(gP.primary().head,i.sel.primary().head)<0?-1:1);ey(i,bK(i,gP,gN,true));if(!(gO&&gO.scroll===false)&&i.cm){dj(i.cm)}}function ey(i,gN){if(gN.equals(i.sel)){return}i.sel=gN;if(i.cm){i.cm.curOp.updateInput=i.cm.curOp.selectionChanged=true;cA(i.cm)}j(i,"cursorActivity",i)}function cW(i){ey(i,bK(i,i.sel,null,false),be)}function bK(gV,i,gS,gT){var gP;for(var gQ=0;gQ<i.ranges.length;gQ++){var gR=i.ranges[gQ];var gN=i.ranges.length==gV.sel.ranges.length&&gV.sel.ranges[gQ];var gU=bp(gV,gR.anchor,gN&&gN.anchor,gS,gT);var gO=bp(gV,gR.head,gN&&gN.head,gS,gT);if(gP||gU!=gR.anchor||gO!=gR.head){if(!gP){gP=i.ranges.slice(0,gQ)}gP[gQ]=new aH(gU,gO)}}return gP?bG(gP,i.primIndex):i}function eZ(gW,gU,gP,gO,gS){var gX=ff(gW,gU.line);if(gX.markedSpans){for(var gQ=0;gQ<gX.markedSpans.length;++gQ){var i=gX.markedSpans[gQ],gN=i.marker;if((i.from==null||(gN.inclusiveLeft?i.from<=gU.ch:i.from<gU.ch))&&(i.to==null||(gN.inclusiveRight?i.to>=gU.ch:i.to>gU.ch))){if(gS){aM(gN,"beforeCursorEnter");if(gN.explicitlyCleared){if(!gX.markedSpans){break}else{--gQ;continue}}}if(!gN.atomic){continue}if(gP){var gT=gN.find(gO<0?1:-1),gV=void 0;if(gO<0?gN.inclusiveRight:gN.inclusiveLeft){gT=f9(gW,gT,-gO,gT&&gT.line==gU.line?gX:null)}if(gT&&gT.line==gU.line&&(gV=ds(gT,gP))&&(gO<0?gV<0:gV>0)){return eZ(gW,gT,gU,gO,gS)}}var gR=gN.find(gO<0?-1:1);if(gO<0?gN.inclusiveLeft:gN.inclusiveRight){gR=f9(gW,gR,gO,gR.line==gU.line?gX:null)}return gR?eZ(gW,gR,gU,gO,gS):null}}}return gU}function bp(i,gN,gQ,gO,gR){var gP=gO||1;var gS=eZ(i,gN,gQ,gP,gR)||(!gR&&eZ(i,gN,gQ,gP,true))||eZ(i,gN,gQ,-gP,gR)||(!gR&&eZ(i,gN,gQ,-gP,true));if(!gS){i.cantEdit=true;return cG(i.first,0)}return gS}function f9(gP,i,gO,gN){if(gO<0&&i.ch==0){if(i.line>gP.first){return fT(gP,cG(i.line-1))}else{return null}}else{if(gO>0&&i.ch==(gN||ff(gP,i.line)).text.length){if(i.line<gP.first+gP.size-1){return cG(i.line+1,0)}else{return null}}else{return new cG(i.line,i.ch+gO)}}}function y(i){i.setSelection(cG(i.firstLine(),0),cG(i.lastLine()),be)}function d4(gO,i,gP){var gN={canceled:false,from:i.from,to:i.to,text:i.text,origin:i.origin,cancel:function(){return gN.canceled=true}};if(gP){gN.update=function(gT,gS,gR,gQ){if(gT){gN.from=fT(gO,gT)}if(gS){gN.to=fT(gO,gS)}if(gR){gN.text=gR}if(gQ!==undefined){gN.origin=gQ}}}aM(gO,"beforeChange",gO,gN);if(gO.cm){aM(gO.cm,"beforeChange",gO.cm,gN)}if(gN.canceled){return null}return{from:gN.from,to:gN.to,text:gN.text,origin:gN.origin}}function an(i,gN,gQ){if(i.cm){if(!i.cm.curOp){return a8(i.cm,an)(i,gN,gQ)}if(i.cm.state.suppressEdits){return}}if(fp(i,"beforeChange")||i.cm&&fp(i.cm,"beforeChange")){gN=d4(i,gN,true);if(!gN){return}}var gP=f2&&!gQ&&da(i,gN.from,gN.to);if(gP){for(var gO=gP.length-1;gO>=0;--gO){av(i,{from:gP[gO].from,to:gP[gO].to,text:gO?[""]:gN.text})}}else{av(i,gN)}}function av(gP,i){if(i.text.length==1&&i.text[0]==""&&ds(i.from,i.to)==0){return}var gO=fk(gP,i);eL(gP,i,gO,gP.cm?gP.cm.curOp.id:NaN);ej(gP,i,gO,gq(gP,i));var gN=[];fE(gP,function(gR,gQ){if(!gQ&&dE(gN,gR.history)==-1){dy(gR.history,i);gN.push(gR.history)}ej(gR,i,null,gq(gR,i))})}function dZ(gX,gW,gZ){if(gX.cm&&gX.cm.state.suppressEdits&&!gZ){return}var gV=gX.history,gN,gP=gX.sel;var i=gW=="undo"?gV.done:gV.undone,gY=gW=="undo"?gV.undone:gV.done;var gS=0;for(;gS<i.length;gS++){gN=i[gS];if(gZ?gN.ranges&&!gN.equals(gX.sel):!gN.ranges){break}}if(gS==i.length){return}gV.lastOrigin=gV.lastSelOrigin=null;for(;;){gN=i.pop();if(gN.ranges){aL(gN,gY);if(gZ&&!gN.equals(gX.sel)){bk(gX,gN,{clearRedo:false});return}gP=gN}else{break}}var gU=[];aL(gP,gY);gY.push({changes:gU,generation:gV.generation});gV.generation=gN.generation||++gV.maxGeneration;var gO=fp(gX,"beforeChange")||gX.cm&&fp(gX.cm,"beforeChange");var gT=function(g1){var g0=gN.changes[g1];g0.origin=gW;if(gO&&!d4(gX,g0,false)){i.length=0;return{}}gU.push(dX(gX,g0));var g3=g1?fk(gX,g0):dp(i);ej(gX,g0,g3,dM(gX,g0));if(!g1&&gX.cm){gX.cm.scrollIntoView({from:g0.from,to:ca(g0)})}var g2=[];fE(gX,function(g4,g5){if(!g5&&dE(g2,g4.history)==-1){dy(g4.history,g0);g2.push(g4.history)}ej(g4,g0,null,dM(g4,g0))})};for(var gQ=gN.changes.length-1;gQ>=0;--gQ){var gR=gT(gQ);if(gR){return gR.v}}}function fB(gO,i){if(i==0){return}gO.first+=i;gO.sel=new gL(bf(gO.sel.ranges,function(gQ){return new aH(cG(gQ.anchor.line+i,gQ.anchor.ch),cG(gQ.head.line+i,gQ.head.ch))}),gO.sel.primIndex);if(gO.cm){q(gO.cm,gO.first,gO.first-i,i);for(var gP=gO.cm.display,gN=gP.viewFrom;gN<gP.viewTo;gN++){b1(gO.cm,gN,"gutter")}}}function ej(i,gN,gQ,gO){if(i.cm&&!i.cm.curOp){return a8(i.cm,ej)(i,gN,gQ,gO)}if(gN.to.line<i.first){fB(i,gN.text.length-1-(gN.to.line-gN.from.line));return}if(gN.from.line>i.lastLine()){return}if(gN.from.line<i.first){var gR=gN.text.length-1-(i.first-gN.from.line);fB(i,gR);gN={from:cG(i.first,0),to:cG(gN.to.line+gR,gN.to.ch),text:[dp(gN.text)],origin:gN.origin}}var gP=i.lastLine();if(gN.to.line>gP){gN={from:gN.from,to:cG(gP,ff(i,gP).text.length),text:[gN.text[0]],origin:gN.origin}}gN.removed=gg(i,gN.from,gN.to);if(!gQ){gQ=fk(i,gN)}if(i.cm){aZ(i.cm,gN,gO)}else{ew(i,gN,gO)}ef(i,gQ,be)}function aZ(gX,gS,gQ){var gW=gX.doc,gR=gX.display,gT=gS.from,gV=gS.to;var gU=false,gP=gT.line;if(!gX.options.lineWrapping){gP=bZ(dU(ff(gW,gT.line)));gW.iter(gP,gV.line+1,function(gZ){if(gZ==gR.maxLine){gU=true;return true}})}if(gW.sel.contains(gS.from,gS.to)>-1){cA(gX)}ew(gW,gS,gQ,aa(gX));if(!gX.options.lineWrapping){gW.iter(gP,gT.line+gS.text.length,function(g0){var gZ=fF(g0);if(gZ>gR.maxLineLength){gR.maxLine=g0;gR.maxLineLength=gZ;gR.maxLineChanged=true;gU=false}});if(gU){gX.curOp.updateMaxLine=true}}gW.frontier=Math.min(gW.frontier,gT.line);el(gX,400);var gY=gS.text.length-(gV.line-gT.line)-1;if(gS.full){q(gX)}else{if(gT.line==gV.line&&gS.text.length==1&&!b5(gX.doc,gS)){b1(gX,gT.line,"text")}else{q(gX,gT.line,gV.line+1,gY)}}var gN=fp(gX,"changes"),gO=fp(gX,"change");if(gO||gN){var i={from:gT,to:gV,text:gS.text,removed:gS.removed,origin:gS.origin};if(gO){j(gX,"change",gX,i)}if(gN){(gX.curOp.changeObjs||(gX.curOp.changeObjs=[])).push(i)}}gX.display.selForContextMenu=null}function gp(gQ,gP,gN,i,gR){if(!i){i=gN}if(ds(i,gN)<0){var gO=i;i=gN;gN=gO}if(typeof gP=="string"){gP=gQ.splitLines(gP)}an(gQ,{from:gN,to:i,text:gP,origin:gR})}function ah(i,gP,gO,gN){if(gO<i.line){i.line+=gN}else{if(gP<i.line){i.line=gP;i.ch=0}}}function fb(gQ,gS,gT,gU){for(var gP=0;gP<gQ.length;++gP){var i=gQ[gP],gR=true;if(i.ranges){if(!i.copied){i=gQ[gP]=i.deepCopy();i.copied=true}for(var gO=0;gO<i.ranges.length;gO++){ah(i.ranges[gO].anchor,gS,gT,gU);ah(i.ranges[gO].head,gS,gT,gU)}continue}for(var gN=0;gN<i.changes.length;++gN){var gV=i.changes[gN];if(gT<gV.from.line){gV.from=cG(gV.from.line+gU,gV.from.ch);gV.to=cG(gV.to.line+gU,gV.to.ch)}else{if(gS<=gV.to.line){gR=false;break}}}if(!gR){gQ.splice(0,gP+1);gP=0}}}function dy(gO,gN){var gQ=gN.from.line,gP=gN.to.line,i=gN.text.length-(gP-gQ)-1;fb(gO.done,gQ,gP,i);fb(gO.undone,gQ,gP,i)}function c9(gQ,gP,gR,gN){var i=gP,gO=gP;if(typeof gP=="number"){gO=ff(gQ,ek(gQ,gP))}else{i=bZ(gP)}if(i==null){return null}if(gN(gO,i)&&gQ.cm){b1(gQ.cm,i,gR)}return gO}function f7(gP){var gN=this;this.lines=gP;this.parent=null;var gO=0;for(var i=0;i<gP.length;++i){gP[i].parent=gN;gO+=gP[i].height}this.height=gO}f7.prototype={chunkSize:function(){return this.lines.length},removeInner:function(gO,gN){var i=this;for(var gQ=gO,gR=gO+gN;gQ<gR;++gQ){var gP=i.lines[gQ];i.height-=gP.height;k(gP);j(gP,"delete")}this.lines.splice(gO,gN)},collapse:function(i){i.push.apply(i,this.lines)},insertInner:function(gP,gQ,gO){var gN=this;this.height+=gO;this.lines=this.lines.slice(0,gP).concat(gQ).concat(this.lines.slice(gP));for(var i=0;i<gQ.length;++i){gQ[i].parent=gN}},iterN:function(gQ,gN,i){var gP=this;for(var gO=gQ+gN;gQ<gO;++gQ){if(i(gP.lines[gQ])){return true}}}};function es(gR){var gN=this;this.children=gR;var gQ=0,gO=0;for(var gP=0;gP<gR.length;++gP){var i=gR[gP];gQ+=i.chunkSize();gO+=i.height;i.parent=gN}this.size=gQ;this.height=gO;this.parent=null}es.prototype={chunkSize:function(){return this.size},removeInner:function(gO,gN){var gQ=this;this.size-=gN;for(var gP=0;gP<this.children.length;++gP){var i=gQ.children[gP],gS=i.chunkSize();if(gO<gS){var gR=Math.min(gN,gS-gO),gT=i.height;i.removeInner(gO,gR);gQ.height-=gT-i.height;if(gS==gR){gQ.children.splice(gP--,1);i.parent=null}if((gN-=gR)==0){break}gO=0}else{gO-=gS}}if(this.size-gN<25&&(this.children.length>1||!(this.children[0] instanceof f7))){var gU=[];this.collapse(gU);this.children=[new f7(gU)];this.children[0].parent=this}},collapse:function(gO){var gN=this;for(var i=0;i<this.children.length;++i){gN.children[i].collapse(gO)}},insertInner:function(gN,gV,gU){var gQ=this;this.size+=gV.length;this.height+=gU;for(var gP=0;gP<this.children.length;++gP){var i=gQ.children[gP],gS=i.chunkSize();if(gN<=gS){i.insertInner(gN,gV,gU);if(i.lines&&i.lines.length>50){var gO=i.lines.length%25+25;for(var gT=gO;gT<i.lines.length;){var gR=new f7(i.lines.slice(gT,gT+=25));i.height-=gR.height;gQ.children.splice(++gP,0,gR);gR.parent=gQ}i.lines=i.lines.slice(0,gO);gQ.maybeSpill()}break}gN-=gS}},maybeSpill:function(){if(this.children.length<=10){return}var gQ=this;do{var gO=gQ.children.splice(gQ.children.length-5,5);var gP=new es(gO);if(!gQ.parent){var gN=new es(gQ.children);gN.parent=gQ;gQ.children=[gN,gP];gQ=gN}else{gQ.size-=gP.size;gQ.height-=gP.height;var i=dE(gQ.parent.children,gQ);gQ.parent.children.splice(i+1,0,gP)}gP.parent=gQ.parent}while(gQ.children.length>10);gQ.parent.maybeSpill()},iterN:function(gP,gO,gN){var i=this;for(var gQ=0;gQ<this.children.length;++gQ){var gT=i.children[gQ],gS=gT.chunkSize();if(gP<gS){var gR=Math.min(gO,gS-gP);if(gT.iterN(gP,gR,gN)){return true}if((gO-=gR)==0){break}gP=0}else{gP-=gS}}}};function df(gQ,gP,i){var gN=this;if(i){for(var gO in i){if(i.hasOwnProperty(gO)){gN[gO]=i[gO]}}}this.doc=gQ;this.node=gP}aG(df);function a4(gN,gO,i){if(bT(gO)<((gN.curOp&&gN.curOp.scrollTop)||gN.doc.scrollTop)){cj(gN,null,i)}}df.prototype.clear=function(){var gN=this;var gP=this.doc.cm,gR=this.line.widgets,gQ=this.line,i=bZ(gQ);if(i==null||!gR){return}for(var gS=0;gS<gR.length;++gS){if(gR[gS]==gN){gR.splice(gS--,1)}}if(!gR.length){gQ.widgets=null}var gO=cf(this);gm(gQ,Math.max(0,gQ.height-gO));if(gP){cr(gP,function(){a4(gP,gQ,-gO);b1(gP,i,"widget")})}};df.prototype.changed=function(){var gO=this.height,i=this.doc.cm,gP=this.line;this.height=null;var gN=cf(this)-gO;if(!gN){return}gm(gP,gP.height+gN);if(i){cr(i,function(){i.curOp.forceUpdate=true;a4(i,gP,gN)})}};function u(gN,i,gP,gO){var gQ=new df(gN,gP,gO);var gR=gN.cm;if(gR&&gQ.noHScroll){gR.display.alignWidgets=true}c9(gN,i,"widget",function(gU){var gS=gU.widgets||(gU.widgets=[]);if(gQ.insertAt==null){gS.push(gQ)}else{gS.splice(Math.min(gS.length-1,Math.max(0,gQ.insertAt)),0,gQ)}gQ.line=gU;if(gR&&!eh(gN,gU)){var gT=bT(gU)<gN.scrollTop;gm(gU,gU.height+cf(gQ));if(gT){cj(gR,null,gQ.height)}gR.curOp.forceUpdate=true}return true});return gQ}var gv=0;function bS(i,gN){this.lines=[];this.type=gN;this.doc=i;this.id=++gv}aG(bS);bS.prototype.clear=function(){var gR=this;if(this.explicitlyCleared){return}var gV=this.doc.cm,gO=gV&&!gV.curOp;if(gO){bL(gV)}if(fp(this,"clear")){var gW=this.find();if(gW){j(this,"clear",gW.from,gW.to)}}var gP=null,gT=null;for(var gQ=0;gQ<this.lines.length;++gQ){var gX=gR.lines[gQ];var gU=e0(gX.markedSpans,gR);if(gV&&!gR.collapsed){b1(gV,bZ(gX),"text")}else{if(gV){if(gU.to!=null){gT=bZ(gX)}if(gU.from!=null){gP=bZ(gX)}}}gX.markedSpans=eJ(gX.markedSpans,gU);if(gU.from==null&&gR.collapsed&&!eh(gR.doc,gX)&&gV){gm(gX,ax(gV.display))}}if(gV&&this.collapsed&&!gV.options.lineWrapping){for(var gN=0;gN<this.lines.length;++gN){var i=dU(gR.lines[gN]),gS=fF(i);if(gS>gV.display.maxLineLength){gV.display.maxLine=i;gV.display.maxLineLength=gS;gV.display.maxLineChanged=true}}}if(gP!=null&&gV&&this.collapsed){q(gV,gP,gT+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gV){cW(gV.doc)}}if(gV){j(gV,"markerCleared",gV,this)}if(gO){z(gV)}if(this.parent){this.parent.clear()}};bS.prototype.find=function(gS,gQ){var gO=this;if(gS==null&&this.type=="bookmark"){gS=1}var gN,i;for(var gR=0;gR<this.lines.length;++gR){var gP=gO.lines[gR];var gT=e0(gP.markedSpans,gO);if(gT.from!=null){gN=cG(gQ?gP:bZ(gP),gT.from);if(gS==-1){return gN}}if(gT.to!=null){i=cG(gQ?gP:bZ(gP),gT.to);if(gS==1){return i}}}return gN&&{from:gN,to:i}};bS.prototype.changed=function(){var i=this.find(-1,true),gO=this,gN=this.doc.cm;if(!i||!gN){return}cr(gN,function(){var gQ=i.line,gR=bZ(i.line);var gP=e7(gN,gR);if(gP){a2(gP);gN.curOp.selectionChanged=gN.curOp.forceUpdate=true}gN.curOp.updateMaxLine=true;if(!eh(gO.doc,gQ)&&gO.height!=null){var gT=gO.height;gO.height=null;var gS=cf(gO)-gT;if(gS){gm(gQ,gQ.height+gS)}}})};bS.prototype.attachLine=function(gN){if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;if(!i.maybeHiddenMarkers||dE(i.maybeHiddenMarkers,this)==-1){(i.maybeUnhiddenMarkers||(i.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(gN)};bS.prototype.detachLine=function(gN){this.lines.splice(dE(this.lines,gN),1);if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;(i.maybeHiddenMarkers||(i.maybeHiddenMarkers=[])).push(this)}};function fP(gU,gS,gT,gW,gQ){if(gW&&gW.shared){return cV(gU,gS,gT,gW,gQ)}if(gU.cm&&!gU.cm.curOp){return a8(gU.cm,fP)(gU,gS,gT,gW,gQ)}var gP=new bS(gU,gQ),gV=ds(gS,gT);if(gW){bd(gW,gP,false)}if(gV>0||gV==0&&gP.clearWhenEmpty!==false){return gP}if(gP.replacedWith){gP.collapsed=true;gP.widgetNode=gf("span",[gP.replacedWith],"CodeMirror-widget");if(!gW.handleMouseEvents){gP.widgetNode.setAttribute("cm-ignore-events","true")}if(gW.insertLeft){gP.widgetNode.insertLeft=true}}if(gP.collapsed){if(d2(gU,gS.line,gS,gT,gP)||gS.line!=gT.line&&d2(gU,gT.line,gS,gT,gP)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bv()}if(gP.addToHistory){eL(gU,{from:gS,to:gT,origin:"markText"},gU.sel,NaN)}var gN=gS.line,gR=gU.cm,i;gU.iter(gN,gT.line+1,function(gX){if(gR&&gP.collapsed&&!gR.options.lineWrapping&&dU(gX)==gR.display.maxLine){i=true}if(gP.collapsed&&gN!=gS.line){gm(gX,0)}db(gX,new gl(gP,gN==gS.line?gS.ch:null,gN==gT.line?gT.ch:null));++gN});if(gP.collapsed){gU.iter(gS.line,gT.line+1,function(gX){if(eh(gU,gX)){gm(gX,0)}})}if(gP.clearOnEnter){J(gP,"beforeCursorEnter",function(){return gP.clear()})}if(gP.readOnly){eD();if(gU.history.done.length||gU.history.undone.length){gU.clearHistory()}}if(gP.collapsed){gP.id=++gv;gP.atomic=true}if(gR){if(i){gR.curOp.updateMaxLine=true}if(gP.collapsed){q(gR,gS.line,gT.line+1)}else{if(gP.className||gP.title||gP.startStyle||gP.endStyle||gP.css){for(var gO=gS.line;gO<=gT.line;gO++){b1(gR,gO,"text")}}}if(gP.atomic){cW(gR.doc)}j(gR,"markerAdded",gR,gP)}return gP}function dK(i,gP){var gN=this;this.markers=i;this.primary=gP;for(var gO=0;gO<i.length;++gO){i[gO].parent=gN}}aG(dK);dK.prototype.clear=function(){var gN=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i){gN.markers[i].clear()}j(this,"clear")};dK.prototype.find=function(i,gN){return this.primary.find(i,gN)};function cV(gS,gN,i,gQ,gP){gQ=bd(gQ);gQ.shared=false;var gT=[fP(gS,gN,i,gQ,gP)],gO=gT[0];var gR=gQ.widgetNode;fE(gS,function(gV){if(gR){gQ.widgetNode=gR.cloneNode(true)}gT.push(fP(gV,fT(gV,gN),fT(gV,i),gQ,gP));for(var gU=0;gU<gV.linked.length;++gU){if(gV.linked[gU].isParent){return}}gO=dp(gT)});return new dK(gT,gO)}function cy(i){return i.findMarks(cG(i.first,0),i.clipPos(cG(i.lastLine())),function(gN){return gN.parent})}function dD(i,gN){for(var gS=0;gS<gN.length;gS++){var gQ=gN[gS],gO=gQ.find();var gP=i.clipPos(gO.from),gT=i.clipPos(gO.to);if(ds(gP,gT)){var gR=fP(i,gP,gT,gQ.primary,gQ.primary.type);gQ.markers.push(gR);gR.parent=gQ}}}function eb(gN){var gO=function(gS){var gQ=gN[gS],gP=[gQ.primary.doc];fE(gQ.primary.doc,function(gU){return gP.push(gU)});for(var gR=0;gR<gQ.markers.length;gR++){var gT=gQ.markers[gR];if(dE(gP,gT.doc)==-1){gT.parent=null;gQ.markers.splice(gR--,1)}}};for(var i=0;i<gN.length;i++){gO(i)}}var dL=0;var aY=function(gQ,gP,i,gO){if(!(this instanceof aY)){return new aY(gQ,gP,i,gO)}if(i==null){i=0}es.call(this,[new f7([new gk("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=i;var gN=cG(i,0);this.sel=e8(gN);this.history=new fC(null);this.id=++dL;this.modeOption=gP;this.lineSep=gO;this.extend=false;if(typeof gQ=="string"){gQ=this.splitLines(gQ)}ew(this,{from:gN,to:gN,text:gQ});bk(this,e8(gN),be)};aY.prototype=bY(es.prototype,{constructor:aY,iter:function(i,gO,gN){if(gN){this.iterN(i-this.first,gO-i,gN)}else{this.iterN(this.first,this.first+this.size,i)}},insert:function(gP,i){var gO=0;for(var gN=0;gN<i.length;++gN){gO+=i[gN].height}this.insertInner(gP-this.first,i,gO)},remove:function(gN,i){this.removeInner(gN-this.first,i)},getValue:function(i){var gN=gs(this,this.first,this.first+this.size);if(i===false){return gN}return gN.join(i||this.lineSeparator())},setValue:ar(function(gO){var i=cG(this.first,0),gN=this.first+this.size-1;an(this,{from:i,to:cG(gN,ff(this,gN).text.length),text:this.splitLines(gO),origin:"setValue",full:true},true);bk(this,e8(i))}),replaceRange:function(gO,i,gP,gN){i=fT(this,i);gP=gP?fT(this,gP):i;gp(this,gO,i,gP,gN)},getRange:function(i,gP,gO){var gN=gg(this,fT(this,i),fT(this,gP));if(gO===false){return gN}return gN.join(gO||this.lineSeparator())},getLine:function(i){var gN=this.getLineHandle(i);return gN&&gN.text},getLineHandle:function(i){if(d6(this,i)){return ff(this,i)}},getLineNumber:function(i){return bZ(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=ff(this,i)}return dU(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return fT(this,i)},getCursor:function(i){var gN=this.sel.primary(),gO;if(i==null||i=="head"){gO=gN.head}else{if(i=="anchor"){gO=gN.anchor}else{if(i=="end"||i=="to"||i===false){gO=gN.to()}else{gO=gN.from()}}}return gO},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ar(function(gN,i,gO){T(this,fT(this,typeof gN=="number"?cG(gN,i||0):gN),null,gO)}),setSelection:ar(function(gO,i,gN){T(this,fT(this,gO),fT(this,i||gO),gN)}),extendSelection:ar(function(i,gN,gO){gG(this,fT(this,i),gN&&fT(this,gN),gO)}),extendSelections:ar(function(i,gN){bg(this,ba(this,i),gN)}),extendSelectionsBy:ar(function(i,gN){var gO=bf(this.sel.ranges,i);bg(this,ba(this,gO),gN)}),setSelections:ar(function(gO,i,gQ){var gN=this;if(!gO.length){return}var gP=[];for(var gR=0;gR<gO.length;gR++){gP[gR]=new aH(fT(gN,gO[gR].anchor),fT(gN,gO[gR].head))}if(i==null){i=Math.min(gO.length-1,this.sel.primIndex)}bk(this,bG(gP,i),gQ)}),addSelection:ar(function(gP,i,gO){var gN=this.sel.ranges.slice(0);gN.push(new aH(fT(this,gP),fT(this,i||gP)));bk(this,bG(gN,gN.length-1),gO)}),getSelection:function(i){var gN=this;var gP=this.sel.ranges,gO;for(var gQ=0;gQ<gP.length;gQ++){var gR=gg(gN,gP[gQ].from(),gP[gQ].to());gO=gO?gO.concat(gR):gR}if(i===false){return gO}else{return gO.join(i||this.lineSeparator())}},getSelections:function(i){var gN=this;var gR=[],gO=this.sel.ranges;for(var gP=0;gP<gO.length;gP++){var gQ=gg(gN,gO[gP].from(),gO[gP].to());if(i!==false){gQ=gQ.join(i||gN.lineSeparator())}gR[gP]=gQ}return gR},replaceSelection:function(gQ,gN,gO){var i=[];for(var gP=0;gP<this.sel.ranges.length;gP++){i[gP]=gQ}this.replaceSelections(i,gN,gO||"+input")},replaceSelections:ar(function(gN,gS,gU){var gR=this;var gT=[],gP=this.sel;for(var gQ=0;gQ<gP.ranges.length;gQ++){var gV=gP.ranges[gQ];gT[gQ]={from:gV.from(),to:gV.to(),text:gR.splitLines(gN[gQ]),origin:gU}}var i=gS&&gS!="end"&&m(this,gT,gS);for(var gO=gT.length-1;gO>=0;gO--){an(gR,gT[gO])}if(i){eT(this,i)}else{if(this.cm){dj(this.cm)}}}),undo:ar(function(){dZ(this,"undo")}),redo:ar(function(){dZ(this,"redo")}),undoSelection:ar(function(){dZ(this,"undo",true)}),redoSelection:ar(function(){dZ(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var i=this.history,gO=0,gQ=0;for(var gP=0;gP<i.done.length;gP++){if(!i.done[gP].ranges){++gO}}for(var gN=0;gN<i.undone.length;gN++){if(!i.undone[gN].ranges){++gQ}}return{undo:gO,redo:gQ}},clearHistory:function(){this.history=new fC(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:aI(this.history.done),undone:aI(this.history.undone)}},setHistory:function(i){var gN=this.history=new fC(this.history.maxGeneration);gN.done=aI(i.done.slice(0),null,true);gN.undone=aI(i.undone.slice(0),null,true)},setGutterMarker:ar(function(gN,gO,i){return c9(this,gN,"gutter",function(gP){var gQ=gP.gutterMarkers||(gP.gutterMarkers={});gQ[gO]=i;if(!i&&fR(gQ)){gP.gutterMarkers=null}return true})}),clearGutter:ar(function(i){var gN=this;var gO=this.first;this.iter(function(gP){if(gP.gutterMarkers&&gP.gutterMarkers[i]){c9(gN,gP,"gutter",function(){gP.gutterMarkers[i]=null;if(fR(gP.gutterMarkers)){gP.gutterMarkers=null}return true})}++gO})}),lineInfo:function(gN){var i;if(typeof gN=="number"){if(!d6(this,gN)){return null}i=gN;gN=ff(this,gN);if(!gN){return null}}else{i=bZ(gN);if(i==null){return null}}return{line:i,handle:gN,text:gN.text,gutterMarkers:gN.gutterMarkers,textClass:gN.textClass,bgClass:gN.bgClass,wrapClass:gN.wrapClass,widgets:gN.widgets}},addLineClass:ar(function(i,gO,gN){return c9(this,i,gO=="gutter"?"gutter":"class",function(gP){var gQ=gO=="text"?"textClass":gO=="background"?"bgClass":gO=="gutter"?"gutterClass":"wrapClass";if(!gP[gQ]){gP[gQ]=gN}else{if(ce(gN).test(gP[gQ])){return false}else{gP[gQ]+=" "+gN}}return true})}),removeLineClass:ar(function(i,gO,gN){return c9(this,i,gO=="gutter"?"gutter":"class",function(gQ){var gT=gO=="text"?"textClass":gO=="background"?"bgClass":gO=="gutter"?"gutterClass":"wrapClass";var gS=gQ[gT];if(!gS){return false}else{if(gN==null){gQ[gT]=null}else{var gR=gS.match(ce(gN));if(!gR){return false}var gP=gR.index+gR[0].length;gQ[gT]=gS.slice(0,gR.index)+(!gR.index||gP==gS.length?"":" ")+gS.slice(gP)||null}}return true})}),addLineWidget:ar(function(i,gO,gN){return u(this,i,gO,gN)}),removeLineWidget:function(i){i.clear()},markText:function(i,gO,gN){return fP(this,fT(this,i),fT(this,gO),gN,gN&&gN.type||"range")},setBookmark:function(i,gN){var gO={replacedWith:gN&&(gN.nodeType==null?gN.widget:gN),insertLeft:gN&&gN.insertLeft,clearWhenEmpty:false,shared:gN&&gN.shared,handleMouseEvents:gN&&gN.handleMouseEvents};i=fT(this,i);return fP(this,i,i,gO,"bookmark")},findMarksAt:function(gN){gN=fT(this,gN);var i=[],gP=ff(this,gN.line).markedSpans;if(gP){for(var gO=0;gO<gP.length;++gO){var gQ=gP[gO];if((gQ.from==null||gQ.from<=gN.ch)&&(gQ.to==null||gQ.to>=gN.ch)){i.push(gQ.marker.parent||gQ.marker)}}}return i},findMarks:function(gN,gQ,gO){gN=fT(this,gN);gQ=fT(this,gQ);var gP=[],i=gN.line;this.iter(gN.line,gQ.line+1,function(gS){var gU=gS.markedSpans;if(gU){for(var gT=0;gT<gU.length;gT++){var gR=gU[gT];if(!(gR.to!=null&&i==gN.line&&gN.ch>=gR.to||gR.from==null&&i!=gN.line||gR.from!=null&&i==gQ.line&&gR.from>=gQ.ch)&&(!gO||gO(gR.marker))){gP.push(gR.marker.parent||gR.marker)}}}++i});return gP},getAllMarks:function(){var i=[];this.iter(function(gP){var gO=gP.markedSpans;if(gO){for(var gN=0;gN<gO.length;++gN){if(gO[gN].from!=null){i.push(gO[gN].marker)}}}});return i},posFromIndex:function(i){var gO,gN=this.first,gP=this.lineSeparator().length;this.iter(function(gQ){var gR=gQ.text.length+gP;if(gR>i){gO=i;return true}i-=gR;++gN});return fT(this,cG(gN,gO))},indexFromPos:function(i){i=fT(this,i);var gN=i.ch;if(i.line<this.first||i.ch<0){return 0}var gO=this.lineSeparator().length;this.iter(this.first,i.line,function(gP){gN+=gP.text.length+gO});return gN},copy:function(gN){var i=new aY(gs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);i.scrollTop=this.scrollTop;i.scrollLeft=this.scrollLeft;i.sel=this.sel;i.extend=false;if(gN){i.history.undoDepth=this.history.undoDepth;i.setHistory(this.getHistory())}return i},linkedDoc:function(i){if(!i){i={}}var gN=this.first,gP=this.first+this.size;if(i.from!=null&&i.from>gN){gN=i.from}if(i.to!=null&&i.to<gP){gP=i.to}var gO=new aY(gs(this,gN,gP),i.mode||this.modeOption,gN,this.lineSep);if(i.sharedHist){gO.history=this.history}(this.linked||(this.linked=[])).push({doc:gO,sharedHist:i.sharedHist});gO.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];dD(gO,cy(this));return gO},unlinkDoc:function(gP){var gN=this;if(gP instanceof eI){gP=gP.doc}if(this.linked){for(var gQ=0;gQ<this.linked.length;++gQ){var i=gN.linked[gQ];if(i.doc!=gP){continue}gN.linked.splice(gQ,1);gP.unlinkDoc(gN);eb(cy(gN));break}}if(gP.history==this.history){var gO=[gP.id];fE(gP,function(gR){return gO.push(gR.id)},true);gP.history=new fC(null);gP.history.done=aI(this.history.done,gO);gP.history.undone=aI(this.history.undone,gO)}},iterLinkedDocs:function(i){fE(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return fw(i)},lineSeparator:function(){return this.lineSep||"\n"}});aY.prototype.eachLine=aY.prototype.iter;var o=0;function cY(gU){var gW=this;cK(gW);if(U(gW,gU)||H(gW.display,gU)){return}cT(gU);if(cm){o=+new Date}var gV=ct(gW,gU,true),gN=gU.dataTransfer.files;if(!gV||gW.isReadOnly()){return}if(gN&&gN.length&&window.FileReader&&window.File){var gQ=gN.length,gX=Array(gQ),gO=0;var gS=function(g0,gZ){if(gW.options.allowDropFileTypes&&dE(gW.options.allowDropFileTypes,g0.type)==-1){return}var gY=new FileReader;gY.onload=a8(gW,function(){var g1=gY.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(g1)){g1=""}gX[gZ]=g1;if(++gO==gQ){gV=fT(gW.doc,gV);var g2={from:gV,to:gV,text:gW.doc.splitLines(gX.join(gW.doc.lineSeparator())),origin:"paste"};an(gW.doc,g2);eT(gW.doc,e8(gV,ca(g2)))}});gY.readAsText(g0)};for(var gT=0;gT<gQ;++gT){gS(gN[gT],gT)}}else{if(gW.state.draggingText&&gW.doc.sel.contains(gV)>-1){gW.state.draggingText(gU);setTimeout(function(){return gW.display.input.focus()},20);return}try{var i=gU.dataTransfer.getData("Text");if(i){var gR;if(gW.state.draggingText&&!gW.state.draggingText.copy){gR=gW.listSelections()}ef(gW.doc,e8(gV,gV));if(gR){for(var gP=0;gP<gR.length;++gP){gp(gW.doc,"",gR[gP].anchor,gR[gP].head,"drag")}}gW.replaceSelection(i,"around","paste");gW.display.input.focus()}}catch(gU){}}}function de(gN,i){if(cm&&(!gN.state.draggingText||+new Date-o<100)){em(i);return}if(U(gN,i)||H(gN.display,i)){return}i.dataTransfer.setData("Text",gN.getSelection());i.dataTransfer.effectAllowed="copyMove";if(i.dataTransfer.setDragImage&&!d){var gO=gf("img",null,null,"position: fixed; left: 0; top: 0;");gO.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(fj){gO.width=gO.height=1;gN.display.wrapper.appendChild(gO);gO._top=gO.offsetTop}i.dataTransfer.setDragImage(gO,0,0);if(fj){gO.parentNode.removeChild(gO)}}}function gb(i,gO){var gN=ct(i,gO);if(!gN){return}var gP=document.createDocumentFragment();bz(i,gN,gP);if(!i.display.dragCursor){i.display.dragCursor=gf("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}a5(i.display.dragCursor,gP)}function cK(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function b(gN){if(!document.body.getElementsByClassName){return}var i=document.body.getElementsByClassName("CodeMirror");for(var gP=0;gP<i.length;gP++){var gO=i[gP].CodeMirror;if(gO){gN(gO)}}}var ap=false;function cP(){if(ap){return}dd();ap=true}function dd(){var i;J(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;b(ad)},100)}});J(window,"blur",function(){return b(ak)})}function ad(gN){var i=gN.display;if(i.lastWrapHeight==i.wrapper.clientHeight&&i.lastWrapWidth==i.wrapper.clientWidth){return}i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null;i.scrollbarsClipped=false;gN.setSize()}var e5={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var eo=0;eo<10;eo++){e5[eo+48]=e5[eo+96]=String(eo)}for(var fA=65;fA<=90;fA++){e5[fA]=String.fromCharCode(fA)}for(var fy=1;fy<=12;fy++){e5[fy+111]=e5[fy+63235]="F"+fy}var e2={};e2.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};e2.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};e2.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};e2.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};e2["default"]=dP?e2.macDefault:e2.pcDefault;function bE(gQ){var gO=gQ.split(/-(?!$)/);gQ=gO[gO.length-1];var gN,i,gP,gT;for(var gS=0;gS<gO.length-1;gS++){var gR=gO[gS];if(/^(cmd|meta|m)$/i.test(gR)){gT=true}else{if(/^a(lt)?$/i.test(gR)){gN=true}else{if(/^(c|ctrl|control)$/i.test(gR)){i=true}else{if(/^s(hift)?$/i.test(gR)){gP=true}else{throw new Error("Unrecognized modifier name: "+gR)}}}}}if(gN){gQ="Alt-"+gQ}if(i){gQ="Ctrl-"+gQ}if(gT){gQ="Cmd-"+gQ}if(gP){gQ="Shift-"+gQ}return gQ}function c8(gT){var gN={};for(var gS in gT){if(gT.hasOwnProperty(gS)){var gU=gT[gS];if(/^(name|fallthrough|(de|at)tach)$/.test(gS)){continue}if(gU=="..."){delete gT[gS];continue}var gV=bf(gS.split(" "),bE);for(var gR=0;gR<gV.length;gR++){var gP=void 0,gO=void 0;if(gR==gV.length-1){gO=gV.join(" ");gP=gU}else{gO=gV.slice(0,gR+1).join(" ");gP="..."}var gQ=gN[gO];if(!gQ){gN[gO]=gP}else{if(gQ!=gP){throw new Error("Inconsistent bindings for "+gO)}}}delete gT[gS]}}for(var i in gN){gT[i]=gN[i]}return gT}function dh(gR,gS,gN,gQ){gS=gF(gS);var i=gS.call?gS.call(gR,gQ):gS[gR];if(i===false){return"nothing"}if(i==="..."){return"multi"}if(i!=null&&gN(i)){return"handled"}if(gS.fallthrough){if(Object.prototype.toString.call(gS.fallthrough)!="[object Array]"){return dh(gR,gS.fallthrough,gN,gQ)}for(var gP=0;gP<gS.fallthrough.length;gP++){var gO=dh(gR,gS.fallthrough[gP],gN,gQ);if(gO){return gO}}}}function dg(i){var gN=typeof i=="string"?i:e5[i.keyCode];return gN=="Ctrl"||gN=="Alt"||gN=="Shift"||gN=="Mod"}function dO(gO,i){if(fj&&gO.keyCode==34&&gO["char"]){return false}var gP=e5[gO.keyCode],gN=gP;if(gN==null||gO.altGraphKey){return false}if(gO.altKey&&gP!="Alt"){gN="Alt-"+gN}if((aQ?gO.metaKey:gO.ctrlKey)&&gP!="Ctrl"){gN="Ctrl-"+gN}if((aQ?gO.ctrlKey:gO.metaKey)&&gP!="Cmd"){gN="Cmd-"+gN}if(!i&&gO.shiftKey&&gP!="Shift"){gN="Shift-"+gN}return gN}function gF(i){return typeof i=="string"?e2[i]:i}function f3(gO,gN){var gP=gO.doc.sel.ranges,gS=[];for(var gR=0;gR<gP.length;gR++){var gQ=gN(gP[gR]);while(gS.length&&ds(gQ.from,dp(gS).to)<=0){var i=gS.pop();if(ds(i.from,gQ.from)<0){gQ.from=i.from;break}}gS.push(gQ)}cr(gO,function(){for(var gT=gS.length-1;gT>=0;gT--){gp(gO.doc,"",gS[gT].from,gS[gT].to,"+delete")}dj(gO)})}var dt={selectAll:y,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),be)},killLine:function(i){return f3(i,function(gN){if(gN.empty()){var gO=ff(i.doc,gN.head.line).text.length;if(gN.head.ch==gO&&gN.head.line<i.lastLine()){return{from:gN.head,to:cG(gN.head.line+1,0)}}else{return{from:gN.head,to:cG(gN.head.line,gO)}}}else{return{from:gN.from(),to:gN.to()}}})},deleteLine:function(i){return f3(i,function(gN){return({from:cG(gN.from().line,0),to:fT(i.doc,cG(gN.to().line+1,0))})})},delLineLeft:function(i){return f3(i,function(gN){return({from:cG(gN.from().line,0),to:gN.from()})})},delWrappedLineLeft:function(i){return f3(i,function(gO){var gN=i.charCoords(gO.head,"div").top+5;var gP=i.coordsChar({left:0,top:gN},"div");return{from:gP,to:gO.from()}})},delWrappedLineRight:function(i){return f3(i,function(gO){var gN=i.charCoords(gO.head,"div").top+5;var gP=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gN},"div");return{from:gO.from(),to:gP}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(cG(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(cG(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(gN){return a7(i,gN.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(gN){return b4(i,gN.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(gN){return dW(i,gN.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(gO){var gN=i.charCoords(gO.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gN},"div")},b3)},goLineLeft:function(i){return i.extendSelectionsBy(function(gO){var gN=i.charCoords(gO.head,"div").top+5;return i.coordsChar({left:0,top:gN},"div")},b3)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(gO){var gP=i.charCoords(gO.head,"div").top+5;var gN=i.coordsChar({left:0,top:gP},"div");if(gN.ch<i.getLine(gN.line).search(/\S/)){return b4(i,gO.head)}return gN},b3)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(gO){var gQ=[],gP=gO.listSelections(),i=gO.options.tabSize;for(var gS=0;gS<gP.length;gS++){var gN=gP[gS].from();var gR=aT(gO.getLine(gN.line),gN.ch,i);gQ.push(eR(i-gR%i))}gO.replaceSelections(gQ)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return cr(i,function(){var gQ=i.listSelections(),gP=[];for(var gR=0;gR<gQ.length;gR++){if(!gQ[gR].empty()){continue}var gN=gQ[gR].head,gO=ff(i.doc,gN.line).text;if(gO){if(gN.ch==gO.length){gN=new cG(gN.line,gN.ch-1)}if(gN.ch>0){gN=new cG(gN.line,gN.ch+1);i.replaceRange(gO.charAt(gN.ch-1)+gO.charAt(gN.ch-2),cG(gN.line,gN.ch-2),gN,"+transpose")}else{if(gN.line>i.doc.first){var gS=ff(i.doc,gN.line-1).text;if(gS){gN=new cG(gN.line,1);i.replaceRange(gO.charAt(0)+i.doc.lineSeparator()+gS.charAt(gS.length-1),cG(gN.line-1,gS.length-1),gN,"+transpose")}}}}gP.push(new aH(gN,gN))}i.setSelections(gP)})},newlineAndIndent:function(i){return cr(i,function(){var gO=i.listSelections();for(var gP=gO.length-1;gP>=0;gP--){i.replaceRange(i.doc.lineSeparator(),gO[gP].anchor,gO[gP].head,"+input")}gO=i.listSelections();for(var gN=0;gN<gO.length;gN++){i.indentLine(gO[gN].from().line,null,true)}dj(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function a7(gO,i){var gP=ff(gO.doc,i);var gN=dU(gP);if(gN!=gP){i=bZ(gN)}var gQ=by(gN);var gR=!gQ?0:gQ[0].level%2?bn(gN):ay(gN);return cG(i,gR)}function dW(gP,gN){var gO,gQ=ff(gP.doc,gN);while(gO=cI(gQ)){gQ=gO.find(1,true).line;gN=null}var gR=by(gQ);var i=!gR?gQ.text.length:gR[0].level%2?ay(gQ):bn(gQ);return cG(gN==null?bZ(gQ):gN,i)}function b4(gO,gN){var i=a7(gO,gN.line);var gP=ff(gO.doc,i.line);var gQ=by(gP);if(!gQ||gQ[0].level==0){var gS=Math.max(0,gP.text.search(/\S/));var gR=gN.line==i.line&&gN.ch<=gS&&gN.ch;return cG(i.line,gR?0:gS)}return i}function fu(gO,gN,gQ){if(typeof gN=="string"){gN=dt[gN];if(!gN){return false}}gO.display.input.ensurePolled();var i=gO.display.shift,gP=false;try{if(gO.isReadOnly()){gO.state.suppressEdits=true}if(gQ){gO.display.shift=false}gP=gN(gO)!=cX}finally{gO.display.shift=i;gO.state.suppressEdits=false}return gP}function dJ(gP,gQ,gN){for(var i=0;i<gP.state.keyMaps.length;i++){var gO=dh(gQ,gP.state.keyMaps[i],gN,gP);if(gO){return gO}}return(gP.options.extraKeys&&dh(gQ,gP.options.extraKeys,gN,gP))||dh(gQ,gP.options.keyMap,gN,gP)}var eK=new ge;function V(gO,gQ,gN,i){var gP=gO.state.keySeq;if(gP){if(dg(gQ)){return"handled"}eK.set(50,function(){if(gO.state.keySeq==gP){gO.state.keySeq=null;gO.display.input.reset()}});gQ=gP+" "+gQ}var gR=dJ(gO,gQ,i);if(gR=="multi"){gO.state.keySeq=gQ}if(gR=="handled"){j(gO,"keyHandled",gO,gQ,gN)}if(gR=="handled"||gR=="multi"){cT(gN);bU(gO)}if(gP&&!gR&&/\'$/.test(gQ)){cT(gN);return true}return !!gR}function fg(gN,i){var gO=dO(i,true);if(!gO){return false}if(i.shiftKey&&!gN.state.keySeq){return V(gN,"Shift-"+gO,i,function(gP){return fu(gN,gP,true)})||V(gN,gO,i,function(gP){if(typeof gP=="string"?/^go[A-Z]/.test(gP):gP.motion){return fu(gN,gP)}})}else{return V(gN,gO,i,function(gP){return fu(gN,gP)})}}function gh(gN,i,gO){return V(gN,"'"+gO+"'",i,function(gP){return fu(gN,gP,true)})}var eN=null;function b7(i){var gN=this;gN.curOp.focus=e3();if(U(gN,i)){return}if(cm&&du<11&&i.keyCode==27){i.returnValue=false}var gO=i.keyCode;gN.display.shift=gO==16||i.shiftKey;var gP=fg(gN,i);if(fj){eN=gP?gO:null;if(!gP&&gO==88&&!cH&&(dP?i.metaKey:i.ctrlKey)){gN.replaceSelection("",null,"cut")}}if(gO==18&&!/\bCodeMirror-crosshair\b/.test(gN.display.lineDiv.className)){aK(gN)}}function aK(gO){var i=gO.display.lineDiv;gn(i,"CodeMirror-crosshair");function gN(gP){if(gP.keyCode==18||!gP.altKey){c2(i,"CodeMirror-crosshair");ep(document,"keyup",gN);ep(document,"mouseover",gN)}}J(document,"keyup",gN);J(document,"mouseover",gN)}function aw(i){if(i.keyCode==16){this.doc.sel.shift=false}U(this,i)}function L(gN){var gQ=this;if(H(gQ.display,gN)||U(gQ,gN)||gN.ctrlKey&&!gN.altKey||dP&&gN.metaKey){return}var i=gN.keyCode,gO=gN.charCode;if(fj&&i==eN){eN=null;cT(gN);return}if((fj&&(!gN.which||gN.which<10))&&fg(gQ,gN)){return}var gP=String.fromCharCode(gO==null?i:gO);if(gP=="\x08"){return}if(gh(gQ,gN,gP)){return}gQ.display.input.onKeyPress(gN)}function eC(gP){var i=this,gO=i.display;if(U(i,gP)||gO.activeTouch&&gO.input.supportsTouch()){return}gO.input.ensurePolled();gO.shift=gP.shiftKey;if(H(gO,gP)){if(!aX){gO.scroller.draggable=false;setTimeout(function(){return gO.scroller.draggable=true},100)}return}if(dz(i,gP)){return}var gN=ct(i,gP);window.focus();switch(fm(gP)){case 1:if(i.state.selectingText){i.state.selectingText(gP)}else{if(gN){bm(i,gP,gN)}else{if(aC(gP)==gO.scroller){cT(gP)}}}break;case 2:if(aX){i.state.lastMiddleDown=+new Date}if(gN){gG(i.doc,gN)}setTimeout(function(){return gO.input.focus()},20);cT(gP);break;case 3:if(fQ){bq(i,gP)}else{v(i)}break}}var fX;var c1;function bm(gO,i,gN){if(cm){setTimeout(bA(cq,gO),0)}else{gO.curOp.focus=e3()}var gP=+new Date,gS;if(c1&&c1.time>gP-400&&ds(c1.pos,gN)==0){gS="triple"}else{if(fX&&fX.time>gP-400&&ds(fX.pos,gN)==0){gS="double";c1={time:gP,pos:gN}}else{gS="single";fX={time:gP,pos:gN}}}var gT=gO.doc.sel,gQ=dP?i.metaKey:i.ctrlKey,gR;if(gO.options.dragDrop&&b2&&!gO.isReadOnly()&&gS=="single"&&(gR=gT.contains(gN))>-1&&(ds((gR=gT.ranges[gR]).from(),gN)<0||gN.xRel>0)&&(ds(gR.to(),gN)>0||gN.xRel<0)){gt(gO,i,gN,gQ)}else{dF(gO,i,gN,gS,gQ)}}function gt(gP,i,gN,gO){var gS=gP.display,gQ=+new Date;var gR=a8(gP,function(gT){if(aX){gS.scroller.draggable=false}gP.state.draggingText=false;ep(document,"mouseup",gR);ep(gS.scroller,"drop",gR);if(Math.abs(i.clientX-gT.clientX)+Math.abs(i.clientY-gT.clientY)<10){cT(gT);if(!gO&&+new Date-200<gQ){gG(gP.doc,gN)}if(aX||cm&&du==9){setTimeout(function(){document.body.focus();gS.input.focus()},20)}else{gS.input.focus()}}});if(aX){gS.scroller.draggable=true}gP.state.draggingText=gR;gR.copy=dP?i.altKey:i.ctrlKey;if(gS.scroller.dragDrop){gS.scroller.dragDrop()}J(document,"mouseup",gR);J(gS.scroller,"drop",gR)}function dF(gV,gO,gU,gS,gX){var g6=gV.display,gQ=gV.doc;cT(gO);var gT,gP,gW=gQ.sel,gR=gW.ranges;if(gX&&!gO.shiftKey){gP=gQ.sel.contains(gU);if(gP>-1){gT=gR[gP]}else{gT=new aH(gU,gU)}}else{gT=gQ.sel.primary();gP=gQ.sel.primIndex}if(fN?gO.shiftKey&&gO.metaKey:gO.altKey){gS="rect";if(!gX){gT=new aH(gU,gU)}gU=ct(gV,gO,true,true);gP=-1}else{if(gS=="double"){var i=gV.findWordAt(gU);if(gV.display.shift||gQ.extend){gT=eg(gQ,gT,i.anchor,i.head)}else{gT=i}}else{if(gS=="triple"){var g0=new aH(cG(gU.line,0),fT(gQ,cG(gU.line+1,0)));if(gV.display.shift||gQ.extend){gT=eg(gQ,gT,g0.anchor,g0.head)}else{gT=g0}}else{gT=eg(gQ,gT,gU)}}}if(!gX){gP=0;bk(gQ,new gL([gT],0),cN);gW=gQ.sel}else{if(gP==-1){gP=gR.length;bk(gQ,bG(gR.concat([gT]),gP),{scroll:false,origin:"*mouse"})}else{if(gR.length>1&&gR[gP].empty()&&gS=="single"&&!gO.shiftKey){bk(gQ,bG(gR.slice(0,gP).concat(gR.slice(gP+1)),0),{scroll:false,origin:"*mouse"});gW=gQ.sel}else{d7(gQ,gP,gT,cN)}}}var g5=gU;function g4(g9){if(ds(g5,g9)==0){return}g5=g9;if(gS=="rect"){var hf=[],hm=gV.options.tabSize;var he=aT(ff(gQ,gU.line).text,gU.ch,hm);var hg=aT(ff(gQ,g9.line).text,g9.ch,hm);var hh=Math.min(he,hg),hc=Math.max(he,hg);for(var hi=Math.min(gU.line,g9.line),hk=Math.min(gV.lastLine(),Math.max(gU.line,g9.line));hi<=hk;hi++){var hd=ff(gQ,hi).text,hj=ei(hd,hh,hm);if(hh==hc){hf.push(new aH(cG(hi,hj),cG(hi,hj)))}else{if(hd.length>hj){hf.push(new aH(cG(hi,hj),cG(hi,ei(hd,hc,hm))))}}}if(!hf.length){hf.push(new aH(gU,gU))}bk(gQ,bG(gW.ranges.slice(0,gP).concat(hf),gP),{origin:"*mouse",scroll:false});gV.scrollIntoView(g9)}else{var g7=gT;var hl=g7.anchor,g8=g9;if(gS!="single"){var ha;if(gS=="double"){ha=gV.findWordAt(g9)}else{ha=new aH(cG(g9.line,0),fT(gQ,cG(g9.line+1,0)))}if(ds(ha.anchor,hl)>0){g8=ha.head;hl=b6(g7.from(),ha.anchor)}else{g8=ha.anchor;hl=aB(g7.to(),ha.head)}}var hb=gW.ranges.slice(0);hb[gP]=new aH(fT(gQ,hl),g8);bk(gQ,bG(hb,gP),cN)}}var g2=g6.wrapper.getBoundingClientRect();var gY=0;function gN(g8){var ha=++gY;var g7=ct(gV,g8,true,gS=="rect");if(!g7){return}if(ds(g7,g5)!=0){gV.curOp.focus=e3();g4(g7);var g9=bB(g6,gQ);if(g7.line>=g9.to||g7.line<g9.from){setTimeout(a8(gV,function(){if(gY==ha){gN(g8)}}),150)}}else{var hb=g8.clientY<g2.top?-20:g8.clientY>g2.bottom?20:0;if(hb){setTimeout(a8(gV,function(){if(gY!=ha){return}g6.scroller.scrollTop+=hb;gN(g8)}),50)}}}function g1(g7){gV.state.selectingText=false;gY=Infinity;cT(g7);g6.input.focus();ep(document,"mousemove",g3);ep(document,"mouseup",gZ);gQ.history.lastSelOrigin=null}var g3=a8(gV,function(g7){if(!fm(g7)){g1(g7)}else{gN(g7)}});var gZ=a8(gV,g1);gV.state.selectingText=gZ;J(document,"mousemove",g3);J(document,"mouseup",gZ)}function gc(gW,gS,gU,gV){var gN,i;try{gN=gS.clientX;i=gS.clientY}catch(gS){return false}if(gN>=Math.floor(gW.display.gutters.getBoundingClientRect().right)){return false}if(gV){cT(gS)}var gT=gW.display;var gR=gT.lineDiv.getBoundingClientRect();if(i>gR.bottom||!fp(gW,gU)){return F(gS)}i-=gR.top-gT.viewOffset;for(var gP=0;gP<gW.options.gutters.length;++gP){var gQ=gT.gutters.childNodes[gP];if(gQ&&gQ.getBoundingClientRect().right>=gN){var gX=w(gW.doc,i);var gO=gW.options.gutters[gP];aM(gW,gU,gW,gX,gO,gS);return F(gS)}}}function dz(gN,i){return gc(gN,i,"gutterClick",true)}function bq(gN,i){if(H(gN.display,i)||dr(gN,i)){return}if(U(gN,i,"contextmenu")){return}gN.display.input.onContextMenu(i)}function dr(gN,i){if(!fp(gN,"gutterContextMenu")){return false}return gc(gN,i,"gutterContextMenu",false)}function cC(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");t(i)}var c7={toString:function(){return"CodeMirror.Init"}};var gd={};var aj={};function fZ(gN){var i=gN.optionHandlers;function gO(gP,gS,gR,gQ){gN.defaults[gP]=gS;if(gR){i[gP]=gQ?function(gV,gU,gT){if(gT!=c7){gR(gV,gU,gT)}}:gR}}gN.defineOption=gO;gN.Init=c7;gO("value","",function(gP,gQ){return gP.setValue(gQ)},true);gO("mode",null,function(gP,gQ){gP.doc.modeOption=gQ;aJ(gP)},true);gO("indentUnit",2,aJ,true);gO("indentWithTabs",false);gO("smartIndent",true);gO("tabSize",4,function(gP){gx(gP);t(gP);q(gP)},true);gO("lineSeparator",null,function(gP,gS){gP.doc.lineSep=gS;if(!gS){return}var gR=[],gT=gP.doc.first;gP.doc.iter(function(gU){for(var gW=0;;){var gV=gU.text.indexOf(gS,gW);if(gV==-1){break}gW=gV+gS.length;gR.push(cG(gT,gV))}gT++});for(var gQ=gR.length-1;gQ>=0;gQ--){gp(gP.doc,gS,gR[gQ],cG(gR[gQ].line,gR[gQ].ch+gS.length))}});gO("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(gP,gR,gQ){gP.state.specialChars=new RegExp(gR.source+(gR.test("\t")?"":"|\t"),"g");if(gQ!=c7){gP.refresh()}});gO("specialCharPlaceholder",fd,function(gP){return gP.refresh()},true);gO("electricChars",true);gO("inputStyle",eu?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);gO("spellcheck",false,function(gP,gQ){return gP.getInputField().spellcheck=gQ},true);gO("rtlMoveVisually",!N);gO("wholeLineUpdateBefore",true);gO("theme","default",function(gP){cC(gP);ea(gP)},true);gO("keyMap","default",function(gP,gT,gQ){var gR=gF(gT);var gS=gQ!=c7&&gF(gQ);if(gS&&gS.detach){gS.detach(gP,gR)}if(gR.attach){gR.attach(gP,gS||null)}});gO("extraKeys",null);gO("lineWrapping",false,fV,true);gO("gutters",[],function(gP){dm(gP.options);ea(gP)},true);gO("fixedGutter",true,function(gP,gQ){gP.display.gutters.style.left=gQ?aO(gP.display)+"px":"0";gP.refresh()},true);gO("coverGutterNextToScrollbar",false,function(gP){return f4(gP)},true);gO("scrollbarStyle","native",function(gP){e(gP);f4(gP);gP.display.scrollbars.setScrollTop(gP.doc.scrollTop);gP.display.scrollbars.setScrollLeft(gP.doc.scrollLeft)},true);gO("lineNumbers",false,function(gP){dm(gP.options);ea(gP)},true);gO("firstLineNumber",1,ea,true);gO("lineNumberFormatter",function(gP){return gP},ea,true);gO("showCursorWhenSelecting",false,l,true);gO("resetSelectionOnContextMenu",true);gO("lineWiseCopyCut",true);gO("readOnly",false,function(gP,gQ){if(gQ=="nocursor"){ak(gP);gP.display.input.blur();gP.display.disabled=true}else{gP.display.disabled=false}gP.display.input.readOnlyChanged(gQ)});gO("disableInput",false,function(gP,gQ){if(!gQ){gP.display.input.reset()}},true);gO("dragDrop",true,gJ);gO("allowDropFileTypes",null);gO("cursorBlinkRate",530);gO("cursorScrollMargin",0);gO("cursorHeight",1,l,true);gO("singleCursorHeightPerLine",true,l,true);gO("workTime",100);gO("workDelay",100);gO("flattenSpans",true,gx,true);gO("addModeClass",false,gx,true);gO("pollInterval",100);gO("undoDepth",200,function(gP,gQ){return gP.doc.history.undoDepth=gQ});gO("historyEventDelay",1250);gO("viewportMargin",10,function(gP){return gP.refresh()},true);gO("maxHighlightLength",10000,gx,true);gO("moveInputWithCursor",true,function(gP,gQ){if(!gQ){gP.display.input.resetPosition()}});gO("tabindex",null,function(gP,gQ){return gP.display.input.getField().tabIndex=gQ||""});gO("autofocus",null)}function ea(i){ec(i);q(i);setTimeout(function(){return dG(i)},20)}function gJ(gO,i,gP){var gN=gP&&gP!=c7;if(!i!=!gN){var gQ=gO.display.dragFunctions;var gR=i?J:ep;gR(gO.display.scroller,"dragstart",gQ.start);gR(gO.display.scroller,"dragenter",gQ.enter);gR(gO.display.scroller,"dragover",gQ.over);gR(gO.display.scroller,"dragleave",gQ.leave);gR(gO.display.scroller,"drop",gQ.drop)}}function fV(i){if(i.options.lineWrapping){gn(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{c2(i.display.wrapper,"CodeMirror-wrap");cL(i)}a3(i);q(i);t(i);setTimeout(function(){return f4(i)},100)}function eI(gP,gR){var gO=this;if(!(this instanceof eI)){return new eI(gP,gR)}this.options=gR=gR?bd(gR):{};bd(gd,gR,false);dm(gR);var gN=gR.value;if(typeof gN=="string"){gN=new aY(gN,gR.mode,null,gR.lineSeparator)}this.doc=gN;var gQ=new eI.inputStyles[gR.inputStyle](this);var i=this.display=new eV(gP,gN,gQ);i.wrapper.CodeMirror=this;ec(this);cC(this);if(gR.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gR.autofocus&&!eu){i.input.focus()}e(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new ge(),keySeq:null,specialChars:null};if(cm&&du<11){setTimeout(function(){return gO.display.input.reset(true)},20)}fs(this);cP();bL(this);this.curOp.forceUpdate=true;d8(this,gN);if((gR.autofocus&&!eu)||this.hasFocus()){setTimeout(bA(af,this),20)}else{ak(this)}for(var gT in aj){if(aj.hasOwnProperty(gT)){aj[gT](gO,gR[gT],c7)}}fx(this);if(gR.finishInit){gR.finishInit(this)}for(var gS=0;gS<a.length;++gS){a[gS](gO)}z(this);if(aX&&gR.lineWrapping&&getComputedStyle(i.lineDiv).textRendering=="optimizelegibility"){i.lineDiv.style.textRendering="auto"}}eI.defaults=gd;eI.optionHandlers=aj;function fs(gO){var gT=gO.display;J(gT.scroller,"mousedown",a8(gO,eC));if(cm&&du<11){J(gT.scroller,"dblclick",a8(gO,function(gV){if(U(gO,gV)){return}var gW=ct(gO,gV);if(!gW||dz(gO,gV)||H(gO.display,gV)){return}cT(gV);var gU=gO.findWordAt(gW);gG(gO.doc,gU.anchor,gU.head)}))}else{J(gT.scroller,"dblclick",function(gU){return U(gO,gU)||cT(gU)})}if(!fQ){J(gT.scroller,"contextmenu",function(gU){return bq(gO,gU)})}var gN,gQ={end:0};function i(){if(gT.activeTouch){gN=setTimeout(function(){return gT.activeTouch=null},1000);gQ=gT.activeTouch;gQ.end=+new Date}}function gR(gU){if(gU.touches.length!=1){return false}var gV=gU.touches[0];return gV.radiusX<=1&&gV.radiusY<=1}function gP(gX,gU){if(gU.left==null){return true}var gW=gU.left-gX.left,gV=gU.top-gX.top;return gW*gW+gV*gV>20*20}J(gT.scroller,"touchstart",function(gV){if(!U(gO,gV)&&!gR(gV)){gT.input.ensurePolled();clearTimeout(gN);var gU=+new Date;gT.activeTouch={start:gU,moved:false,prev:gU-gQ.end<=300?gQ:null};if(gV.touches.length==1){gT.activeTouch.left=gV.touches[0].pageX;gT.activeTouch.top=gV.touches[0].pageY}}});J(gT.scroller,"touchmove",function(){if(gT.activeTouch){gT.activeTouch.moved=true}});J(gT.scroller,"touchend",function(gV){var gX=gT.activeTouch;if(gX&&!H(gT,gV)&&gX.left!=null&&!gX.moved&&new Date-gX.start<300){var gW=gO.coordsChar(gT.activeTouch,"page"),gU;if(!gX.prev||gP(gX,gX.prev)){gU=new aH(gW,gW)}else{if(!gX.prev.prev||gP(gX,gX.prev.prev)){gU=gO.findWordAt(gW)}else{gU=new aH(cG(gW.line,0),fT(gO.doc,cG(gW.line+1,0)))}}gO.setSelection(gU.anchor,gU.head);gO.focus();cT(gV)}i()});J(gT.scroller,"touchcancel",i);J(gT.scroller,"scroll",function(){if(gT.scroller.clientHeight){c3(gO,gT.scroller.scrollTop);p(gO,gT.scroller.scrollLeft,true);aM(gO,"scroll",gO)}});J(gT.scroller,"mousewheel",function(gU){return dR(gO,gU)});J(gT.scroller,"DOMMouseScroll",function(gU){return dR(gO,gU)});J(gT.wrapper,"scroll",function(){return gT.wrapper.scrollTop=gT.wrapper.scrollLeft=0});gT.dragFunctions={enter:function(gU){if(!U(gO,gU)){em(gU)}},over:function(gU){if(!U(gO,gU)){gb(gO,gU);em(gU)}},start:function(gU){return de(gO,gU)},drop:a8(gO,cY),leave:function(gU){if(!U(gO,gU)){cK(gO)}}};var gS=gT.input.getField();J(gS,"keyup",function(gU){return aw.call(gO,gU)});J(gS,"keydown",a8(gO,b7));J(gS,"keypress",a8(gO,L));J(gS,"focus",function(gU){return af(gO,gU)});J(gS,"blur",function(gU){return ak(gO,gU)})}var a=[];eI.defineInitHook=function(i){return a.push(i)};function f(i,gS,g2,gQ){var g1=i.doc,gP;if(g2==null){g2="add"}if(g2=="smart"){if(!g1.mode.indent){g2="prev"}else{gP=di(i,gS)}}var gW=i.options.tabSize;var gN=ff(g1,gS),gV=aT(gN.text,null,gW);if(gN.stateAfter){gN.stateAfter=null}var gO=gN.text.match(/^\s*/)[0],gZ;if(!gQ&&!/\S/.test(gN.text)){gZ=0;g2="not"}else{if(g2=="smart"){gZ=g1.mode.indent(gP,gN.text.slice(gO.length),gN.text);if(gZ==cX||gZ>150){if(!gQ){return}g2="prev"}}}if(g2=="prev"){if(gS>g1.first){gZ=aT(ff(g1,gS-1).text,null,gW)}else{gZ=0}}else{if(g2=="add"){gZ=gV+i.options.indentUnit}else{if(g2=="subtract"){gZ=gV-i.options.indentUnit}else{if(typeof g2=="number"){gZ=gV+g2}}}}gZ=Math.max(0,gZ);var g0="",gY=0;if(i.options.indentWithTabs){for(var gT=Math.floor(gZ/gW);gT;--gT){gY+=gW;g0+="\t"}}if(gY<gZ){g0+=eR(gZ-gY)}if(g0!=gO){gp(g1,g0,cG(gS,0),cG(gS,gO.length),"+input");gN.stateAfter=null;return true}else{for(var gR=0;gR<g1.sel.ranges.length;gR++){var gU=g1.sel.ranges[gR];if(gU.head.line==gS&&gU.head.ch<gO.length){var gX=cG(gS,gO.length);d7(g1,gR,new aH(gX,gX));break}}}}var bI=null;function en(i){bI=i}function gH(g1,gS,gQ,gP,g0){var gZ=g1.doc;g1.display.shift=false;if(!gP){gP=gZ.sel}var gR=g1.state.pasteIncoming||g0=="paste";var gU=fw(gS),gN=null;if(gR&&gP.ranges.length>1){if(bI&&bI.text.join("\n")==gS){if(gP.ranges.length%bI.text.length==0){gN=[];for(var gT=0;gT<bI.text.length;gT++){gN.push(gZ.splitLines(bI.text[gT]))}}}else{if(gU.length==gP.ranges.length){gN=bf(gU,function(g2){return[g2]})}}}var gV;for(var gO=gP.ranges.length-1;gO>=0;gO--){var i=gP.ranges[gO];var gY=i.from(),gX=i.to();if(i.empty()){if(gQ&&gQ>0){gY=cG(gY.line,gY.ch-gQ)}else{if(g1.state.overwrite&&!gR){gX=cG(gX.line,Math.min(ff(gZ,gX.line).text.length,gX.ch+dp(gU).length))}else{if(bI&&bI.lineWise&&bI.text.join("\n")==gS){gY=gX=cG(gY.line,0)}}}}gV=g1.curOp.updateInput;var gW={from:gY,to:gX,text:gN?gN[gO%gN.length]:gU,origin:g0||(gR?"paste":g1.state.cutIncoming?"cut":"+input")};an(g1.doc,gW);j(g1,"inputRead",g1,gW)}if(gS&&!gR){gE(g1,gS)}dj(g1);g1.curOp.updateInput=gV;g1.curOp.typing=true;g1.state.pasteIncoming=g1.state.cutIncoming=false}function G(i,gN){var gO=i.clipboardData&&i.clipboardData.getData("Text");if(gO){i.preventDefault();if(!gN.isReadOnly()&&!gN.options.disableInput){cr(gN,function(){return gH(gN,gO,0,null,"paste")})}return true}}function gE(gP,gS){if(!gP.options.electricChars||!gP.options.smartIndent){return}var gT=gP.doc.sel;for(var gR=gT.ranges.length-1;gR>=0;gR--){var gN=gT.ranges[gR];if(gN.head.ch>100||(gR&&gT.ranges[gR-1].head.line==gN.head.line)){continue}var i=gP.getModeAt(gN.head);var gO=false;if(i.electricChars){for(var gQ=0;gQ<i.electricChars.length;gQ++){if(gS.indexOf(i.electricChars.charAt(gQ))>-1){gO=f(gP,gN.head.line,"smart");break}}}else{if(i.electricInput){if(i.electricInput.test(ff(gP.doc,gN.head.line).text.slice(0,gN.head.ch))){gO=f(gP,gN.head.line,"smart")}}}if(gO){j(gP,"electricInput",gP,gN.head.line)}}}function dv(gO){var gN=[],gQ=[];for(var gR=0;gR<gO.doc.sel.ranges.length;gR++){var gP=gO.doc.sel.ranges[gR].head.line;var i={anchor:cG(gP,0),head:cG(gP+1,0)};gQ.push(i);gN.push(gO.getRange(i.anchor,i.head))}return{text:gN,ranges:gQ}}function fo(i,gN){i.setAttribute("autocorrect","off");i.setAttribute("autocapitalize","off");i.setAttribute("spellcheck",!!gN)}function au(){var gN=gf("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var i=gf("div",[gN],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(aX){gN.style.width="1000px"}else{gN.setAttribute("wrap","off")}if(ga){gN.style.border="1px solid black"}fo(gN);return i}var dN=function(gN){var gO=gN.optionHandlers;var i=gN.helpers={};gN.prototype={constructor:gN,focus:function(){window.focus();this.display.input.focus()},setOption:function(gR,gS){var gQ=this.options,gP=gQ[gR];if(gQ[gR]==gS&&gR!="mode"){return}gQ[gR]=gS;if(gO.hasOwnProperty(gR)){a8(this,gO[gR])(this,gS,gP)}},getOption:function(gP){return this.options[gP]},getDoc:function(){return this.doc},addKeyMap:function(gQ,gP){this.state.keyMaps[gP?"push":"unshift"](gF(gQ))},removeKeyMap:function(gQ){var gR=this.state.keyMaps;for(var gP=0;gP<gR.length;++gP){if(gR[gP]==gQ||gR[gP].name==gQ){gR.splice(gP,1);return true}}},addOverlay:eA(function(gP,gQ){var gR=gP.token?gP:gN.getMode(this.options,gP);if(gR.startState){throw new Error("Overlays may not be stateful.")}cJ(this.state.overlays,{mode:gR,modeSpec:gP,opaque:gQ&&gQ.opaque,priority:(gQ&&gQ.priority)||0},function(gS){return gS.priority});this.state.modeGen++;q(this)}),removeOverlay:eA(function(gP){var gT=this;var gR=this.state.overlays;for(var gQ=0;gQ<gR.length;++gQ){var gS=gR[gQ].modeSpec;if(gS==gP||typeof gP=="string"&&gS.name==gP){gR.splice(gQ,1);gT.state.modeGen++;q(gT);return}}}),indentLine:eA(function(gR,gP,gQ){if(typeof gP!="string"&&typeof gP!="number"){if(gP==null){gP=this.options.smartIndent?"smart":"prev"}else{gP=gP?"add":"subtract"}}if(d6(this.doc,gR)){f(this,gR,gP,gQ)}}),indentSelection:eA(function(gY){var gV=this;var gP=this.doc.sel.ranges,gS=-1;for(var gU=0;gU<gP.length;gU++){var gZ=gP[gU];if(!gZ.empty()){var gW=gZ.from(),gX=gZ.to();var gQ=Math.max(gS,gW.line);gS=Math.min(gV.lastLine(),gX.line-(gX.ch?0:1))+1;for(var gT=gQ;gT<gS;++gT){f(gV,gT,gY)}var gR=gV.doc.sel.ranges;if(gW.ch==0&&gP.length==gR.length&&gR[gU].from().ch>0){d7(gV.doc,gU,new aH(gW,gR[gU].to()),be)}}else{if(gZ.head.line>gS){f(gV,gZ.head.line,gY,true);gS=gZ.head.line;if(gU==gV.doc.sel.primIndex){dj(gV)}}}}}),getTokenAt:function(gQ,gP){return e1(this,gQ,gP)},getLineTokens:function(gQ,gP){return e1(this,cG(gQ),gP,true)},getTokenTypeAt:function(gR){gR=fT(this.doc,gR);var gV=et(this,ff(this.doc,gR.line));var gP=0,gQ=(gV.length-1)/2,gU=gR.ch;var gT;if(gU==0){gT=gV[2]}else{for(;;){var gS=(gP+gQ)>>1;if((gS?gV[gS*2-1]:0)>=gU){gQ=gS}else{if(gV[gS*2+1]<gU){gP=gS+1}else{gT=gV[gS*2+2];break}}}}var gW=gT?gT.indexOf("overlay "):-1;return gW<0?gT:gW==0?null:gT.slice(0,gW-1)},getModeAt:function(gQ){var gP=this.doc.mode;if(!gP.innerMode){return gP}return gN.innerMode(gP,this.getTokenAt(gQ).state).mode},getHelper:function(gQ,gP){return this.getHelpers(gQ,gP)[0]},getHelpers:function(gW,gV){var gT=this;var gY=[];if(!i.hasOwnProperty(gV)){return gY}var gR=i[gV],gU=this.getModeAt(gW);if(typeof gU[gV]=="string"){if(gR[gU[gV]]){gY.push(gR[gU[gV]])}}else{if(gU[gV]){for(var gS=0;gS<gU[gV].length;gS++){var gQ=gR[gU[gV][gS]];if(gQ){gY.push(gQ)}}}else{if(gU.helperType&&gR[gU.helperType]){gY.push(gR[gU.helperType])}else{if(gR[gU.name]){gY.push(gR[gU.name])}}}}for(var gP=0;gP<gR._global.length;gP++){var gX=gR._global[gP];if(gX.pred(gU,gT)&&dE(gY,gX.val)==-1){gY.push(gX.val)}}return gY},getStateAfter:function(gQ,gP){var gR=this.doc;gQ=ek(gR,gQ==null?gR.first+gR.size-1:gQ);return di(this,gQ+1,gP)},cursorCoords:function(gS,gQ){var gR,gP=this.doc.sel.primary();if(gS==null){gR=gP.head}else{if(typeof gS=="object"){gR=fT(this.doc,gS)}else{gR=gS?gP.from():gP.to()}}return cl(this,gR,gQ||"page")},charCoords:function(gQ,gP){return bW(this,fT(this.doc,gQ),gP||"page")},coordsChar:function(gP,gQ){gP=f6(this,gP,gQ||"page");return fr(this,gP.left,gP.top)},lineAtHeight:function(gP,gQ){gP=f6(this,{top:gP,left:0},gQ||"page").top;return w(this.doc,gP+this.display.viewOffset)},heightAtLine:function(gR,gP,gU){var gQ=false,gS;if(typeof gR=="number"){var gT=this.doc.first+this.doc.size-1;if(gR<this.doc.first){gR=this.doc.first}else{if(gR>gT){gR=gT;gQ=true}}gS=ff(this.doc,gR)}else{gS=gR}return eP(this,gS,{top:0,left:0},gP||"page",gU).top+(gQ?this.doc.height-bT(gS):0)},defaultTextHeight:function(){return ax(this.display)},defaultCharWidth:function(){return dq(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gU,gR,gW,gS,gY){var gT=this.display;gU=cl(this,fT(this.doc,gU));var gV=gU.bottom,gQ=gU.left;gR.style.position="absolute";gR.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gR);gT.sizer.appendChild(gR);if(gS=="over"){gV=gU.top}else{if(gS=="above"||gS=="near"){var gP=Math.max(gT.wrapper.clientHeight,this.doc.height),gX=Math.max(gT.sizer.clientWidth,gT.lineSpace.clientWidth);if((gS=="above"||gU.bottom+gR.offsetHeight>gP)&&gU.top>gR.offsetHeight){gV=gU.top-gR.offsetHeight}else{if(gU.bottom+gR.offsetHeight<=gP){gV=gU.bottom}}if(gQ+gR.offsetWidth>gX){gQ=gX-gR.offsetWidth}}}gR.style.top=gV+"px";gR.style.left=gR.style.right="";if(gY=="right"){gQ=gT.sizer.clientWidth-gR.offsetWidth;gR.style.right="0px"}else{if(gY=="left"){gQ=0}else{if(gY=="middle"){gQ=(gT.sizer.clientWidth-gR.offsetWidth)/2}}gR.style.left=gQ+"px"}if(gW){S(this,gQ,gV,gQ+gR.offsetWidth,gV+gR.offsetHeight)}},triggerOnKeyDown:eA(b7),triggerOnKeyPress:eA(L),triggerOnKeyUp:aw,execCommand:function(gP){if(dt.hasOwnProperty(gP)){return dt[gP].call(null,this)}},triggerElectric:eA(function(gP){gE(this,gP)}),findPosH:function(gR,gV,gW,gT){var gQ=this;var gS=1;if(gV<0){gS=-1;gV=-gV}var gP=fT(this.doc,gR);for(var gU=0;gU<gV;++gU){gP=bs(gQ.doc,gP,gS,gW,gT);if(gP.hitSide){break}}return gP},moveH:eA(function(gP,gQ){var gR=this;this.extendSelectionsBy(function(gS){if(gR.display.shift||gR.doc.extend||gS.empty()){return bs(gR.doc,gS.head,gP,gQ,gR.options.rtlMoveVisually)}else{return gP<0?gS.from():gS.to()}},b3)}),deleteH:eA(function(gP,gQ){var gR=this.doc.sel,gS=this.doc;if(gR.somethingSelected()){gS.replaceSelection("",null,"+delete")}else{f3(this,function(gT){var gU=bs(gS,gT.head,gP,gQ,false);return gP<0?{from:gU,to:gT.head}:{from:gT.head,to:gU}})}}),findPosV:function(gV,gS,gW,gY){var gR=this;var gP=1,gU=gY;if(gS<0){gP=-1;gS=-gS}var gX=fT(this.doc,gV);for(var gQ=0;gQ<gS;++gQ){var gT=cl(gR,gX,"div");if(gU==null){gU=gT.left}else{gT.left=gU}gX=cE(gR,gT,gP,gW);if(gX.hitSide){break}}return gX},moveV:eA(function(gR,gT){var gQ=this;var gV=this.doc,gU=[];var gP=!this.display.shift&&!gV.extend&&gV.sel.somethingSelected();gV.extendSelectionsBy(function(gY){if(gP){return gR<0?gY.from():gY.to()}var gX=cl(gQ,gY.head,"div");if(gY.goalColumn!=null){gX.left=gY.goalColumn}gU.push(gX.left);var gW=cE(gQ,gX,gR,gT);if(gT=="page"&&gY==gV.sel.primary()){cj(gQ,null,bW(gQ,gW,"div").top-gX.top)}return gW},b3);if(gU.length){for(var gS=0;gS<gV.sel.ranges.length;gS++){gV.sel.ranges[gS].goalColumn=gU[gS]}}}),findWordAt:function(gR){var gP=this.doc,gV=ff(gP,gR.line).text;var gQ=gR.ch,gU=gR.ch;if(gV){var gW=this.getHelper(gR,"wordChars");if((gR.xRel<0||gU==gV.length)&&gQ){--gQ}else{++gU}var gT=gV.charAt(gQ);var gS=ab(gT,gW)?function(gX){return ab(gX,gW)}:/\s/.test(gT)?function(gX){return/\s/.test(gX)}:function(gX){return(!/\s/.test(gX)&&!ab(gX))};while(gQ>0&&gS(gV.charAt(gQ-1))){--gQ}while(gU<gV.length&&gS(gV.charAt(gU))){++gU}}return new aH(cG(gR.line,gQ),cG(gR.line,gU))},toggleOverwrite:function(gP){if(gP!=null&&gP==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){gn(this.display.cursorDiv,"CodeMirror-overwrite")}else{c2(this.display.cursorDiv,"CodeMirror-overwrite")}aM(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==e3()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:eA(function(gP,gQ){if(gP!=null||gQ!=null){gw(this)}if(gP!=null){this.curOp.scrollLeft=gP}if(gQ!=null){this.curOp.scrollTop=gQ}}),getScrollInfo:function(){var gP=this.display.scroller;return{left:gP.scrollLeft,top:gP.scrollTop,height:gP.scrollHeight-br(this)-this.display.barHeight,width:gP.scrollWidth-br(this)-this.display.barWidth,clientHeight:bR(this),clientWidth:fS(this)}},scrollIntoView:eA(function(gR,gQ){if(gR==null){gR={from:this.doc.sel.primary().head,to:null};if(gQ==null){gQ=this.options.cursorScrollMargin}}else{if(typeof gR=="number"){gR={from:cG(gR,0),to:null}}else{if(gR.from==null){gR={from:gR,to:null}}}}if(!gR.to){gR.to=gR.from}gR.margin=gQ||0;if(gR.from.line!=null){gw(this);this.curOp.scrollToPos=gR}else{var gP=ae(this,Math.min(gR.from.left,gR.to.left),Math.min(gR.from.top,gR.to.top)-gR.margin,Math.max(gR.from.right,gR.to.right),Math.max(gR.from.bottom,gR.to.bottom)+gR.margin);this.scrollTo(gP.scrollLeft,gP.scrollTop)}}),setSize:eA(function(gS,gP){var gT=this;var gR=function(gU){return typeof gU=="number"||/^\d+$/.test(String(gU))?gU+"px":gU};if(gS!=null){this.display.wrapper.style.width=gR(gS)}if(gP!=null){this.display.wrapper.style.height=gR(gP)}if(this.options.lineWrapping){I(this)}var gQ=this.display.viewFrom;this.doc.iter(gQ,this.display.viewTo,function(gU){if(gU.widgets){for(var gV=0;gV<gU.widgets.length;gV++){if(gU.widgets[gV].noHScroll){b1(gT,gQ,"widget");break}}}++gQ});this.curOp.forceUpdate=true;aM(this,"refresh",this)}),operation:function(gP){return cr(this,gP)},refresh:eA(function(){var gP=this.display.cachedTextHeight;q(this);this.curOp.forceUpdate=true;t(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);ed(this);if(gP==null||Math.abs(gP-ax(this.display))>0.5){a3(this)}aM(this,"refresh",this)}),swapDoc:eA(function(gQ){var gP=this.doc;gP.cm=null;d8(this,gQ);t(this);this.display.input.reset();this.scrollTo(gQ.scrollLeft,gQ.scrollTop);this.curOp.forceScroll=true;j(this,"swapDoc",this,gP);return gP}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};aG(gN);gN.registerHelper=function(gQ,gP,gR){if(!i.hasOwnProperty(gQ)){i[gQ]=gN[gQ]={_global:[]}}i[gQ][gP]=gR};gN.registerGlobalHelper=function(gR,gQ,gP,gS){gN.registerHelper(gR,gQ,gS);i[gR]._global.push({pred:gP,val:gS})}};function bs(gN,gS,g0,gZ,gU){var gX=gS.line,gY=gS.ch,i=g0;var gP=ff(gN,gX);function g3(){var g4=gX+g0;if(g4<gN.first||g4>=gN.first+gN.size){return false}gX=g4;return gP=ff(gN,g4)}function g2(g5){var g4=(gU?cF:s)(gP,gY,g0,true);if(g4==null){if(!g5&&g3()){if(gU){gY=(g0<0?bn:ay)(gP)}else{gY=g0<0?gP.text.length:0}}else{return false}}else{gY=g4}return true}if(gZ=="char"){g2()}else{if(gZ=="column"){g2(true)}else{if(gZ=="word"||gZ=="group"){var g1=null,gV=gZ=="group";var gO=gN.cm&&gN.cm.getHelper(gS,"wordChars");for(var gT=true;;gT=false){if(g0<0&&!g2(!gT)){break}var gQ=gP.text.charAt(gY)||"\n";var gR=ab(gQ,gO)?"w":gV&&gQ=="\n"?"n":!gV||/\s/.test(gQ)?null:"p";if(gV&&!gT&&!gR){gR="s"}if(g1&&g1!=gR){if(g0<0){g0=1;g2()}break}if(gR){g1=gR}if(g0>0&&!g2(!gT)){break}}}}}var gW=bp(gN,cG(gX,gY),gS,i,true);if(!ds(gS,gW)){gW.hitSide=true}return gW}function cE(gU,gP,i,gT){var gS=gU.doc,gR=gP.left,gQ;if(gT=="page"){var gO=Math.min(gU.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var gV=Math.max(gO-0.5*ax(gU.display),3);gQ=(i>0?gP.bottom:gP.top)+i*gV}else{if(gT=="line"){gQ=i>0?gP.bottom+3:gP.top-3}}var gN;for(;;){gN=fr(gU,gR,gQ);if(!gN.outside){break}if(i<0?gQ<=0:gQ>=gS.height){gN.hitSide=true;break}gQ+=i*5}return gN}function dT(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new ge();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null}dT.prototype=bd({init:function(gQ){var gN=this;var gP=this,gR=gP.cm;var i=gP.div=gQ.lineDiv;fo(i,gR.options.spellcheck);J(i,"paste",function(gS){if(U(gR,gS)||G(gS,gR)){return}if(du<=11){setTimeout(a8(gR,function(){if(!gP.pollContent()){q(gR)}}),20)}});J(i,"compositionstart",function(gS){gN.composing={data:gS.data}});J(i,"compositionupdate",function(gS){if(!gN.composing){gN.composing={data:gS.data}}});J(i,"compositionend",function(gS){if(gN.composing){if(gS.data!=gN.composing.data){gN.readFromDOMSoon()}gN.composing=null}});J(i,"touchstart",function(){return gP.forceCompositionEnd()});J(i,"input",function(){if(!gN.composing){gN.readFromDOMSoon()}});function gO(gU){if(U(gR,gU)){return}if(gR.somethingSelected()){en({lineWise:false,text:gR.getSelections()});if(gU.type=="cut"){gR.replaceSelection("",null,"cut")}}else{if(!gR.options.lineWiseCopyCut){return}else{var gX=dv(gR);en({lineWise:true,text:gX.text});if(gU.type=="cut"){gR.operation(function(){gR.setSelections(gX.ranges,0,be);gR.replaceSelection("",null,"cut")})}}}if(gU.clipboardData){gU.clipboardData.clearData();var gT=bI.text.join("\n");gU.clipboardData.setData("Text",gT);if(gU.clipboardData.getData("Text")==gT){gU.preventDefault();return}}var gS=au(),gV=gS.firstChild;gR.display.lineSpace.insertBefore(gS,gR.display.lineSpace.firstChild);gV.value=bI.text.join("\n");var gW=document.activeElement;cu(gV);setTimeout(function(){gR.display.lineSpace.removeChild(gS);gW.focus();if(gW==i){gP.showPrimarySelection()}},50)}J(i,"copy",gO);J(i,"cut",gO)},prepareSelection:function(){var i=fI(this.cm,false);i.focus=this.cm.state.focused;return i},showSelection:function(i,gN){if(!i||!this.cm.display.view.length){return}if(i.focus||gN){this.showPrimarySelection()}this.showMultipleSelections(i)},showPrimarySelection:function(){var gO=window.getSelection(),gR=this.cm.doc.sel.primary();var gP=bu(this.cm,gO.anchorNode,gO.anchorOffset);var gT=bu(this.cm,gO.focusNode,gO.focusOffset);if(gP&&!gP.bad&&gT&&!gT.bad&&ds(b6(gP,gT),gR.from())==0&&ds(aB(gP,gT),gR.to())==0){return}var gN=X(this.cm,gR.from());var gS=X(this.cm,gR.to());if(!gN&&!gS){return}var gW=this.cm.display.view;var gQ=gO.rangeCount&&gO.getRangeAt(0);if(!gN){gN={node:gW[0].measure.map[2],offset:0}}else{if(!gS){var i=gW[gW.length-1].measure;var gX=i.maps?i.maps[i.maps.length-1]:i.map;gS={node:gX[gX.length-1],offset:gX[gX.length-2]-gX[gX.length-3]}}}var gU;try{gU=cp(gN.node,gN.offset,gS.offset,gS.node)}catch(gV){}if(gU){if(!cB&&this.cm.state.focused){gO.collapse(gN.node,gN.offset);if(!gU.collapsed){gO.removeAllRanges();gO.addRange(gU)}}else{gO.removeAllRanges();gO.addRange(gU)}if(gQ&&gO.anchorNode==null){gO.addRange(gQ)}else{if(cB){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(i){a5(this.cm.display.cursorDiv,i.cursors);a5(this.cm.display.selectionDiv,i.selection)},rememberSelection:function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset},selectionInEditor:function(){var i=window.getSelection();if(!i.rangeCount){return false}var gN=i.getRangeAt(0).commonAncestorContainer;return fU(this.div,gN)},focus:function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var gN=this;if(this.selectionInEditor()){this.pollSelection()}else{cr(this.cm,function(){return gN.cm.curOp.selectionChanged=true})}function i(){if(gN.cm.state.focused){gN.pollSelection();gN.polling.set(gN.cm.options.pollInterval,i)}}this.polling.set(this.cm.options.pollInterval,i)},selectionChanged:function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var i=window.getSelection(),gN=this.cm;this.rememberSelection();var gO=bu(gN,i.anchorNode,i.anchorOffset);var gP=bu(gN,i.focusNode,i.focusOffset);if(gO&&gP){cr(gN,function(){bk(gN.doc,e8(gO,gP),be);if(gO.bad||gP.bad){gN.curOp.selectionChanged=true}})}}},pollContent:function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var g3=this.cm,gQ=g3.display,gO=g3.doc.sel.primary();var gP=gO.from(),gX=gO.to();if(gP.ch==0&&gP.line>g3.firstLine()){gP=cG(gP.line-1,ff(g3.doc,gP.line-1).length)}if(gX.ch==ff(g3.doc,gX.line).text.length&&gX.line<g3.lastLine()){gX=cG(gX.line+1,0)}if(gP.line<gQ.viewFrom||gX.line>gQ.viewTo-1){return false}var g0,gY,g2;if(gP.line==gQ.viewFrom||(g0=e4(g3,gP.line))==0){gY=bZ(gQ.view[0].line);g2=gQ.view[0].node}else{gY=bZ(gQ.view[g0].line);g2=gQ.view[g0-1].node.nextSibling}var gN=e4(g3,gX.line);var g5,g8;if(gN==gQ.view.length-1){g5=gQ.viewTo-1;g8=gQ.lineDiv.lastChild}else{g5=bZ(gQ.view[gN+1].line)-1;g8=gQ.view[gN+1].node.previousSibling}if(!g2){return false}var gR=g3.doc.splitLines(gI(g3,g2,g8,gY,g5));var g7=gg(g3.doc,cG(gY,0),cG(g5,ff(g3.doc,g5).text.length));while(gR.length>1&&g7.length>1){if(dp(gR)==dp(g7)){gR.pop();g7.pop();g5--}else{if(gR[0]==g7[0]){gR.shift();g7.shift();gY++}else{break}}}var i=0,gV=0;var g4=gR[0],gU=g7[0],gT=Math.min(g4.length,gU.length);while(i<gT&&g4.charCodeAt(i)==gU.charCodeAt(i)){++i}var g1=dp(gR),gS=dp(g7);var gW=Math.min(g1.length-(gR.length==1?i:0),gS.length-(g7.length==1?i:0));while(gV<gW&&g1.charCodeAt(g1.length-gV-1)==gS.charCodeAt(gS.length-gV-1)){++gV}gR[gR.length-1]=g1.slice(0,g1.length-gV).replace(/^\u200b+/,"");gR[0]=gR[0].slice(i).replace(/\u200b+$/,"");var gZ=cG(gY,i);var g6=cG(g5,g7.length?dp(g7).length-gV:0);if(gR.length>1||gR[0]||ds(gZ,g6)){gp(g3.doc,gR,gZ,g6,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing){return}this.composing=null;if(!this.pollContent()){q(this.cm)}this.div.blur();this.div.focus()},readFromDOMSoon:function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){return}if(i.cm.isReadOnly()||!i.pollContent()){cr(i.cm,function(){return q(i.cm)})}},80)},setUneditable:function(i){i.contentEditable="false"},onKeyPress:function(i){i.preventDefault();if(!this.cm.isReadOnly()){a8(this.cm,gH)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}},readOnlyChanged:function(i){this.div.contentEditable=String(i!="nocursor")},onContextMenu:gD,resetPosition:gD,needsContentAttribute:true},dT.prototype);function X(gR,gP){var gQ=e7(gR,gP.line);if(!gQ||gQ.hidden){return null}var gT=ff(gR.doc,gP.line);var i=d0(gQ,gT,gP.line);var gN=by(gT),gO="left";if(gN){var gU=aW(gN,gP.ch);gO=gU%2?"right":"left"}var gS=a6(i.map,gP.ch,gO);gS.offset=gS.collapse=="right"?gS.end:gS.start;return gS}function er(i,gN){if(gN){i.bad=true}return i}function gI(gT,gR,gS,gO,i){var gV="",gN=false,gU=gT.doc.lineSeparator();function gP(gW){return function(gX){return gX.id==gW}}function gQ(g1){if(g1.nodeType==1){var gY=g1.getAttribute("cm-text");if(gY!=null){if(gY==""){gV+=g1.textContent.replace(/\u200b/g,"")}else{gV+=gY}return}var g0=g1.getAttribute("cm-marker"),gX;if(g0){var g2=gT.findMarks(cG(gO,0),cG(i+1,0),gP(+g0));if(g2.length&&(gX=g2[0].find())){gV+=gg(gT.doc,gX.from,gX.to).join(gU)}return}if(g1.getAttribute("contenteditable")=="false"){return}for(var gZ=0;gZ<g1.childNodes.length;gZ++){gQ(g1.childNodes[gZ])}if(/^(pre|div|p)$/i.test(g1.nodeName)){gN=true}}else{if(g1.nodeType==3){var gW=g1.nodeValue;if(!gW){return}if(gN){gV+=gU;gN=false}gV+=gW}}}for(;;){gQ(gR);if(gR==gS){break}gR=gR.nextSibling}return gV}function bu(gO,gR,gN){var i;if(gR==gO.display.lineDiv){i=gO.display.lineDiv.childNodes[gN];if(!i){return er(gO.clipPos(cG(gO.display.viewTo-1)),true)}gR=null;gN=0}else{for(i=gR;;i=i.parentNode){if(!i||i==gO.display.lineDiv){return null}if(i.parentNode&&i.parentNode==gO.display.lineDiv){break}}}for(var gQ=0;gQ<gO.display.view.length;gQ++){var gP=gO.display.view[gQ];if(gP.node==i){return bo(gP,gR,gN)}}}function bo(gU,gQ,gS){var gN=gU.text.firstChild,gP=false;if(!gQ||!fU(gN,gQ)){return er(cG(bZ(gU.line),0),true)}if(gQ==gN){gP=true;gQ=gN.childNodes[gS];gS=0;if(!gQ){var g1=gU.rest?dp(gU.rest):gU.line;return er(cG(bZ(g1),g1.text.length),gP)}}var gR=gQ.nodeType==3?gQ:null,gZ=gQ;if(!gR&&gQ.childNodes.length==1&&gQ.firstChild.nodeType==3){gR=gQ.firstChild;if(gS){gS=gR.nodeValue.length}}while(gZ.parentNode!=gN){gZ=gZ.parentNode}var i=gU.measure,gX=i.maps;function gT(g4,g9,g6){for(var g8=-1;g8<(gX?gX.length:0);g8++){var ha=g8<0?i.map:gX[g8];for(var g7=0;g7<ha.length;g7+=3){var g5=ha[g7+2];if(g5==g4||g5==g9){var g2=bZ(g8<0?gU.line:gU.rest[g8]);var g3=ha[g7]+g6;if(g6<0||g5!=g4){g3=ha[g7+(g6?1:0)]}return cG(g2,g3)}}}}var g0=gT(gR,gZ,gS);if(g0){return er(g0,gP)}for(var gV=gZ.nextSibling,gW=gR?gR.nodeValue.length-gS:0;gV;gV=gV.nextSibling){g0=gT(gV,gV.firstChild,0);if(g0){return er(cG(g0.line,g0.ch-gW),gP)}else{gW+=gV.textContent.length}}for(var gY=gZ.previousSibling,gO=gS;gY;gY=gY.previousSibling){g0=gT(gY,gY.firstChild,-1);if(g0){return er(cG(g0.line,g0.ch+gO),gP)}else{gO+=gY.textContent.length}}}function aV(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new ge();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null}aV.prototype=bd({init:function(gP){var gN=this;var gO=this,gQ=this.cm;var i=this.wrapper=au();var gR=this.textarea=i.firstChild;gP.wrapper.insertBefore(i,gP.wrapper.firstChild);if(ga){gR.style.width="0px"}J(gR,"input",function(){if(cm&&du>=9&&gN.hasSelection){gN.hasSelection=null}gO.poll()});J(gR,"paste",function(gT){if(U(gQ,gT)||G(gT,gQ)){return}gQ.state.pasteIncoming=true;gO.fastPoll()});function gS(gT){if(U(gQ,gT)){return}if(gQ.somethingSelected()){en({lineWise:false,text:gQ.getSelections()});if(gO.inaccurateSelection){gO.prevInput="";gO.inaccurateSelection=false;gR.value=bI.text.join("\n");cu(gR)}}else{if(!gQ.options.lineWiseCopyCut){return}else{var gU=dv(gQ);en({lineWise:true,text:gU.text});if(gT.type=="cut"){gQ.setSelections(gU.ranges,null,be)}else{gO.prevInput="";gR.value=gU.text.join("\n");cu(gR)}}}if(gT.type=="cut"){gQ.state.cutIncoming=true}}J(gR,"cut",gS);J(gR,"copy",gS);J(gP.scroller,"paste",function(gT){if(H(gP,gT)||U(gQ,gT)){return}gQ.state.pasteIncoming=true;gO.focus()});J(gP.lineSpace,"selectstart",function(gT){if(!H(gP,gT)){cT(gT)}});J(gR,"compositionstart",function(){var gT=gQ.getCursor("from");if(gO.composing){gO.composing.range.clear()}gO.composing={start:gT,range:gQ.markText(gT,gQ.getCursor("to"),{className:"CodeMirror-composing"})}});J(gR,"compositionend",function(){if(gO.composing){gO.poll();gO.composing.range.clear();gO.composing=null}})},prepareSelection:function(){var gO=this.cm,i=gO.display,gS=gO.doc;var gQ=fI(gO);if(gO.options.moveInputWithCursor){var gN=cl(gO,gS.sel.primary().head,"div");var gP=i.wrapper.getBoundingClientRect(),gR=i.lineDiv.getBoundingClientRect();gQ.teTop=Math.max(0,Math.min(i.wrapper.clientHeight-10,gN.top+gR.top-gP.top));gQ.teLeft=Math.max(0,Math.min(i.wrapper.clientWidth-10,gN.left+gR.left-gP.left))}return gQ},showSelection:function(i){var gN=this.cm,gO=gN.display;a5(gO.cursorDiv,i.cursors);a5(gO.selectionDiv,i.selection);if(i.teTop!=null){this.wrapper.style.top=i.teTop+"px";this.wrapper.style.left=i.teLeft+"px"}},reset:function(gQ){if(this.contextMenuPending){return}var gO,gP,gR=this.cm,i=gR.doc;if(gR.somethingSelected()){this.prevInput="";var gN=i.sel.primary();gO=cH&&(gN.to().line-gN.from().line>100||(gP=gR.getSelection()).length>1000);var gS=gO?"-":gP||gR.getSelection();this.textarea.value=gS;if(gR.state.focused){cu(this.textarea)}if(cm&&du>=9){this.hasSelection=gS}}else{if(!gQ){this.prevInput=this.textarea.value="";if(cm&&du>=9){this.hasSelection=null}}}this.inaccurateSelection=gO},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!eu||e3()!=this.textarea)){try{this.textarea.focus()}catch(i){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})},fastPoll:function(){var gO=false,gN=this;gN.pollingFast=true;function i(){var gP=gN.poll();if(!gP&&!gO){gO=true;gN.polling.set(60,i)}else{gN.pollingFast=false;gN.slowPoll()}}gN.polling.set(20,i)},poll:function(){var gN=this;var gQ=this.cm,gP=this.textarea,gR=this.prevInput;if(this.contextMenuPending||!gQ.state.focused||(aP(gP)&&!gR&&!this.composing)||gQ.isReadOnly()||gQ.options.disableInput||gQ.state.keySeq){return false}var gT=gP.value;if(gT==gR&&!gQ.somethingSelected()){return false}if(cm&&du>=9&&this.hasSelection===gT||dP&&/[\uf700-\uf7ff]/.test(gT)){gQ.display.input.reset();return false}if(gQ.doc.sel==gQ.display.selForContextMenu){var gS=gT.charCodeAt(0);if(gS==8203&&!gR){gR="\u200b"}if(gS==8666){this.reset();return this.cm.execCommand("undo")}}var i=0,gO=Math.min(gR.length,gT.length);while(i<gO&&gR.charCodeAt(i)==gT.charCodeAt(i)){++i}cr(gQ,function(){gH(gQ,gT.slice(i),gR.length-i,null,gN.composing?"*compose":null);if(gT.length>1000||gT.indexOf("\n")>-1){gP.value=gN.prevInput=""}else{gN.prevInput=gT}if(gN.composing){gN.composing.range.clear();gN.composing.range=gQ.markText(gN.composing.start,gQ.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(cm&&du>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gQ){var gW=this,gX=gW.cm,gS=gX.display,i=gW.textarea;var gV=ct(gX,gQ),gU=gS.scroller.scrollTop;if(!gV||fj){return}var gP=gX.options.resetSelectionOnContextMenu;if(gP&&gX.doc.sel.contains(gV)==-1){a8(gX,bk)(gX.doc,e8(gV),be)}var gR=i.style.cssText,g0=gW.wrapper.style.cssText;gW.wrapper.style.cssText="position: absolute";var gZ=gW.wrapper.getBoundingClientRect();i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(gQ.clientY-gZ.top-5)+"px; left: "+(gQ.clientX-gZ.left-5)+"px;\n      z-index: 1000; background: "+(cm?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var gY;if(aX){gY=window.scrollY}gS.input.focus();if(aX){window.scrollTo(null,gY)}gS.input.reset();if(!gX.somethingSelected()){i.value=gW.prevInput=" "}gW.contextMenuPending=true;gS.selForContextMenu=gX.doc.sel;clearTimeout(gS.detectingSelectAll);function gO(){if(i.selectionStart!=null){var g1=gX.somethingSelected();var g2="\u200b"+(g1?i.value:"");i.value="\u21da";i.value=g2;gW.prevInput=g1?"":"\u200b";i.selectionStart=1;i.selectionEnd=g2.length;gS.selForContextMenu=gX.doc.sel}}function gT(){gW.contextMenuPending=false;gW.wrapper.style.cssText=g0;i.style.cssText=gR;if(cm&&du<9){gS.scrollbars.setScrollTop(gS.scroller.scrollTop=gU)}if(i.selectionStart!=null){if(!cm||(cm&&du<9)){gO()}var g1=0,g2=function(){if(gS.selForContextMenu==gX.doc.sel&&i.selectionStart==0&&i.selectionEnd>0&&gW.prevInput=="\u200b"){a8(gX,y)(gX)}else{if(g1++<10){gS.detectingSelectAll=setTimeout(g2,500)}else{gS.input.reset()}}};gS.detectingSelectAll=setTimeout(g2,200)}}if(cm&&du>=9){gO()}if(fQ){em(gQ);var gN=function(){ep(window,"mouseup",gN);setTimeout(gT,20)};J(window,"mouseup",gN)}else{setTimeout(gT,50)}},readOnlyChanged:function(i){if(!i){this.reset()}},setUneditable:gD,needsContentAttribute:false},aV.prototype);function dx(gS,gT){gT=gT?bd(gT):{};gT.value=gS.value;if(!gT.tabindex&&gS.tabIndex){gT.tabindex=gS.tabIndex}if(!gT.placeholder&&gS.placeholder){gT.placeholder=gS.placeholder}if(gT.autofocus==null){var gU=e3();gT.autofocus=gU==gS||gS.getAttribute("autofocus")!=null&&gU==document.body}function gP(){gS.value=gR.getValue()}var gQ;if(gS.form){J(gS.form,"submit",gP);if(!gT.leaveSubmitMethodAlone){var i=gS.form;gQ=i.submit;try{var gO=i.submit=function(){gP();i.submit=gQ;i.submit();i.submit=gO}}catch(gN){}}}gT.finishInit=function(gV){gV.save=gP;gV.getTextArea=function(){return gS};gV.toTextArea=function(){gV.toTextArea=isNaN;gP();gS.parentNode.removeChild(gV.getWrapperElement());gS.style.display="";if(gS.form){ep(gS.form,"submit",gP);if(typeof gS.form.submit=="function"){gS.form.submit=gQ}}}};gS.style.display="none";var gR=eI(function(gV){return gS.parentNode.insertBefore(gV,gS.nextSibling)},gT);return gR}function eG(i){i.off=ep;i.on=J;i.wheelEventPixels=bx;i.Doc=aY;i.splitLines=fw;i.countColumn=aT;i.findColumn=ei;i.isWordChar=gA;i.Pass=cX;i.signal=aM;i.Line=gk;i.changeEnd=ca;i.scrollbarModel=bN;i.Pos=cG;i.cmpPos=ds;i.modes=bw;i.mimeModes=Z;i.resolveMode=fY;i.getMode=gj;i.modeExtensions=eS;i.extendMode=dB;i.copyState=am;i.startState=Y;i.innerMode=fH;i.commands=dt;i.keyMap=e2;i.keyName=dO;i.isModifierKey=dg;i.lookupKey=dh;i.normalizeKeyMap=c8;i.StringStream=fO;i.SharedTextMarker=dK;i.TextMarker=bS;i.LineWidget=df;i.e_preventDefault=cT;i.e_stopPropagation=eW;i.e_stop=em;i.addClass=gn;i.contains=fU;i.rmClass=c2;i.keyNames=e5}fZ(eI);dN(eI);var d1="iter insert remove copy getEditor constructor".split(" ");for(var C in aY.prototype){if(aY.prototype.hasOwnProperty(C)&&dE(d1,C)<0){eI.prototype[C]=(function(i){return function(){return i.apply(this.doc,arguments)}})(aY.prototype[C])}}aG(aY);eI.inputStyles={textarea:aV,contenteditable:dT};eI.defineMode=function(i){if(!eI.defaults.mode&&i!="null"){eI.defaults.mode=i}ex.apply(this,arguments)};eI.defineMIME=b0;eI.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});eI.defineMIME("text/plain","null");eI.defineExtension=function(gN,i){eI.prototype[gN]=i};eI.defineDocExtension=function(gN,i){aY.prototype[gN]=i};eI.fromTextArea=dx;eG(eI);eI.version="5.21.0";return eI})));