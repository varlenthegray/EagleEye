if(window.rcmail){rcmail.addEventListener("init",function(){hide_blockquote()})}function hide_blockquote(){var a=rcmail.env.blockquote_limit;if(a<=0){return}$("div.message-part div.pre > blockquote",$("#messagebody")).each(function(){var f,c,d=$(this),e=$.trim(d.text()),b=e.split(/\n/);if(b.length<=a){if(d.height()<=a*15){return}}f=$('<blockquote class="blockquote-header">').css({"white-space":"nowrap",overflow:"hidden",position:"relative"}).text(b[0]);c=$('<span class="blockquote-link"></span>').css({position:"absolute","z-Index":2}).text(rcmail.get_label("hide_blockquote.show")).data("parent",f).click(function(){var g=$(this),h=g.data("parent"),i=h.is(":visible");g.text(rcmail.get_label(i?"hide":"show","hide_blockquote")).detach().appendTo(i?d:h);h[i?"hide":"show"]();d[i?"show":"hide"]()});c.appendTo(f);d.hide().css({position:"relative"}).before(f)})};