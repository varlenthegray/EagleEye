if(window.rcmail){rcmail.addEventListener("init",function(){hide_blockquote()})}function hide_blockquote(){var b=rcmail.env.blockquote_limit;if(b<=0){return}$("div.message-part div.pre > blockquote",$("#messagebody")).each(function(){var g,j,i=$(this),h=$.trim(i.text()),a=h.split(/\n/);if(a.length<=b){if(i.height()<=b*15){return}}g=$('<blockquote class="blockquote-header">').css({"white-space":"nowrap",overflow:"hidden",position:"relative"}).text(a[0]);j=$('<span class="blockquote-link"></span>').css({position:"absolute","z-Index":2}).text(rcmail.get_label("hide_blockquote.show")).data("parent",g).click(function(){var e=$(this),d=e.data("parent"),c=d.is(":visible");e.text(rcmail.get_label(c?"hide":"show","hide_blockquote")).detach().appendTo(c?i:d);d[c?"hide":"show"]();i[c?"show":"hide"]()});j.appendTo(g);i.hide().css({position:"relative"}).before(g)})};