window.rcmail&&rcmail.addEventListener("init",function(){hide_blockquote()});function hide_blockquote(){var a=rcmail.env.blockquote_limit;0>=a||$("div.message-part div.pre > blockquote",$("#messagebody")).each(function(){var d=$(this);var b=$.trim(d.text()).split(/\n/);b.length<=a&&d.height()<=15*a||(b=$('<blockquote class="blockquote-header">').css({"white-space":"nowrap",overflow:"hidden",position:"relative"}).text(b[0]),$('<span class="blockquote-link"></span>').css({position:"absolute","z-Index":2}).text(rcmail.get_label("hide_blockquote.show")).data("parent",b).click(function(){var e=$(this),c=e.data("parent"),f=c.is(":visible");e.text(rcmail.get_label(f?"hide":"show","hide_blockquote")).detach().appendTo(f?d:c);c[f?"hide":"show"]();d[f?"show":"hide"]()}).appendTo(b),d.hide().css({position:"relative"}).before(b))})};