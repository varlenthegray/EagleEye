!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(function(Z){function i(B,q){var F=Z('<div class="minicolors" />'),j=Z.minicolors.defaults,z,E,G,A,D;if(!B.data("minicolors-initialized")){if(q=Z.extend(!0,{},j,q),F.addClass("minicolors-theme-"+q.theme).toggleClass("minicolors-with-opacity",q.opacity).toggleClass("minicolors-no-data-uris",q.dataUris!==!0),void 0!==q.position&&Z.each(q.position.split(" "),function(){F.addClass("minicolors-position-"+this)}),z="rgb"===q.format?q.opacity?"25":"20":q.keywords?"11":"7",B.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",q).prop("size",z).wrap(F).after('<div class="minicolors-panel minicolors-slider-'+q.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),q.inline||(B.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),B.next(".minicolors-input-swatch").on("click",function(H){H.preventDefault(),B.focus()})),A=B.parent().find(".minicolors-panel"),A.on("selectstart",function(){return !1}).end(),q.swatches&&0!==q.swatches.length){for(q.swatches.length>7&&(q.swatches.length=7),A.addClass("minicolors-with-swatches"),E=Z('<ul class="minicolors-swatches"></ul>').appendTo(A),D=0;D<q.swatches.length;++D){G=q.swatches[D],G=f(G)?w(G,!0):M(r(G,!0)),Z('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(E).data("swatch-color",q.swatches[D]).find(".minicolors-swatch-color").css({backgroundColor:o(G),opacity:G.a}),q.swatches[D]=G}}q.inline&&B.parent().addClass("minicolors-inline"),e(B,!1),B.data("minicolors-initialized",!0)}}function v(j){var q=j.parent();j.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),q.before(j).remove()}function p(z){var A=z.parent(),q=A.find(".minicolors-panel"),j=z.data("minicolors-settings");!z.data("minicolors-initialized")||z.prop("disabled")||A.hasClass("minicolors-inline")||A.hasClass("minicolors-focus")||(u(),A.addClass("minicolors-focus"),q.stop(!0,!0).fadeIn(j.showSpeed,function(){j.show&&j.show.call(z.get(0))}))}function u(){Z(".minicolors-focus").each(function(){var j=Z(this),q=j.find(".minicolors-input"),z=j.find(".minicolors-panel"),A=q.data("minicolors-settings");z.fadeOut(A.hideSpeed,function(){A.hide&&A.hide.call(q.get(0)),j.removeClass("minicolors-focus")})})}function a(I,L,B){var K=I.parents(".minicolors").find(".minicolors-input"),j=K.data("minicolors-settings"),G=I.find("[class$=-picker]"),q=I.offset().left,z=I.offset().top,J=Math.round(L.pageX-q),H=Math.round(L.pageY-z),E=B?j.animationSpeed:0,D,N,F,A;L.originalEvent.changedTouches&&(J=L.originalEvent.changedTouches[0].pageX-q,H=L.originalEvent.changedTouches[0].pageY-z),0>J&&(J=0),0>H&&(H=0),J>I.width()&&(J=I.width()),H>I.height()&&(H=I.height()),I.parent().is(".minicolors-slider-wheel")&&G.parent().is(".minicolors-grid")&&(D=75-J,N=75-H,F=Math.sqrt(D*D+N*N),A=Math.atan2(N,D),0>A&&(A+=2*Math.PI),F>75&&(F=75,J=75-75*Math.cos(A),H=75-75*Math.sin(A)),J=Math.round(J),H=Math.round(H)),I.is(".minicolors-grid")?G.stop(!0).animate({top:H+"px",left:J+"px"},E,j.animationEasing,function(){n(K,I)}):G.stop(!0).animate({top:H+"px"},E,j.animationEasing,function(){n(K,I)})}function n(J,R){function O(X,Y){var aa,ab;return X.length&&Y?(aa=X.offset().left,ab=X.offset().top,{x:aa-Y.offset().left+X.outerWidth()/2,y:ab-Y.offset().top+X.outerHeight()/2}):null}var Q,q,N,E,L,I,D,P=J.val(),T=J.attr("data-opacity"),H=J.parent(),F=J.data("minicolors-settings"),U=H.find(".minicolors-input-swatch"),B=H.find(".minicolors-grid"),V=H.find(".minicolors-slider"),A=H.find(".minicolors-opacity-slider"),K=B.find("[class$=-picker]"),G=V.find("[class$=-picker]"),W=A.find("[class$=-picker]"),j=O(K,B),S=O(G,V),z=O(W,A);if(R.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(F.control){case"wheel":E=B.width()/2-j.x,L=B.height()/2-j.y,I=Math.sqrt(E*E+L*L),D=Math.atan2(L,E),0>D&&(D+=2*Math.PI),I>75&&(I=75,j.x=69-75*Math.cos(D),j.y=69-75*Math.sin(D)),q=m(I/0.75,0,100),Q=m(180*D/Math.PI,0,360),N=m(100-Math.floor(S.y*(100/V.height())),0,100),P=t({h:Q,s:q,b:N}),V.css("backgroundColor",t({h:Q,s:q,b:100}));break;case"saturation":Q=m(parseInt(j.x*(360/B.width()),10),0,360),q=m(100-Math.floor(S.y*(100/V.height())),0,100),N=m(100-Math.floor(j.y*(100/B.height())),0,100),P=t({h:Q,s:q,b:N}),V.css("backgroundColor",t({h:Q,s:100,b:N})),H.find(".minicolors-grid-inner").css("opacity",q/100);break;case"brightness":Q=m(parseInt(j.x*(360/B.width()),10),0,360),q=m(100-Math.floor(j.y*(100/B.height())),0,100),N=m(100-Math.floor(S.y*(100/V.height())),0,100),P=t({h:Q,s:q,b:N}),V.css("backgroundColor",t({h:Q,s:q,b:100})),H.find(".minicolors-grid-inner").css("opacity",1-N/100);break;default:Q=m(360-parseInt(S.y*(360/V.height()),10),0,360),q=m(Math.floor(j.x*(100/B.width())),0,100),N=m(100-Math.floor(j.y*(100/B.height())),0,100),P=t({h:Q,s:q,b:N}),B.css("backgroundColor",t({h:Q,s:100,b:100}))}T=F.opacity?parseFloat(1-z.y/A.height()).toFixed(2):1,s(J,P,T)}else{U.find("span").css({backgroundColor:P,opacity:T}),c(J,P,T)}}function s(D,E,z){var B,j=D.parent(),q=D.data("minicolors-settings"),A=j.find(".minicolors-input-swatch");q.opacity&&D.attr("data-opacity",z),"rgb"===q.format?(B=f(E)?w(E,!0):M(r(E,!0)),z=""===D.attr("data-opacity")?1:m(parseFloat(D.attr("data-opacity")).toFixed(2),0,1),(isNaN(z)||!q.opacity)&&(z=1),E=D.minicolors("rgbObject").a<=1&&B&&q.opacity?"rgba("+B.r+", "+B.g+", "+B.b+", "+parseFloat(z)+")":"rgb("+B.r+", "+B.g+", "+B.b+")"):(f(E)&&(E=C(E)),E=d(E,q.letterCase)),D.val(E),A.find("span").css({backgroundColor:E,opacity:z}),c(D,E,z)}function e(N,z){var T,B,G,S,j,J,R,L,H,F,K=N.parent(),D=N.data("minicolors-settings"),E=K.find(".minicolors-input-swatch"),O=K.find(".minicolors-grid"),I=K.find(".minicolors-slider"),A=K.find(".minicolors-opacity-slider"),q=O.find("[class$=-picker]"),Q=I.find("[class$=-picker]"),P=A.find("[class$=-picker]");switch(f(N.val())?(T=C(N.val()),j=m(parseFloat(x(N.val())).toFixed(2),0,1),j&&N.attr("data-opacity",j)):T=d(r(N.val(),!0),D.letterCase),T||(T=d(g(D.defaultValue,!0),D.letterCase)),B=k(T),S=D.keywords?Z.map(D.keywords.split(","),function(U){return Z.trim(U.toLowerCase())}):[],J=""!==N.val()&&Z.inArray(N.val().toLowerCase(),S)>-1?d(N.val()):f(N.val())?w(N.val()):T,z||N.val(J),D.opacity&&(G=""===N.attr("data-opacity")?1:m(parseFloat(N.attr("data-opacity")).toFixed(2),0,1),isNaN(G)&&(G=1),N.attr("data-opacity",G),E.find("span").css("opacity",G),L=m(A.height()-A.height()*G,0,A.height()),P.css("top",L+"px")),"transparent"===N.val().toLowerCase()&&E.find("span").css("opacity",0),E.find("span").css("backgroundColor",T),D.control){case"wheel":H=m(Math.ceil(0.75*B.s),0,O.height()/2),F=B.h*Math.PI/180,R=m(75-Math.cos(F)*H,0,O.width()),L=m(75-Math.sin(F)*H,0,O.height()),q.css({top:L+"px",left:R+"px"}),L=150-B.b/(100/O.height()),""===T&&(L=0),Q.css("top",L+"px"),I.css("backgroundColor",t({h:B.h,s:B.s,b:100}));break;case"saturation":R=m(5*B.h/12,0,150),L=m(O.height()-Math.ceil(B.b/(100/O.height())),0,O.height()),q.css({top:L+"px",left:R+"px"}),L=m(I.height()-B.s*(I.height()/100),0,I.height()),Q.css("top",L+"px"),I.css("backgroundColor",t({h:B.h,s:100,b:B.b})),K.find(".minicolors-grid-inner").css("opacity",B.s/100);break;case"brightness":R=m(5*B.h/12,0,150),L=m(O.height()-Math.ceil(B.s/(100/O.height())),0,O.height()),q.css({top:L+"px",left:R+"px"}),L=m(I.height()-B.b*(I.height()/100),0,I.height()),Q.css("top",L+"px"),I.css("backgroundColor",t({h:B.h,s:B.s,b:100})),K.find(".minicolors-grid-inner").css("opacity",1-B.b/100);break;default:R=m(Math.ceil(B.s/(100/O.width())),0,O.width()),L=m(O.height()-Math.ceil(B.b/(100/O.height())),0,O.height()),q.css({top:L+"px",left:R+"px"}),L=m(I.height()-B.h/(360/I.height()),0,I.height()),Q.css("top",L+"px"),O.css("backgroundColor",t({h:B.h,s:100,b:100}))}N.data("minicolors-initialized")&&c(N,J,G)}function c(E,F,z){var D=E.data("minicolors-settings"),j=E.data("minicolors-lastChange"),q,B,A;if(!j||j.value!==F||j.opacity!==z){if(E.data("minicolors-lastChange",{value:F,opacity:z}),D.swatches&&0!==D.swatches.length){for(q=f(F)?w(F,!0):M(F),B=-1,A=0;A<D.swatches.length;++A){if(q.r===D.swatches[A].r&&q.g===D.swatches[A].g&&q.b===D.swatches[A].b&&q.a===D.swatches[A].a){B=A;break}}E.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==A&&E.parent().find(".minicolors-swatches .minicolors-swatch").eq(A).addClass("selected")}D.change&&(D.changeDelay?(clearTimeout(E.data("minicolors-changeTimeout")),E.data("minicolors-changeTimeout",setTimeout(function(){D.change.call(E.get(0),F,z)},D.changeDelay))):D.change.call(E.get(0),F,z)),E.trigger("change").trigger("input")}}function l(j){var q=r(Z(j).val(),!0),z=M(q),A=Z(j).attr("data-opacity");return z?(void 0!==A&&Z.extend(z,{a:parseFloat(A)}),z):null}function h(A,B){var q=r(Z(A).val(),!0),z=M(q),j=Z(A).attr("data-opacity");return z?(void 0===j&&(j=1),B?"rgba("+z.r+", "+z.g+", "+z.b+", "+parseFloat(j)+")":"rgb("+z.r+", "+z.g+", "+z.b+")"):null}function d(j,q){return"uppercase"===q?j.toUpperCase():j.toLowerCase()}function r(j,q){return j=j.replace(/^#/g,""),j.match(/^[A-F0-9]{3,6}/gi)?3!==j.length&&6!==j.length?"":(3===j.length&&q&&(j=j[0]+j[0]+j[1]+j[1]+j[2]+j[2]),"#"+j):""}function w(j,q){var z=j.replace(/[^\d,.]/g,""),A=z.split(",");return A[0]=m(parseInt(A[0],10),0,255),A[1]=m(parseInt(A[1],10),0,255),A[2]=m(parseInt(A[2],10),0,255),A[3]&&(A[3]=m(parseFloat(A[3],10),0,1)),q?{r:A[0],g:A[1],b:A[2],a:A[3]?A[3]:null}:"undefined"!=typeof A[3]&&A[3]<=1?"rgba("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+")":"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}function g(j,q){return f(j)?w(j):r(j,q)}function m(j,q,z){return q>j&&(j=q),j>z&&(j=z),j}function f(j){var q=j.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return q&&4===q.length?!0:!1}function x(j){return j=j.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),j&&6===j.length?j[4]:"1"}function b(E){var F={},z=Math.round(E.h),D=Math.round(255*E.s/100),j=Math.round(255*E.b/100);if(0===D){F.r=F.g=F.b=j}else{var q=j,B=(255-D)*j/255,A=(q-B)*(z%60)/60;360===z&&(z=0),60>z?(F.r=q,F.b=B,F.g=B+A):120>z?(F.g=q,F.b=B,F.r=q-A):180>z?(F.g=q,F.r=B,F.b=B+A):240>z?(F.b=q,F.r=B,F.g=q-A):300>z?(F.b=q,F.g=B,F.r=B+A):360>z?(F.r=q,F.g=B,F.b=q-A):(F.r=0,F.g=0,F.b=0)}return{r:Math.round(F.r),g:Math.round(F.g),b:Math.round(F.b)}}function C(j){return j=j.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),j&&4===j.length?"#"+("0"+parseInt(j[1],10).toString(16)).slice(-2)+("0"+parseInt(j[2],10).toString(16)).slice(-2)+("0"+parseInt(j[3],10).toString(16)).slice(-2):""}function o(j){var q=[j.r.toString(16),j.g.toString(16),j.b.toString(16)];return Z.each(q,function(A,z){1===z.length&&(q[A]="0"+z)}),"#"+q.join("")}function t(j){return o(b(j))}function k(j){var q=y(M(j));return 0===q.s&&(q.h=360),q}function y(A){var B={h:0,s:0,b:0},q=Math.min(A.r,A.g,A.b),z=Math.max(A.r,A.g,A.b),j=z-q;return B.b=z,B.s=0!==z?255*j/z:0,0!==B.s?A.r===z?B.h=(A.g-A.b)/j:A.g===z?B.h=2+(A.b-A.r)/j:B.h=4+(A.r-A.g)/j:B.h=-1,B.h*=60,B.h<0&&(B.h+=360),B.s*=100/255,B.b*=100/255,B}function M(j){return j=parseInt(j.indexOf("#")>-1?j.substring(1):j,16),{r:j>>16,g:(65280&j)>>8,b:255&j}}Z.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},Z.extend(Z.fn,{minicolors:function(j,q){switch(j){case"destroy":return Z(this).each(function(){v(Z(this))}),Z(this);case"hide":return u(),Z(this);case"opacity":return void 0===q?Z(this).attr("data-opacity"):(Z(this).each(function(){e(Z(this).attr("data-opacity",q))}),Z(this));case"rgbObject":return l(Z(this),"rgbaObject"===j);case"rgbString":case"rgbaString":return h(Z(this),"rgbaString"===j);case"settings":return void 0===q?Z(this).data("minicolors-settings"):(Z(this).each(function(){var z=Z(this).data("minicolors-settings")||{};v(Z(this)),Z(this).minicolors(Z.extend(!0,z,q))}),Z(this));case"show":return p(Z(this).eq(0)),Z(this);case"value":return void 0===q?Z(this).val():(Z(this).each(function(){"object"==typeof q?(q.opacity&&Z(this).attr("data-opacity",m(q.opacity,0,1)),q.color&&Z(this).val(q.color)):Z(this).val(q),e(Z(this))}),Z(this));default:return"create"!==j&&(q=j),Z(this).each(function(){i(Z(this),q)}),Z(this)}}}),Z(document).on("mousedown.minicolors touchstart.minicolors",function(j){Z(j.target).parents().add(j.target).hasClass("minicolors")||u()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(j){var q=Z(this);j.preventDefault(),Z(document).data("minicolors-target",q),a(q,j,!0)}).on("mousemove.minicolors touchmove.minicolors",function(j){var q=Z(document).data("minicolors-target");q&&a(q,j)}).on("mouseup.minicolors touchend.minicolors",function(){Z(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(j){j.preventDefault();var q=Z(this),z=q.parents(".minicolors").find(".minicolors-input"),A=q.data("swatch-color");s(z,A,x(A)),e(z)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(j){var q=Z(this).parent().find(".minicolors-input");j.preventDefault(),p(q)}).on("focus.minicolors",".minicolors-input",function(){var j=Z(this);j.data("minicolors-initialized")&&p(j)}).on("blur.minicolors",".minicolors-input",function(){var D=Z(this),E=D.data("minicolors-settings"),z,B,j,q,A;D.data("minicolors-initialized")&&(z=E.keywords?Z.map(E.keywords.split(","),function(F){return Z.trim(F.toLowerCase())}):[],""!==D.val()&&Z.inArray(D.val().toLowerCase(),z)>-1?A=D.val():(f(D.val())?j=w(D.val(),!0):(B=r(D.val(),!0),j=B?M(B):null),A=null===j?E.defaultValue:"rgb"===E.format?w(E.opacity?"rgba("+j.r+","+j.g+","+j.b+","+D.attr("data-opacity")+")":"rgb("+j.r+","+j.g+","+j.b+")"):o(j)),q=E.opacity?D.attr("data-opacity"):1,"transparent"===A.toLowerCase()&&(q=0),D.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",q),D.val(A),""===D.val()&&D.val(g(E.defaultValue,!0)),D.val(d(D.val(),E.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(j){var q=Z(this);if(q.data("minicolors-initialized")){switch(j.keyCode){case 9:u();break;case 13:case 27:u(),q.blur()}}}).on("keyup.minicolors",".minicolors-input",function(){var j=Z(this);j.data("minicolors-initialized")&&e(j,!0)}).on("paste.minicolors",".minicolors-input",function(){var j=Z(this);j.data("minicolors-initialized")&&setTimeout(function(){e(j,!0)},1)})});