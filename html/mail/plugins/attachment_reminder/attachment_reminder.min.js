function rcmail_get_compose_message(){var a;if(window.tinyMCE&&(ed=tinyMCE.get(rcmail.env.composebody))){a=ed.getContent();a=a.replace(/<blockquote[^>]*>(.|[\r\n])*<\/blockquote>/gmi,"")}else{a=$("#"+rcmail.env.composebody).val();a=a.replace(/^>.*$/gmi,"")}return a}function rcmail_check_message(d){var b,c,a=rcmail.get_label("keywords","attachment_reminder").split(",").concat([".doc",".pdf"]);a=$.map(a,function(e){return RegExp.escape(e)});c=new RegExp("("+a.join("|")+")","i");return d.search(c)!=-1}function rcmail_have_attachments(){return rcmail.env.attachments&&$("li",rcmail.gui_objects.attachmentlist).length}function rcmail_attachment_reminder_dialog(){var a={};a[rcmail.get_label("addattachment")]=function(){$(this).remove();if(window.UI&&UI.show_uploadform){UI.show_uploadform()}else{if(window.rcmail_ui&&rcmail_ui.show_popup){rcmail_ui.show_popup("uploadmenu",true)}}};a[rcmail.get_label("send")]=function(b){$(this).remove();rcmail.env.attachment_reminder=true;rcmail.command("send","",b)};rcmail.env.attachment_reminder=false;rcmail.show_popup_dialog(rcmail.get_label("attachment_reminder.forgotattachment"),"",a)}if(window.rcmail){rcmail.addEventListener("beforesend",function(a){var c=rcmail_get_compose_message(),b=$("#compose-subject").val();if(!rcmail.env.attachment_reminder&&!rcmail_have_attachments()&&(rcmail_check_message(c)||rcmail_check_message(b))){rcmail_attachment_reminder_dialog();return false}})};