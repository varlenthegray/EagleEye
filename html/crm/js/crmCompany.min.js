var crmCompany={editor:null,init:function(){$("#shipping_different").change(function(){if($(this).is(":checked")){$(".shipping_empty_hide").show()}else{$(".shipping_empty_hide").hide()}});$("#billing_different").change(function(){if($(this).is(":checked")){$(".billing_empty_hide").show()}else{$(".billing_empty_hide").hide()}});$("#show_payment_info").change(function(){if($(this).is(":checked")){$(".payment_info").show()}else{$(".payment_info").hide()}});$(".save_company").click(function(){let formInfo=$("#company_information").serialize();$.post("/html/crm/ajax/company.php?action=saveCompany",{formInfo:formInfo},function(a){$("body").append(a)})})},getCompany:function(){$.post("/html/crm/templates/crm_view.php",function(a){crmMain.body.html(a)})},getCompanyList:function(){$.post("/html/crm/templates/view_company_list.php",function(a){crmMain.body.html(a)}).done(function(){$(".crmCompanies").DataTable({ajax:"/html/crm/ajax/company.php?action=getCompanyList",columns:[{data:"name"},{data:"phone_number"},{data:"annual_revenue"},{data:"industry"},{data:"last_contact"},{data:"created"}],pageLength:25,createdRow:function(b,a){$(b).addClass("cursor-hand get-company").attr("data-id",a.id)}})})},startListening:function(){$("body").on("click",".get-company",function(){crmCompany.getCompany($(this).attr("data-id"))}).on("click",".crm_view_company_list",function(){crmCompany.getCompanyList()})},initEditor:function(){crmCompany.editor=new dhtmlXEditor({parent:"new_note",toolbar:true,iconsPath:"/assets/plugins/dhtmlXEditor/imgs/",content:""})},reInitEditor:function(){if(crmCompany.editor!==undefined&&crmCompany.editor!==null){let curContent=crmCompany.editor.getContent();crmCompany.editor.unload();crmCompany.editor=new dhtmlXEditor({parent:"new_note",toolbar:true,iconsPath:"/assets/plugins/dhtmlXEditor/imgs/",content:curContent})}},checkEmpty:function(b,c,a){let isEmpty=true;$.each($("input[name^='"+b+"']"),function(d,e){if($(e).val()!==""){isEmpty=false}});if(isEmpty){$(c).prop("checked",false);$(a).hide()}else{$(c).prop("checked",true);$(a).show()}}};