(function(a){a.fn.twittie=function(){var d=arguments[0] instanceof Object?arguments[0]:{},h=typeof arguments[0]==="function"?arguments[0]:arguments[1];var f=a.extend({username:null,list:null,hashtag:null,count:10,hideReplies:false,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php",loadingText:"Loading..."},d);if(f.list&&!f.username){a.error("If you want to fetch tweets from a list, you must define the username of the list owner.")}var c=function(j){var i=j.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/ig,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/search?q=%23$1&src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>');return i};var e=function(q){var m=q.split(" ");q=new Date(Date.parse(m[1]+" "+m[2]+", "+m[5]+" "+m[3]+" UTC"));var v=["January","February","March","April","May","June","July","August","September","October","November","December"];var l={"%d":q.getDate(),"%m":q.getMonth()+1,"%b":v[q.getMonth()].substr(0,3),"%B":v[q.getMonth()],"%y":String(q.getFullYear()).slice(-2),"%Y":q.getFullYear()};var p=f.dateFormat;var r=f.dateFormat.match(/%[dmbByY]/g);for(var k=0,j=r.length;k<j;k++){p=p.replace(r[k],l[r[k]])}return p};var g=function(m){var k=f.template;var o=["date","tweet","avatar","url","retweeted","screen_name","user_name"];for(var j=0,l=o.length;j<l;j++){k=k.replace(new RegExp("{{"+o[j]+"}}","gi"),m[o[j]])}return k};this.html("<span>"+f.loadingText+"</span>");var b=this;a.getJSON(f.apiPath,{username:f.username,list:f.list,hashtag:f.hashtag,count:f.count,exclude_replies:f.hideReplies},function(i){b.find("span").fadeOut("fast",function(){b.html("<ul></ul>");for(var k=0;k<f.count;k++){var j=false;if(i[k]){j=i[k]}else{if(i.statuses!==undefined&&i.statuses[k]){j=i.statuses[k]}else{break}}var l={user_name:j.user.name,date:e(j.created_at),tweet:j.retweeted?c("RT @"+j.user.screen_name+": "+j.retweeted_status.text):c(j.text),avatar:'<img src="'+j.user.profile_image_url+'" />',url:"https://twitter.com/"+j.user.screen_name+"/status/"+j.id_str,retweeted:j.retweeted,screen_name:c("@"+j.user.screen_name)};b.find("ul").append("<li>"+g(l)+"</li>")}if(typeof h==="function"){h()}})})}})(jQuery);