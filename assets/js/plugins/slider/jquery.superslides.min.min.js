/*! Superslides - v0.6.2 - 2013-07-10
* https://github.com/nicinabox/superslides
* Copyright (c) 2013 Nic Aitch; Licensed MIT */
(function(b,a){var d,c="superslides";d=function(i,m){this.options=a.extend({play:!1,animation_speed:600,animation_easing:"swing",animation:"slide",inherit_width_from:b,inherit_height_from:b,pagination:!0,hashchange:!1,scrollable:!0,elements:{preserve:".preserve",nav:".slides-navigation",container:".slides-container",pagination:".slides-pagination"}},m);var u=this,g=a("<div>",{"class":"slides-control"}),t=1;this.$el=a(i),this.$container=this.$el.find(this.options.elements.container);var f=function(){return t=u._findMultiplier(),u.$el.on("click",u.options.elements.nav+" a",function(e){e.preventDefault(),u.stop(),a(this).hasClass("next")?u.animate("next",function(){u.start()}):u.animate("prev",function(){u.start()})}),a(document).on("keyup",function(e){37===e.keyCode&&u.animate("prev"),39===e.keyCode&&u.animate("next")}),a(b).on("resize",function(){setTimeout(function(){var e=u.$container.children();u.width=u._findWidth(),u.height=u._findHeight(),e.css({width:u.width,left:u.width}),u.css.containers(),u.css.images()},10)}),a(b).on("hashchange",function(){var h,e=u._parseHash();h=e&&!isNaN(e)?u._upcomingSlide(e-1):u._upcomingSlide(e),h>=0&&h!==u.current&&u.animate(h)}),u.pagination._events(),u.start(),u},k={containers:function(){u.init?(u.$el.css({height:u.height}),u.$control.css({width:u.width*t,left:-u.width}),u.$container.css({})):(a("body").css({margin:0}),u.$el.css({position:"relative",overflow:"hidden",width:"100%",height:u.height}),u.$control.css({position:"relative",transform:"translate3d(0)",height:"100%",width:u.width*t,left:-u.width}),u.$container.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative",height:"100%"})),1===u.size()&&u.$el.find(u.options.elements.nav).hide()},images:function(){var e=u.$container.find("img").not(u.options.elements.preserve);e.removeAttr("width").removeAttr("height").css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","z-index":"-1","max-width":"none"}),e.each(function(){var h=u.image._aspectRatio(this),o=this;if(a.data(this,"processed")){u.image._scale(o,h),u.image._center(o,h)}else{var l=new Image;l.onload=function(){u.image._scale(o,h),u.image._center(o,h),a.data(o,"processed",!0)},l.src=this.src}})},children:function(){var e=u.$container.children();e.is("img")&&(e.each(function(){if(a(this).is("img")){a(this).wrap("<div>");var h=a(this).attr("id");a(this).removeAttr("id"),a(this).parent().attr("id",h)}}),e=u.$container.children()),u.init||e.css({display:"none",left:2*u.width}),e.css({position:"absolute",overflow:"hidden",height:"100%",width:u.width,top:0,zIndex:0})}},q={slide:function(l,h){var r=u.$container.children(),o=r.eq(l.upcoming_slide);o.css({left:l.upcoming_position,display:"block"}),u.$control.animate({left:l.offset},u.options.animation_speed,u.options.animation_easing,function(){u.size()>1&&(u.$control.css({left:-u.width}),r.eq(l.upcoming_slide).css({left:u.width,zIndex:2}),l.outgoing_slide>=0&&r.eq(l.outgoing_slide).css({left:u.width,display:"none",zIndex:0})),h()})},fade:function(l,h){var x=this,v=x.$container.children(),r=v.eq(l.outgoing_slide),w=v.eq(l.upcoming_slide);w.css({left:this.width,opacity:1,display:"block"}),l.outgoing_slide>=0?r.animate({opacity:0},x.options.animation_speed,x.options.animation_easing,function(){x.size()>1&&(v.eq(l.upcoming_slide).css({zIndex:2}),l.outgoing_slide>=0&&v.eq(l.outgoing_slide).css({opacity:1,display:"none",zIndex:0})),h()}):(w.css({zIndex:2}),h())}};q=a.extend(q,a.fn.superslides.fx);var p={_centerY:function(e){var h=a(e);h.css({top:(u.height-h.height())/2})},_centerX:function(e){var h=a(e);h.css({left:(u.width-h.width())/2})},_center:function(e){u.image._centerX(e),u.image._centerY(e)},_aspectRatio:function(h){if(!h.naturalHeight&&!h.naturalWidth){var e=new Image;e.src=h.src,h.naturalHeight=e.height,h.naturalWidth=e.width}return h.naturalHeight/h.naturalWidth},_scale:function(h,s){s=s||u.image._aspectRatio(h);var l=u.height/u.width,r=a(h);l>s?r.css({height:u.height,width:u.height/s}):r.css({height:u.width*s,width:u.width})}},j={_setCurrent:function(h){if(u.$pagination){var e=u.$pagination.children();e.removeClass("current"),e.eq(h).addClass("current")}},_addItem:function(l){var x=l+1,v=x,w=u.$container.children().eq(l),h=w.attr("id");h&&(v=h);var s=a("<a>",{href:"#"+v,text:v});s.appendTo(u.$pagination)},_setup:function(){if(u.options.pagination&&1!==u.size()){var e=a("<nav>",{"class":u.options.elements.pagination.replace(/^\./,"")});u.$pagination=e.appendTo(u.$el);for(var h=0;u.size()>h;h++){u.pagination._addItem(h)}}},_events:function(){u.$el.on("click",u.options.elements.pagination+" a",function(h){h.preventDefault();var e=u._parseHash(this.hash),l=u._upcomingSlide(e-1);l!==u.current&&u.animate(l,function(){u.start()})})}};return this.css=k,this.image=p,this.pagination=j,this.fx=q,this.animation=this.fx[this.options.animation],this.$control=this.$container.wrap(g).parent(".slides-control"),u._findPositions(),u.width=u._findWidth(),u.height=u._findHeight(),this.css.children(),this.css.containers(),this.css.images(),this.pagination._setup(),f()},d.prototype={_findWidth:function(){return a(this.options.inherit_width_from).width()},_findHeight:function(){return a(this.options.inherit_height_from).height()},_findMultiplier:function(){return 1===this.size()?1:3},_upcomingSlide:function(f){if(/next/.test(f)){return this._nextInDom()}if(/prev/.test(f)){return this._prevInDom()}if(/\d/.test(f)){return +f}if(f&&/\w/.test(f)){var e=this._findSlideById(f);return e>=0?e:0}return 0},_findSlideById:function(e){return this.$container.find("#"+e).index()},_findPositions:function(f,e){e=e||this,void 0===f&&(f=-1),e.current=f,e.next=e._nextInDom(),e.prev=e._prevInDom()},_nextInDom:function(){var e=this.current+1;return e===this.size()&&(e=0),e},_prevInDom:function(){var e=this.current-1;return 0>e&&(e=this.size()-1),e},_parseHash:function(e){return e=e||b.location.hash,e=e.replace(/^#/,""),e&&!isNaN(+e)&&(e=+e),e},size:function(){return this.$container.children().length},destroy:function(){return this.$el.removeData()},update:function(){this.css.children(),this.css.containers(),this.css.images(),this.pagination._addItem(this.size()),this._findPositions(this.current),this.$el.trigger("updated.slides")},stop:function(){clearInterval(this.play_id),delete this.play_id,this.$el.trigger("stopped.slides")},start:function(){var e=this;e.options.hashchange?a(b).trigger("hashchange"):this.animate(),this.options.play&&(this.play_id&&this.stop(),this.play_id=setInterval(function(){e.animate()},this.options.play)),this.$el.trigger("started.slides")},animate:function(g,k){var i=this,h={};if(!(this.animating||(this.animating=!0,void 0===g&&(g="next"),h.upcoming_slide=this._upcomingSlide(g),h.upcoming_slide>=this.size()))){if(h.outgoing_slide=this.current,h.upcoming_position=2*this.width,h.offset=-h.upcoming_position,("prev"===g||h.outgoing_slide>g)&&(h.upcoming_position=0,h.offset=0),i.size()>1&&i.pagination._setCurrent(h.upcoming_slide),i.options.hashchange){var j=h.upcoming_slide+1,f=i.$container.children(":eq("+h.upcoming_slide+")").attr("id");b.location.hash=f?f:j}i.$el.trigger("animating.slides",[h]),i.animation(h,function(){i._findPositions(h.upcoming_slide,i),"function"==typeof k&&k(),i.animating=!1,i.$el.trigger("animated.slides"),i.init||(i.$el.trigger("init.slides"),i.init=!0,i.$container.fadeIn("fast"))})}}},a.fn[c]=function(e,f){var g=[];return this.each(function(){var i,k,j;return i=a(this),k=i.data(c),j="object"==typeof e&&e,k||(g=i.data(c,k=new d(this,j))),"string"==typeof e&&(g=k[e],"function"==typeof g)?g=g.call(k,f):void 0}),g},a.fn[c].fx={}})(this,jQuery);