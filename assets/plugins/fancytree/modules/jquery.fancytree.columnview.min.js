/*!
 * jquery.fancytree.columnview.js
 *
 * Render tree like a Mac Finder's column view.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2019, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.30.2
 * @date 2019-01-13T08:17:01Z
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fancytree"],a)}else{if(typeof module==="object"&&module.exports){require("./jquery.fancytree");module.exports=a(require("jquery"))}else{a(jQuery)}}})(function(c){var b=c.ui.fancytree.assert,a=c.ui.fancytree;c.ui.fancytree.registerExtension({name:"columnview",version:"2.30.2",options:{},treeInit:function(f){var e,h,d=f.tree,g=d.widget.element;d.tr=c("tbody tr",g)[0];d.$tdList=c(">td",d.tr);d.columnCount=d.$tdList.length;this._superApply(arguments);h=c(d.rootNode.ul);e=d.$tdList.eq(0);b(c.inArray("table",this.options.extensions)<0,"columnview extensions must not use ext-table");b(d.columnCount>=2,"columnview target must be a table with at least two columns");h.removeClass("fancytree-container").removeAttr("tabindex");d.$container=g;g.addClass("fancytree-container fancytree-ext-columnview").attr("tabindex","0");e.empty();h.detach().appendTo(e);d.widget.options.autoCollapse=true;d.widget.options.toggleEffect=false;d.widget.options.clickFolderMode=1;g.on("fancytreeactivate",function(k,l){var j=l.node,i=l.tree,m=j.getLevel();i._callHook("nodeCollapseSiblings",j);if(!j.expanded){i.$tdList.eq(m).nextAll().empty()}if(!j.expanded&&(j.children||j.lazy)){j.setExpanded()}}).on("fancytreekeydown",function(k,l){var i=null,m=true,j=l.node||l.tree.getFirstChild();if(j.getLevel()>=d.columnCount){return}switch(a.eventToString(k)){case"down":i=j.getNextSibling();break;case"left":if(!j.isTopLevel()){i=j.getParent()}break;case"right":i=j.getFirstChild();if(!i){return}i.visitSiblings(function(o){if(o.expanded){i=o;return false}},true);break;case"up":i=j.getPrevSibling();break;default:m=false}if(i){i.setActive()}return !m})},nodeSetExpanded:function(g,f,e){var h,i=g.node,d=g.tree,j=i.getLevel();if(f!==false&&!i.expanded&&i.isUndefined()){h=c("<span class='fancytree-icon fancytree-icon-loading'>");d.$tdList.eq(j).empty().append(h)}return this._superApply(arguments)},nodeRemoveChildren:function(d){c(d.node.span).find("span.fancytree-cv-right").remove();d.tree.$tdList.eq(d.node.getLevel()).nextAll().empty();return this._superApply(arguments)},nodeRender:function(m,f,l,i,g){this._super(m,f,l,i,g);var d,e,j,n=m.tree,h=m.node,k=c(h.span);k.find("span.fancytree-expander").remove();if(h.hasChildren()!==false&&!k.find("span.fancytree-cv-right").length){k.append(c("<span class='fancytree-icon fancytree-cv-right'>"))}if(h.ul&&h.expanded){h.ul.style.display="";d=h.getLevel();if(d<n.columnCount){e=n.$tdList.eq(d);j=c(h.ul).detach();e.empty().append(j)}}}});return c.ui.fancytree});