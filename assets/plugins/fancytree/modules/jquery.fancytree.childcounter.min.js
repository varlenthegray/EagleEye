/*!
 * jquery.fancytree.childcounter.js
 *
 * Add a child counter bubble to tree nodes.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2019, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.30.2
 * @date 2019-01-13T08:17:01Z
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fancytree"],a)}else{if(typeof module==="object"&&module.exports){require("./jquery.fancytree");module.exports=a(require("jquery"))}else{a(jQuery)}}})(function(a){a.ui.fancytree._FancytreeClass.prototype.countSelected=function(c){var b=this,d=b.options;return b.getSelectedNodes(c).length};a.ui.fancytree._FancytreeNodeClass.prototype.updateCounters=function(){var c=this,e=a("span.fancytree-childcounter",c.span),d=c.tree.options.childcounter,b=c.countChildren(d.deep);c.data.childCounter=b;if((b||!d.hideZeros)&&(!c.isExpanded()||!d.hideExpanded)){if(!e.length){e=a("<span class='fancytree-childcounter'/>").appendTo(a("span.fancytree-icon,span.fancytree-custom-icon",c.span))}e.text(b)}else{e.remove()}if(d.deep&&!c.isTopLevel()&&!c.isRoot()){c.parent.updateCounters()}};a.ui.fancytree.prototype.widgetMethod1=function(c){var b=this.tree;return c};a.ui.fancytree.registerExtension({name:"childcounter",version:"2.30.2",options:{deep:true,hideZeros:true,hideExpanded:false},foo:42,_appendCounter:function(c){var b=this},treeInit:function(c){var b=this,d=c.options,e=c.options.childcounter;this._superApply(arguments);this.$container.addClass("fancytree-ext-childcounter")},treeDestroy:function(b){this._superApply(arguments)},nodeRenderTitle:function(b,f){var d=b.node,e=b.options.childcounter,c=d.data.childCounter==null?d.countChildren(e.deep):+d.data.childCounter;this._super(b,f);if((c||!e.hideZeros)&&(!d.isExpanded()||!e.hideExpanded)){a("span.fancytree-icon,span.fancytree-custom-icon",d.span).append(a("<span class='fancytree-childcounter'/>").text(c))}},nodeSetExpanded:function(e,d,c){var b=e.tree,f=e.node;return this._superApply(arguments).always(function(){b.nodeRenderTitle(e)})}});return a.ui.fancytree});